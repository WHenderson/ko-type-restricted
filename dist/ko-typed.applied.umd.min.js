!function(e,t){"function"==typeof define&&define.amd?define(["knockout","is-an"],t):"object"==typeof exports?module.exports=t(require("knockout"),require("is-an")):e.ko=t(e.ko,e.isAn)}(this,function(e,t){var r,n=[].slice,o={}.hasOwnProperty;return r=function(e){var r,i,a,u,l,c,f,d,s,p,y,m,v,h,g,w;return e.typed={},u=function(){return!0},i=function(){return!1},a=function(e){return e},v=function(e){return null==e||0===e.length?void 0:t.String.Literal(e)?e:e.join("|")},y=function(e){return e=v(e),t.String.Literal(e)?e.split("|"):[]},m=function(e){var t,r,n,o;for(e=y(e),n=[],t=0,r=e.length;r>t;t++)o=e[t],-1===n.indexOf(o)&&n.push(o);return n},c=function(e){return/^[A-Z]/.test(e)},l=function(e){return t.Function(e)&&null!=e.typeName&&null!=e.typeNames&&null!=e.typeCheck&&null!=e.typeChecks},e.typed.options={validation:{enable:!1,read:!0,write:!0,target:!1,result:!0,message:void 0},exRead:{"catch":!0,catchTrue:function(e){return e instanceof TypeError},catchFalse:i,useDefault:!1,defaultValue:void 0,defaultFunc:void 0},exWrite:{"catch":!0,catchTrue:function(e){return e instanceof TypeError},catchFalse:i,noThrow:!1,useDefault:!1,defaultValue:void 0,defaultFunc:void 0},pure:!0,deferEvaluation:!0},r=function(){var t,r,o,i,a;for(a=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],t=0,r=i.length;r>t;t++)o=i[t],a=e.utils.extend(a,o);return a},f=function(){var e,t,i,a,u,l;return t=arguments[0],l=arguments[1],a=3<=arguments.length?n.call(arguments,2):[],l[t]=u=r.apply(null,[{}].concat(n.call(function(){var r;r=[];for(e in a)o.call(a,e)&&(i=a[e],r.push(null!=i?i[t]:void 0));return r}()))),u["catch"]===!0?u["catch"]=u.catchTrue:u["catch"]===!1&&(u["catch"]=u.catchFalse),u.useDefault&&null==u.defaultFunc&&(u.defaultFunc=function(){return u.defaultValue}),u},d=function(){var e,t;return t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],f.apply(null,["exRead",t].concat(n.call(e)))},s=function(){var e,t;return t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],f.apply(null,["exWrite",t].concat(n.call(e)))},p=function(){var e,t,i,a,u,l;return l=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],t=function(e){return e===!0?{enable:!0}:e===!1?{enable:!1}:e},l.validation=u=r.apply(null,[{}].concat(n.call(function(){var r;r=[];for(e in a)o.call(a,e)&&(i=a[e],r.push(t(null!=i?i.validation:void 0)));return r}()))),u},g=function(e,t,r,n){return function(){var t,o;try{return n()}catch(t){if(o=t,e.exRead["catch"](o)&&(r(o),e.exRead.useDefault))return e.exRead.defaultFunc();throw o}finally{null==o&&r(void 0)}}},w=function(e,t,r,n){return function(o){var i,a;try{return n(o)}catch(i){if(a=i,e.exWrite["catch"](a)&&(r(a),e.exWrite.useDefault&&t(e.exWrite.defaultFunc())),!e.exWrite.noThrow)throw a}finally{null==a&&r(void 0)}}},h=function(t,r,n){var o,i,a;n.validation.enable&&(a=n.validation,(a.target||a.result)&&(a.read||a.write)&&null!=e.validation&&(i=n.validation.read&&n.validation.write?function(){var e,t,n;return null!=(e=null!=(t=r.writeError())?t.message:void 0)?e:null!=(n=r.readError())?n.message:void 0}:n.validation.read?function(){var e;return null!=(e=r.readError())?e.message:void 0}:function(){var e;return null!=(e=r.writeError())?e.message:void 0},o=function(t){var r;t.extend({validatable:{enable:!0}}),r={message:void 0,validator:function(){var e,t;return e=i(),null==e?(r.message=void 0,!0):(r.message=null!=(t=a.message)?t:e,!1)}},e.validation.addAnonymousRule(t,r)},a.target&&o(t),a.result&&o(r)))},e.extenders.type=function(n,i){var a,u,l,f,b,C,S,k,N,x,D,T,E,U;if(t.String.Literal(i)||t.Array(i)?i={type:i}:t.Function(i)&&(i={type:i.typeName,check:i}),f=r({},e.typed.options,e.extenders.type.options,i),d(f,e.typed.options,e.extenders.type.options,i),s(f,e.typed.options,e.extenders.type.options,i),p(f,e.typed.options,e.extenders.type.options,i),i=f,E=y(i.type),E.push.apply(E,function(){var e;e=[];for(l in i)o.call(i,l)&&c(l)&&e.push(l);return e}()),E=m(E),T=v(E),D={},function(){var e,r,n,o;for(o=[],e=0,r=E.length;r>e;e++)l=E[e],o.push(D[l]=null!=(n=i[l])?n:t(l,{returnChecker:!0}));return o}(),N=null!=(C=i.check)?C:function(){return!0},x={},function(){var e,t;t=[];for(l in D)e=D[l],t.push(function(e){return x[l]=function(t){return e(t)&&N(t)}}(e));return t}(),k=function(){return function(e){return N(e)&&(0===E.length||E.some(function(t){return D[t](e)}))}}(),b=e.observable(),U=e.observable(),S=e.computed({pure:i.pure,deferEvaluation:!0,read:g(i,n,b,function(){var e;if(e=n(),!k(e))throw new TypeError("Unexpected internal type. Expected "+T+", got "+t(e));return e}),write:w(i,n,U,function(e){if(!k(e))throw new TypeError("Unexpected external type. Expected "+T+", received "+t(e));n(e)})}),S.typeName=T,S.typeNames=E,S.typeCheck=k,S.typeChecks=x,S.readError=b,S.writeError=U,h(n,S,i),!i.deferEvaluation)try{S.peek()}catch(a){throw u=a,S.dispose(),u}return S},e.extenders.type.options={},e.extenders.convert=function(n,i){var f,y,b,C,S;if(i===!1)return n;if(function(){var a,f,y,h,g,w,b,C,S,k,N,x,D,T,E,U;t.String(i)||t.Array(i)?i={type:i}:i===!0&&(i={}),i=r({},e.typed.options,e.extenders.convert.options,i),C={checkSelf:null!=(S=i.check)?S:u,read:i.read,write:i.write,checks:{},checkers:[],isTyped:l(n),ignoreDefaultConverters:i.ignoreDefaultConverters,pure:i.pure,deferEvaluation:i.deferEvaluation,types:m(i.type)},d(C,e.typed.options,e.extenders.convert.options,i),s(C,e.typed.options,e.extenders.convert.options,i),p(C,e.typed.options,e.extenders.convert.options,i);for(f in i)if(o.call(i,f)&&(y=i[f],c(f))){y=null!=(k=i[f])?k:{},C[f]={checkSelf:y.check,read:y.read,write:y.write,types:m(y.type)};for(g in y)o.call(y,g)&&c(g)&&(w=null!=(N=null!=(x=i[f])?x[g]:void 0)?N:{},C[f][g]={read:w.read,write:w.write})}for(C.type=v(C.types),D=C.types,h=0,b=D.length;b>h;h++)f=D[h],a=null!=(T=null!=(E=null!=(U=C[f])?U.checkSelf:void 0)?E:t(f,{returnChecker:!0}))?T:u,C.checks[f]=function(e){return function(t){return C.checkSelf(t)&&e(t)}}(a),C.checkers.push(C.checks[f]);return C.check=function(e){return C.checkSelf(e)&&(0===C.checkers.length||C.checkers.some(function(t){return t(e)}))},i=C}(),b=e.observable(),S=e.observable(),C=e.computed({pure:i.pure,deferEvaluation:!0,read:g(i,n,b,function(){var r,o,u,l,c,f,d,s,p,y,m,v,h,g,w,b,C,S,k,N;for(y=n(),c=void 0,N=function(e,t){var r,n;if(null!=e){try{c=e(y,t)}catch(r){if(n=r,!(n instanceof TypeError))throw n}if(null==n&&i.check(c))return!0}return!1},u=i.types,0===u.length&&(u=[t(y)]),f=0,h=u.length;h>f;f++)for(o=u[f],l=null!=(b=i[o])?b:{},s=null!=(C=l.types)?C:[],0===s.length&&(s=i.isTyped?n.typeNames:[t(y)]),m=0,g=s.length;g>m;m++)if(d=s[m],!i.isTyped||("function"==typeof(r=n.typeChecks)[d]?r[d](y):void 0))if(p=null!=(S=l[d])?S:{},null!=p.read){if(N(p.read,p.readOptions))return c}else if(d===o){if(null==l.read&&null==i.read&&N(a))return c}else if(!i.ignoreDefaultConverters&&N(e.typed.getConverter(d,o),p.readOptions))return c;for(v=0,w=u.length;w>v;v++)if(o=u[v],l=null!=(k=i[o])?k:{},N(l.read,l.readOptions))return c;if(N(i.read,i.readOptions))return c;throw null!=i.type?new TypeError("Unable to convert from internal type "+t(y)+" to external type "+i.type):new TypeError("Unable to convert from internal type "+t(y))}),write:w(i,n,S,function(r){var o,u,l,c,f,d,s,p,y,m,v,h,g,w,b,C,S;if(S=function(e,t){var o,i,a;if(null!=e){try{a=e(r,t)}catch(o){if(i=o,!(i instanceof TypeError))throw i}if(null==i)return n(a),!0}return!1},null==i.checkSelf||i.checkSelf(r)){for(u=i.types,0===u.length&&(u=[t(r)]),c=0,m=u.length;m>c;c++)if(o=u[c],l=null!=(g=i[o])?g:{},(null==l.checkSelf||l.checkSelf(r))&&(null!=l.checkSelf||t(r,o)))for(d=null!=(w=l.types)?w:[],0===d.length&&(d=i.isTyped?n.typeNames:[t(r)]),p=0,v=d.length;v>p;p++)if(f=d[p],s=null!=(b=l[f])?b:{},null!=s.write){if(S(s.write,s.writeOptions))return}else if(o===f){if(null==l.write&&null==i.write&&(!i.isTyped||n.typeChecks[o](r))&&S(a))return}else if(!i.ignoreDefaultConverters&&S(e.typed.getConverter(o,f),s.writeOptions))return;for(y=0,h=u.length;h>y;y++)if(o=u[y],l=null!=(C=i[o])?C:{},(null==l.checkSelf||l.checkSelf(r))&&(null!=l.checkSelf||t(r,o))&&S(l.write,l.writeOptions))return;if(S(i.write,i.writeOptions))return}throw i.isTyped?new TypeError("Unable to convert from external type "+t(r)+" to internal type "+n.typeName):new TypeError("Unable to convert from external type "+t(r))})}),C.typeName=i.type,C.typeNames=i.types,C.typeCheck=i.check,C.typeChecks=i.checks,C.readError=b,C.writeError=S,h(n,C,i),!i.deferEvaluation)try{C.peek()}catch(f){throw y=f,C.dispose(),y}return C},e.extenders.convert.options={},function(){var r;e.typed._converters=r={},e.typed.addConverter=function(n,o,i,a,u){var l;return"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(c(n),"Invalid typeName "+n),"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(c(o),"Invalid typeName "+n),l=null!=a?null!=u?function(r,n){var o;return 2!==arguments.length||t.Object(n)||(o={},o[u]=n,n=o),i(r,e.utils.extend(e.utils.extend({},l.options),n))}:function(t,r){return i(t,e.utils.extend(e.utils.extend({},l.options),r))}:function(e){return i(e)},l.options=a,null==r[n]&&(r[n]={}),r[n][o]=l,e.typed},e.typed.getConverter=function(e,t){var n;return null!=(n=r[e])?n[t]:void 0},e.typed.removeConverter=function(t,n){var o,i;return null!=(null!=(o=r[t])?o[n]:void 0)&&null!=(i=r[t])&&delete i[n],e.typed}}(),function(){var e;e=function(e,t,r){return null==r||0===+r?e(t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!==0?NaN:(t=t.toString().split("e"),t=e(+(t[0]+"e"+(t[1]?+t[1]-r:-r))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+r:r))))},null==Math.round10&&(Math.round10=function(t,r){return e(Math.round,t,r)}),null==Math.floor10&&(Math.floor10=function(t,r){return e(Math.floor,t,r)}),null==Math.ceil10&&(Math.ceil10=function(t,r){return e(Math.ceil,t,r)})}(),e.typed.addConverter("Boolean","Number.Integer",function(e,t){return e?t.truthy:t.falsey},{truthy:1,falsey:0},"truthy"),e.typed.addConverter("Boolean","Number",function(e,t){return e?t.truthy:t.falsey},{truthy:1,falsey:0},"truthy"),e.typed.addConverter("Boolean","String",function(e,t){return e=e?t.truthy:t.falsey,t.upperCase&&(e=e.toUpperCase()),e},{upperCase:!1,truthy:"true",falsey:"false"},"upperCase"),e.typed.addConverter("Date","Moment",function(e,t){return("undefined"!=typeof moment&&null!==moment?moment:require("moment"))(e)}),e.typed.addConverter("Date","String",function(e,t){var r;return isNaN(e.valueOf())?"":(r=t.formats[t.format],e[r].apply(e,t.params))},{formats:{date:"toDateString",iso:"toISOString",json:"toJSON",localeDate:"toLocaleDateString",localeTime:"toLocaleTimeString",locale:"toLocaleString",time:"toTimeString",utc:"toUTCString","default":"toString"},format:"default",params:[]},"format"),e.typed.addConverter("Date","Undefined",function(e,t){if(!isNaN(e.valueOf()))throw new TypeError("Unable to convert from valid Date to Undefined")}),e.typed.addConverter("Moment","Date",function(e,t){return e.toDate()}),e.typed.addConverter("Moment","String",function(e,t){return e.isValid()?e.locale(t.locale).format(t.format):""},{locale:"en",format:"L"},"format"),e.typed.addConverter("Moment","Undefined",function(e,t){if(e.isValid())throw new TypeError("Unable to convert from valid Moment to Undefined")}),e.typed.addConverter("Number","Boolean",function(e,t){if(null!=t.falsey&&e===t.falsey)return!1;if(null!=t.truthy&&e===t.truthy)return!0;if(null==t.falsey)return!1;if(null==t.truthy)return!0;throw new TypeError("Cannot convert from "+e+" to Boolean")},{truthy:void 0,falsey:0}),e.typed.addConverter("Number","Number.Integer",function(e,r){var n;if(null==r.mode){if(!t.Number.Integer(e))throw new TypeError("Cannot convert from Number to Number.Integer. Number is not an integer");return e}return(n="string"==typeof r.mode?Math[r.mode]:r.mode)(e)},{mode:void 0},"mode"),e.typed.addConverter("Number","String",function(e,t){return null!=t.decimals?(e=Math.round10(e,-t.decimals),e=e.toFixed(t.decimals)):e=e.toString(),e},{decimals:void 0},"decimals"),e.typed.addConverter("Number.Integer","Boolean",function(e,t){if(null!=t.falsey&&e===t.falsey)return!1;if(null!=t.truthy&&e===t.truthy)return!0;if(null==t.falsey)return!1;if(null==t.truthy)return!0;throw new TypeError("Cannot convert from "+e+" to Boolean")},{truthy:void 0,falsey:0}),e.typed.addConverter("Number.Integer","Number",function(e,t){return e}),e.typed.addConverter("Number.Integer","String",function(e,t){return e=e.toString(t.base),t.upperCase&&(e=e.toUpperCase()),e},{base:10,upperCase:!1},"base"),e.typed.addConverter("String","Boolean",function(e,t){var r,n,o,i,a,u,l,c;if(t.trim&&(e=e.trim()),t.ignoreCase&&(e=e.toLowerCase()),t.strict){if(e===t.truthy[0])return!0;if(e===t.falsey[0])return!1}else{for(u=t.truthy,n=0,i=u.length;i>n;n++)if(c=u[n],e===c)return!0;for(l=t.falsey,o=0,a=l.length;a>o;o++)if(r=l[o],e===r)return!1}throw new TypeError("Cannot convert from "+e+" to Boolean")},{ignoreCase:!0,strict:!1,truthy:["true","t","1","-1","yes","y"],falsey:["false","f","0","no","n"],trim:!1},"strict"),e.typed.addConverter("String","Date",function(e,t){var r,n,o,i,a;if(t.trim&&(e=e.trim()),t.strict){if(n=e.match(t.format),null==n)throw TypeError("Unable to convert from String to Date");o=function(e,t){return null!=e&&""!==e?parseFloat(e):t},a=void 0,null!=n[7]&&""!==n[7]&&(a=60*(60*o(n[t.formatDict.tzHours])+o(n[t.formatDict.tzMinutes]))*1e3,"-"===n[t.formatDict.tzSign]&&(a*=-1)),t.utc||null!=a?(i=Date.UTC(o(n[t.formatDict.year],0),o(n[t.formatDict.month],1)-1,o(n[t.formatDict.day],1),o(n[t.formatDict.hours],0),o(n[t.formatDict.minutes],0),o(n[t.formatDict.seconds],0)),null!=a&&(i+=a),r=new Date(i)):(r=new Date(o(n[t.formatDict.year],0),o(n[t.formatDict.month],1)-1,o(n[t.formatDict.day],1),o(n[t.formatDict.hours],0),o(n[t.formatDict.minutes],0),o(n[t.formatDict.seconds],0)),r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3))}else r=new Date(e);if(isNaN(r.valueOf()))throw TypeError("Unable to convert from String to Date");return r},{format:/^([0-9]{4})-([0-9]{2})-([0-9]{2})(?:(?:T|\s)([0-9]{2}):([0-9]{2})(?::([0-9]{2}(?:.[0-9]+)?))?(?:(\+|\-)([0-9]{2}):([0-9]{2}))?)?$/,formatDict:{year:1,month:2,day:3,hours:4,minutes:5,seconds:6,tzSign:7,tzHours:8,tzMinutes:9},utc:!1,strict:!0,trim:!1}),e.typed.addConverter("String","Moment",function(e,t){var r;if(t.trim&&(e=e.trim()),r=("undefined"!=typeof moment&&null!==moment?moment:require("moment"))(e,t.format,t.language,t.strict),!r.isValid())throw new TypeError("Unable to convert from String to Moment");return r},{strict:!1,language:"en",format:"L",trim:!1},"format"),e.typed.addConverter("String","Number.Integer",function(t,r){var n,o,i,a;if(r.trim&&(t=t.trim()),10===r.base&&!r.strict)try{return e.typed.getConverter("String","Number")(t,0)}catch(o){throw i=o,new TypeError("Unable to convert from "+t+" to Number.Integer")}if(n="0123456789abcdefghijklmnopqrstuvwxyz",!RegExp("^(\\-|\\+)?["+n.slice(0,null!=(a=r.base)?a:10)+"]+$",r.strict?void 0:"i").test(t))throw new TypeError("Unable to convert from "+t+" to Number.Integer");return parseInt(t,r.base)},{base:10,strict:!1,trim:!1},"base"),e.typed.addConverter("String","Number",function(e,t){if(t.trim&&(e=e.trim()),!/^(\+|\-)?[0-9]+(\.?)[0-9]*$/.test(e))throw new TypeError("Unable to convert from "+e+" to Number");return e=parseFloat(e,t.base),null!=t.decimals&&(e=Math.round10(e,-t.decimals)),e},{decimals:void 0,trim:!1},"decimals"),e.typed.addConverter("String","Undefined",function(e,t){if(t.trim&&(e=e.trim()),0!==e.length)throw new TypeError("Unable to convert from "+e+" to Undefined")},{trim:!1}),e.typed.addConverter("Undefined","Date",function(e){return new Date(NaN)}),e.typed.addConverter("Undefined","Moment",function(e){return require("moment").invalid()}),e.typed.addConverter("Undefined","String",function(e){return""}),e},r(e),e});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtvLXR5cGVkLmFwcGxpZWQudW1kLmpzIiwia28tdHlwZWQuYXBwbGllZC5jb2ZmZWUiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImtvIiwiaXNBbiIsInRoaXMiLCJhcHBseUtvdHIiLCJzbGljZSIsImhhc1Byb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImV4dGVuZCIsImZuRmFsc2UiLCJmbklkZW50aXR5IiwiZm5UcnVlIiwiaXNUeXBlZCIsImlzVmFsaWRUeXBlTmFtZSIsIm5vcm1hbGl6ZUV4Iiwibm9ybWFsaXplRXhSZWFkIiwibm9ybWFsaXplRXhXcml0ZSIsIm5vcm1hbGl6ZVZhbGlkYXRpb24iLCJ0eXBlTmFtZVRvQXJyYXkiLCJ0eXBlTmFtZVRvRGlzdGluY3RBcnJheSIsInR5cGVOYW1lVG9TdHJpbmciLCJ2YWxpZGF0ZSIsIndyYXBSZWFkIiwid3JhcFdyaXRlIiwidHlwZWQiLCJ4IiwidmFsdWUiLCJsZW5ndGgiLCJTdHJpbmciLCJMaXRlcmFsIiwiam9pbiIsInNwbGl0IiwiaSIsImxlbiIsInJlc3VsdCIsInR5cGVOYW1lIiwiaW5kZXhPZiIsInB1c2giLCJ0ZXN0IiwiRnVuY3Rpb24iLCJ0eXBlTmFtZXMiLCJ0eXBlQ2hlY2siLCJ0eXBlQ2hlY2tzIiwib3B0aW9ucyIsInZhbGlkYXRpb24iLCJlbmFibGUiLCJyZWFkIiwid3JpdGUiLCJ0YXJnZXQiLCJtZXNzYWdlIiwiZXhSZWFkIiwiY2F0Y2giLCJjYXRjaFRydWUiLCJleCIsIlR5cGVFcnJvciIsImNhdGNoRmFsc2UiLCJ1c2VEZWZhdWx0IiwiZGVmYXVsdFZhbHVlIiwiZGVmYXVsdEZ1bmMiLCJleFdyaXRlIiwibm9UaHJvdyIsInB1cmUiLCJkZWZlckV2YWx1YXRpb24iLCJvYmplY3QiLCJvYmplY3RzIiwiYXJndW1lbnRzIiwiY2FsbCIsInV0aWxzIiwia2V5IiwibmFtZSIsIm9wdCIsImFwcGx5IiwiY29uY2F0IiwicmVzdWx0cyIsIm5vcm0iLCJ2IiwicmVhZEVycm9yIiwiZXJyb3IiLCJ3cml0ZUVycm9yIiwiYXBwbHlWYWxpZGF0aW9uIiwicmVmIiwicmVmMSIsInJlZjIiLCJiYXNlIiwicnVsZSIsInZhbGlkYXRhYmxlIiwidmFsaWRhdG9yIiwibSIsImFkZEFub255bW91c1J1bGUiLCJleHRlbmRlcnMiLCJ0eXBlIiwibm9ybWFsIiwidHlwZUNoZWNrU2ltcGxlIiwidHlwZUNoZWNrc1NpbXBsZSIsIkFycmF5IiwiY2hlY2siLCJyZXR1cm5DaGVja2VyIiwic29tZSIsIm9ic2VydmFibGUiLCJjb21wdXRlZCIsImludGVybmFsVmFsdWUiLCJleHRlcm5hbFZhbHVlIiwicGVlayIsImRpc3Bvc2UiLCJjb252ZXJ0IiwiY2hlY2tlciIsImV4dFR5cGVOYW1lIiwiZXh0VHlwZU9wdGlvbnMiLCJpbnRUeXBlTmFtZSIsImludFR5cGVPcHRpb25zIiwicmVmMyIsInJlZjQiLCJyZWY1IiwicmVmNiIsInJlZjciLCJjaGVja1NlbGYiLCJjaGVja3MiLCJjaGVja2VycyIsImlnbm9yZURlZmF1bHRDb252ZXJ0ZXJzIiwidHlwZXMiLCJiYXNlMSIsImV4dFR5cGVOYW1lcyIsImludFR5cGVOYW1lcyIsImoiLCJrIiwibGVuMSIsImxlbjIiLCJ0cnlSZWFkIiwicmVhZE9wdGlvbnMiLCJnZXRDb252ZXJ0ZXIiLCJ0cnlXcml0ZSIsIndyaXRlT3B0aW9ucyIsImNvbnZlcnRlcnMiLCJfY29udmVydGVycyIsImFkZENvbnZlcnRlciIsImZyb21UeXBlTmFtZSIsInRvVHlwZU5hbWUiLCJjb252ZXJ0ZXIiLCJkZWZhdWx0T3B0aW9ucyIsImRlZmF1bHRPcHRpb24iLCJ3cmFwcGVyIiwiY29uc29sZSIsImFzc2VydCIsIm8iLCJPYmplY3QiLCJyZW1vdmVDb252ZXJ0ZXIiLCJkZWNpbWFsQWRqdXN0IiwiZXhwIiwiaXNOYU4iLCJOYU4iLCJ0b1N0cmluZyIsIk1hdGgiLCJyb3VuZDEwIiwicm91bmQiLCJmbG9vcjEwIiwiZmxvb3IiLCJjZWlsMTAiLCJjZWlsIiwidHJ1dGh5IiwiZmFsc2V5IiwidXBwZXJDYXNlIiwidG9VcHBlckNhc2UiLCJtb21lbnQiLCJtZXRob2QiLCJ2YWx1ZU9mIiwiZm9ybWF0cyIsImZvcm1hdCIsInBhcmFtcyIsImRhdGUiLCJpc28iLCJqc29uIiwibG9jYWxlRGF0ZSIsImxvY2FsZVRpbWUiLCJsb2NhbGUiLCJ0aW1lIiwidXRjIiwiZGVmYXVsdCIsInRvRGF0ZSIsImlzVmFsaWQiLCJtb2RlIiwiTnVtYmVyIiwiSW50ZWdlciIsImRlY2ltYWxzIiwidG9GaXhlZCIsInRyaW0iLCJpZ25vcmVDYXNlIiwidG9Mb3dlckNhc2UiLCJzdHJpY3QiLCJtYXRjaCIsIm51bSIsInR6IiwiZGVmIiwicGFyc2VGbG9hdCIsImZvcm1hdERpY3QiLCJ0ekhvdXJzIiwidHpNaW51dGVzIiwidHpTaWduIiwiRGF0ZSIsIlVUQyIsInllYXIiLCJtb250aCIsImRheSIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJzZXRUaW1lIiwiZ2V0VGltZSIsImdldFRpbWV6b25lT2Zmc2V0IiwibGFuZ3VhZ2UiLCJjaGFycyIsIlJlZ0V4cCIsInBhcnNlSW50IiwiaW52YWxpZCJdLCJtYXBwaW5ncyI6IkNBQUUsU0FBU0EsRUFBTUMsR0FDTyxrQkFBWEMsU0FBeUJBLE9BQU9DLElBQ3pDRCxRQUFRLFdBQVksU0FBVUQsR0FDRixnQkFBWkcsU0FDaEJDLE9BQU9ELFFBQVVILEVBQVFLLFFBQVEsWUFBYUEsUUFBUSxVQUV0RE4sRUFBS08sR0FBS04sRUFBUUQsRUFBS08sR0FBSVAsRUFBS1EsT0FFbENDLEtBQU0sU0FBU0YsRUFBSUMsR0FDckIsR0FBSUUsR0NUSkMsS0FBQUEsTURXRUMsS0FBYUMsY0FnaENmLE9DM2hDQUgsR0FBWSxTQUFDSCxHQUNYLEdBQUFPLEdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFD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LE1BQWFyQyxFQUFRZ0osT0FBZixPQUEyQixLQUFLckosS0FBS1osR0FDeEcsS0FBVSxJQUFBNEIsV0FBVSwwQkFBMEI1QixFQUFNLHFCQUV0RCxPQUFPeUwsVUFBU3pMLEVBQU9pQixFQUFRd0MsUUFFL0JBLEtBQU0sR0FDTndHLFFBQVEsRUFDUkgsTUFBTSxHQUVSLFFBR0Z2TCxFQUFHdUIsTUFBTThHLGFBQ1AsU0FDQSxTQUNBLFNBQUM1RyxFQUFPaUIsR0FJTixHQUhHQSxFQUFRNkksT0FDVDlKLEVBQVFBLEVBQU04SixTQUVULDhCQUE4QmxKLEtBQUtaLEdBQ3hDLEtBQVUsSUFBQTRCLFdBQVUsMEJBQTBCNUIsRUFBTSxhQU90RCxPQUxBQSxHQUFRc0ssV0FBV3RLLEVBQU9pQixFQUFRd0MsTUFFL0IsTUFBQXhDLEVBQUEySSxXQUNENUosRUFBUTZILEtBQUtDLFFBQVE5SCxHQUFRaUIsRUFBUTJJLFdBRWhDNUosSUFFUDRKLFNBQVUsT0FDVkUsTUFBTSxHQUVSLFlBR0Z2TCxFQUFHdUIsTUFBTThHLGFBQ1AsU0FDQSxZQUNBLFNBQUM1RyxFQUFPaUIsR0FJTixHQUhHQSxFQUFRNkksT0FDVDlKLEVBQVFBLEVBQU04SixRQUVHLElBQWhCOUosRUFBTUMsT0FDUCxLQUFVLElBQUEyQixXQUFVLDBCQUEwQjVCLEVBQU0sbUJBSXREOEosTUFBTSxJQUlWdkwsRUFBR3VCLE1BQU04RyxhQUNQLFlBQ0EsT0FDQSxTQUFDNUcsR0FDQyxNQUFXLElBQUEySyxNQUFLaEQsT0FHcEJwSixFQUFHdUIsTUFBTThHLGFBQ1AsWUFDQSxTQUNBLFNBQUM1RyxHQUNDLE1BQU8xQixTQUFRLFVBQVVvTixZQUc3Qm5OLEVBQUd1QixNQUFNOEcsYUFDUCxZQUNBLFNBQ0EsU0FBQzVHLEdBQ0MsTUFBTyxLQUdKekIsR0FFVEcsRUFBVUgsR0Q1RUhBIiwiZmlsZSI6ImtvLXR5cGVkLmFwcGxpZWQudW1kLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xyXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgIGRlZmluZShbJ2tub2Nrb3V0JywgJ2lzLWFuJ10sIGZhY3RvcnkpO1xyXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgna25vY2tvdXQnKSwgcmVxdWlyZSgnaXMtYW4nKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJvb3Qua28gPSBmYWN0b3J5KHJvb3Qua28sIHJvb3QuaXNBbik7XHJcbiAgfVxyXG59KHRoaXMsIGZ1bmN0aW9uKGtvLCBpc0FuKSB7XHJcbnZhciBhcHBseUtvdHIsXG4gIHNsaWNlID0gW10uc2xpY2UsXG4gIGhhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuYXBwbHlLb3RyID0gZnVuY3Rpb24oa28pIHtcbiAgdmFyIGV4dGVuZCwgZm5GYWxzZSwgZm5JZGVudGl0eSwgZm5UcnVlLCBpc1R5cGVkLCBpc1ZhbGlkVHlwZU5hbWUsIG5vcm1hbGl6ZUV4LCBub3JtYWxpemVFeFJlYWQsIG5vcm1hbGl6ZUV4V3JpdGUsIG5vcm1hbGl6ZVZhbGlkYXRpb24sIHR5cGVOYW1lVG9BcnJheSwgdHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXksIHR5cGVOYW1lVG9TdHJpbmcsIHZhbGlkYXRlLCB3cmFwUmVhZCwgd3JhcFdyaXRlO1xuICBrby50eXBlZCA9IHt9O1xuICBmblRydWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcbiAgZm5GYWxzZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcbiAgZm5JZGVudGl0eSA9IGZ1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4geDtcbiAgfTtcbiAgdHlwZU5hbWVUb1N0cmluZyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgaWYgKCh2YWx1ZSA9PSBudWxsKSB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfSBlbHNlIGlmIChpc0FuLlN0cmluZy5MaXRlcmFsKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWUuam9pbignfCcpO1xuICAgIH1cbiAgfTtcbiAgdHlwZU5hbWVUb0FycmF5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YWx1ZSA9IHR5cGVOYW1lVG9TdHJpbmcodmFsdWUpO1xuICAgIGlmIChpc0FuLlN0cmluZy5MaXRlcmFsKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlLnNwbGl0KCd8Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH07XG4gIHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgaSwgbGVuLCByZXN1bHQsIHR5cGVOYW1lO1xuICAgIHZhbHVlID0gdHlwZU5hbWVUb0FycmF5KHZhbHVlKTtcbiAgICByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdHlwZU5hbWUgPSB2YWx1ZVtpXTtcbiAgICAgIGlmIChyZXN1bHQuaW5kZXhPZih0eXBlTmFtZSkgPT09IC0xKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHR5cGVOYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgaXNWYWxpZFR5cGVOYW1lID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gL15bQS1aXS8udGVzdCh2YWx1ZSk7XG4gIH07XG4gIGlzVHlwZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBpc0FuLkZ1bmN0aW9uKHZhbHVlKSAmJiAodmFsdWUudHlwZU5hbWUgIT0gbnVsbCkgJiYgKHZhbHVlLnR5cGVOYW1lcyAhPSBudWxsKSAmJiAodmFsdWUudHlwZUNoZWNrICE9IG51bGwpICYmICh2YWx1ZS50eXBlQ2hlY2tzICE9IG51bGwpO1xuICB9O1xuICBrby50eXBlZC5vcHRpb25zID0ge1xuICAgIHZhbGlkYXRpb246IHtcbiAgICAgIGVuYWJsZTogZmFsc2UsXG4gICAgICByZWFkOiB0cnVlLFxuICAgICAgd3JpdGU6IHRydWUsXG4gICAgICB0YXJnZXQ6IGZhbHNlLFxuICAgICAgcmVzdWx0OiB0cnVlLFxuICAgICAgbWVzc2FnZTogdm9pZCAwXG4gICAgfSxcbiAgICBleFJlYWQ6IHtcbiAgICAgIFwiY2F0Y2hcIjogdHJ1ZSxcbiAgICAgIGNhdGNoVHJ1ZTogZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgcmV0dXJuIGV4IGluc3RhbmNlb2YgVHlwZUVycm9yO1xuICAgICAgfSxcbiAgICAgIGNhdGNoRmFsc2U6IGZuRmFsc2UsXG4gICAgICB1c2VEZWZhdWx0OiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZTogdm9pZCAwLFxuICAgICAgZGVmYXVsdEZ1bmM6IHZvaWQgMFxuICAgIH0sXG4gICAgZXhXcml0ZToge1xuICAgICAgXCJjYXRjaFwiOiB0cnVlLFxuICAgICAgY2F0Y2hUcnVlOiBmdW5jdGlvbihleCkge1xuICAgICAgICByZXR1cm4gZXggaW5zdGFuY2VvZiBUeXBlRXJyb3I7XG4gICAgICB9LFxuICAgICAgY2F0Y2hGYWxzZTogZm5GYWxzZSxcbiAgICAgIG5vVGhyb3c6IGZhbHNlLFxuICAgICAgdXNlRGVmYXVsdDogZmFsc2UsXG4gICAgICBkZWZhdWx0VmFsdWU6IHZvaWQgMCxcbiAgICAgIGRlZmF1bHRGdW5jOiB2b2lkIDBcbiAgICB9LFxuICAgIHB1cmU6IHRydWUsXG4gICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlXG4gIH07XG4gIGV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpLCBsZW4sIG9iamVjdCwgb2JqZWN0cywgcm9vdDtcbiAgICByb290ID0gYXJndW1lbnRzWzBdLCBvYmplY3RzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgZm9yIChpID0gMCwgbGVuID0gb2JqZWN0cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgb2JqZWN0ID0gb2JqZWN0c1tpXTtcbiAgICAgIHJvb3QgPSBrby51dGlscy5leHRlbmQocm9vdCwgb2JqZWN0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJvb3Q7XG4gIH07XG4gIG5vcm1hbGl6ZUV4ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGtleSwgbmFtZSwgb2JqZWN0LCBvYmplY3RzLCBvcHQsIHJvb3Q7XG4gICAgbmFtZSA9IGFyZ3VtZW50c1swXSwgcm9vdCA9IGFyZ3VtZW50c1sxXSwgb2JqZWN0cyA9IDMgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKSA6IFtdO1xuICAgIHJvb3RbbmFtZV0gPSBvcHQgPSBleHRlbmQuYXBwbHkobnVsbCwgW3t9XS5jb25jYXQoc2xpY2UuY2FsbCgoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoa2V5IGluIG9iamVjdHMpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwob2JqZWN0cywga2V5KSkgY29udGludWU7XG4gICAgICAgIG9iamVjdCA9IG9iamVjdHNba2V5XTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG9iamVjdCAhPSBudWxsID8gb2JqZWN0W25hbWVdIDogdm9pZCAwKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pKCkpKSk7XG4gICAgaWYgKG9wdFtcImNhdGNoXCJdID09PSB0cnVlKSB7XG4gICAgICBvcHRbXCJjYXRjaFwiXSA9IG9wdC5jYXRjaFRydWU7XG4gICAgfSBlbHNlIGlmIChvcHRbXCJjYXRjaFwiXSA9PT0gZmFsc2UpIHtcbiAgICAgIG9wdFtcImNhdGNoXCJdID0gb3B0LmNhdGNoRmFsc2U7XG4gICAgfVxuICAgIGlmIChvcHQudXNlRGVmYXVsdCAmJiAob3B0LmRlZmF1bHRGdW5jID09IG51bGwpKSB7XG4gICAgICBvcHQuZGVmYXVsdEZ1bmMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG9wdC5kZWZhdWx0VmFsdWU7XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gb3B0O1xuICB9O1xuICBub3JtYWxpemVFeFJlYWQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb2JqZWN0cywgcm9vdDtcbiAgICByb290ID0gYXJndW1lbnRzWzBdLCBvYmplY3RzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgcmV0dXJuIG5vcm1hbGl6ZUV4LmFwcGx5KG51bGwsIFsnZXhSZWFkJywgcm9vdF0uY29uY2F0KHNsaWNlLmNhbGwob2JqZWN0cykpKTtcbiAgfTtcbiAgbm9ybWFsaXplRXhXcml0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvYmplY3RzLCByb290O1xuICAgIHJvb3QgPSBhcmd1bWVudHNbMF0sIG9iamVjdHMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICByZXR1cm4gbm9ybWFsaXplRXguYXBwbHkobnVsbCwgWydleFdyaXRlJywgcm9vdF0uY29uY2F0KHNsaWNlLmNhbGwob2JqZWN0cykpKTtcbiAgfTtcbiAgbm9ybWFsaXplVmFsaWRhdGlvbiA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBrZXksIG5vcm0sIG9iamVjdCwgb2JqZWN0cywgb3B0LCByb290O1xuICAgIHJvb3QgPSBhcmd1bWVudHNbMF0sIG9iamVjdHMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICBub3JtID0gZnVuY3Rpb24odikge1xuICAgICAgaWYgKHYgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAodiA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdjtcbiAgICAgIH1cbiAgICB9O1xuICAgIHJvb3RbJ3ZhbGlkYXRpb24nXSA9IG9wdCA9IGV4dGVuZC5hcHBseShudWxsLCBbe31dLmNvbmNhdChzbGljZS5jYWxsKChmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXN1bHRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChrZXkgaW4gb2JqZWN0cykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvYmplY3RzLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgb2JqZWN0ID0gb2JqZWN0c1trZXldO1xuICAgICAgICByZXN1bHRzLnB1c2gobm9ybShvYmplY3QgIT0gbnVsbCA/IG9iamVjdFsndmFsaWRhdGlvbiddIDogdm9pZCAwKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KSgpKSkpO1xuICAgIHJldHVybiBvcHQ7XG4gIH07XG4gIHdyYXBSZWFkID0gZnVuY3Rpb24ob3B0aW9ucywgdGFyZ2V0LCByZWFkRXJyb3IsIHJlYWQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgZXJyb3IsIGV4O1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHJlYWQoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4ID0gZXJyb3I7XG4gICAgICAgIGlmIChvcHRpb25zLmV4UmVhZFtcImNhdGNoXCJdKGV4KSkge1xuICAgICAgICAgIHJlYWRFcnJvcihleCk7XG4gICAgICAgICAgaWYgKG9wdGlvbnMuZXhSZWFkLnVzZURlZmF1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiBvcHRpb25zLmV4UmVhZC5kZWZhdWx0RnVuYygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBleDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChleCA9PSBudWxsKSB7XG4gICAgICAgICAgcmVhZEVycm9yKHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICB3cmFwV3JpdGUgPSBmdW5jdGlvbihvcHRpb25zLCB0YXJnZXQsIHdyaXRlRXJyb3IsIHdyaXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgZXJyb3IsIGV4O1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHdyaXRlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4ID0gZXJyb3I7XG4gICAgICAgIGlmIChvcHRpb25zLmV4V3JpdGVbXCJjYXRjaFwiXShleCkpIHtcbiAgICAgICAgICB3cml0ZUVycm9yKGV4KTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5leFdyaXRlLnVzZURlZmF1bHQpIHtcbiAgICAgICAgICAgIHRhcmdldChvcHRpb25zLmV4V3JpdGUuZGVmYXVsdEZ1bmMoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghb3B0aW9ucy5leFdyaXRlLm5vVGhyb3cpIHtcbiAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgfVxuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGV4ID09IG51bGwpIHtcbiAgICAgICAgICB3cml0ZUVycm9yKHZvaWQgMCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9O1xuICB2YWxpZGF0ZSA9IGZ1bmN0aW9uKHRhcmdldCwgcmVzdWx0LCBvcHRpb25zKSB7XG4gICAgdmFyIGFwcGx5VmFsaWRhdGlvbiwgbWVzc2FnZSwgdmFsaWRhdGlvbjtcbiAgICBpZiAoIW9wdGlvbnMudmFsaWRhdGlvbi5lbmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFsaWRhdGlvbiA9IG9wdGlvbnMudmFsaWRhdGlvbjtcbiAgICBpZiAoKCF2YWxpZGF0aW9uLnRhcmdldCAmJiAhdmFsaWRhdGlvbi5yZXN1bHQpIHx8ICghdmFsaWRhdGlvbi5yZWFkICYmICF2YWxpZGF0aW9uLndyaXRlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoa28udmFsaWRhdGlvbiAhPSBudWxsKSB7XG5cbiAgICAgIC8qXG4gICAgICBOb3RlIHRoYXQgdXNpbmcga28gdmFsaWRhdGlvbiB3aWxsIGZvcmNlIGFuIGltbWVkaWF0ZSBldmFsdWF0aW9uIG9mIHRoZSB0YXJnZXR0ZWQgb2JzZXJ2YWJsZXNcbiAgICAgICAqL1xuICAgICAgaWYgKG9wdGlvbnMudmFsaWRhdGlvbi5yZWFkICYmIG9wdGlvbnMudmFsaWRhdGlvbi53cml0ZSkge1xuICAgICAgICBtZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHJlZiwgcmVmMSwgcmVmMjtcbiAgICAgICAgICByZXR1cm4gKHJlZiA9IChyZWYxID0gcmVzdWx0LndyaXRlRXJyb3IoKSkgIT0gbnVsbCA/IHJlZjEubWVzc2FnZSA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZiA6IChyZWYyID0gcmVzdWx0LnJlYWRFcnJvcigpKSAhPSBudWxsID8gcmVmMi5tZXNzYWdlIDogdm9pZCAwO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnZhbGlkYXRpb24ucmVhZCkge1xuICAgICAgICBtZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHJlZjtcbiAgICAgICAgICByZXR1cm4gKHJlZiA9IHJlc3VsdC5yZWFkRXJyb3IoKSkgIT0gbnVsbCA/IHJlZi5tZXNzYWdlIDogdm9pZCAwO1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZWY7XG4gICAgICAgICAgcmV0dXJuIChyZWYgPSByZXN1bHQud3JpdGVFcnJvcigpKSAhPSBudWxsID8gcmVmLm1lc3NhZ2UgOiB2b2lkIDA7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBhcHBseVZhbGlkYXRpb24gPSBmdW5jdGlvbihiYXNlKSB7XG4gICAgICAgIHZhciBydWxlO1xuICAgICAgICBiYXNlLmV4dGVuZCh7XG4gICAgICAgICAgdmFsaWRhdGFibGU6IHtcbiAgICAgICAgICAgIGVuYWJsZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJ1bGUgPSB7XG4gICAgICAgICAgbWVzc2FnZTogdm9pZCAwLFxuICAgICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgbSwgcmVmO1xuICAgICAgICAgICAgbSA9IG1lc3NhZ2UoKTtcbiAgICAgICAgICAgIGlmIChtID09IG51bGwpIHtcbiAgICAgICAgICAgICAgcnVsZS5tZXNzYWdlID0gdm9pZCAwO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJ1bGUubWVzc2FnZSA9IChyZWYgPSB2YWxpZGF0aW9uLm1lc3NhZ2UpICE9IG51bGwgPyByZWYgOiBtO1xuICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBrby52YWxpZGF0aW9uLmFkZEFub255bW91c1J1bGUoYmFzZSwgcnVsZSk7XG4gICAgICB9O1xuICAgICAgaWYgKHZhbGlkYXRpb24udGFyZ2V0KSB7XG4gICAgICAgIGFwcGx5VmFsaWRhdGlvbih0YXJnZXQpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbGlkYXRpb24ucmVzdWx0KSB7XG4gICAgICAgIGFwcGx5VmFsaWRhdGlvbihyZXN1bHQpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAga28uZXh0ZW5kZXJzLnR5cGUgPSBmdW5jdGlvbih0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgZXJyb3IsIGV4LCBuYW1lLCBub3JtYWwsIHJlYWRFcnJvciwgcmVmLCByZXN1bHQsIHR5cGVDaGVjaywgdHlwZUNoZWNrU2ltcGxlLCB0eXBlQ2hlY2tzLCB0eXBlQ2hlY2tzU2ltcGxlLCB0eXBlTmFtZSwgdHlwZU5hbWVzLCB3cml0ZUVycm9yO1xuICAgIGlmIChpc0FuLlN0cmluZy5MaXRlcmFsKG9wdGlvbnMpIHx8IGlzQW4uQXJyYXkob3B0aW9ucykpIHtcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIHR5cGU6IG9wdGlvbnNcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmIChpc0FuLkZ1bmN0aW9uKG9wdGlvbnMpKSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGVOYW1lLFxuICAgICAgICBjaGVjazogb3B0aW9uc1xuICAgICAgfTtcbiAgICB9XG4gICAgbm9ybWFsID0gZXh0ZW5kKHt9LCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKTtcbiAgICBub3JtYWxpemVFeFJlYWQobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKTtcbiAgICBub3JtYWxpemVFeFdyaXRlKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgbm9ybWFsaXplVmFsaWRhdGlvbihub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIG9wdGlvbnMgPSBub3JtYWw7XG4gICAgdHlwZU5hbWVzID0gdHlwZU5hbWVUb0FycmF5KG9wdGlvbnMudHlwZSk7XG4gICAgdHlwZU5hbWVzLnB1c2guYXBwbHkodHlwZU5hbWVzLCAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9wdGlvbnMsIG5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgaWYgKGlzVmFsaWRUeXBlTmFtZShuYW1lKSkge1xuICAgICAgICAgIHJlc3VsdHMucHVzaChuYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSkoKSk7XG4gICAgdHlwZU5hbWVzID0gdHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXkodHlwZU5hbWVzKTtcbiAgICB0eXBlTmFtZSA9IHR5cGVOYW1lVG9TdHJpbmcodHlwZU5hbWVzKTtcbiAgICB0eXBlQ2hlY2tzU2ltcGxlID0ge307XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGksIGxlbiwgcmVmLCByZXN1bHRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gdHlwZU5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIG5hbWUgPSB0eXBlTmFtZXNbaV07XG4gICAgICAgIHJlc3VsdHMucHVzaCh0eXBlQ2hlY2tzU2ltcGxlW25hbWVdID0gKHJlZiA9IG9wdGlvbnNbbmFtZV0pICE9IG51bGwgPyByZWYgOiBpc0FuKG5hbWUsIHtcbiAgICAgICAgICByZXR1cm5DaGVja2VyOiB0cnVlXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pKCk7XG4gICAgdHlwZUNoZWNrU2ltcGxlID0gKHJlZiA9IG9wdGlvbnMuY2hlY2spICE9IG51bGwgPyByZWYgOiAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICB0eXBlQ2hlY2tzID0ge307XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoZWNrLCByZXN1bHRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChuYW1lIGluIHR5cGVDaGVja3NTaW1wbGUpIHtcbiAgICAgICAgY2hlY2sgPSB0eXBlQ2hlY2tzU2ltcGxlW25hbWVdO1xuICAgICAgICByZXN1bHRzLnB1c2goKGZ1bmN0aW9uKGNoZWNrKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVDaGVja3NbbmFtZV0gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNoZWNrKHZhbHVlKSAmJiB0eXBlQ2hlY2tTaW1wbGUodmFsdWUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKGNoZWNrKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KSgpO1xuICAgIHR5cGVDaGVjayA9IChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZUNoZWNrU2ltcGxlKHZhbHVlKSAmJiAoKHR5cGVOYW1lcy5sZW5ndGggPT09IDApIHx8ICh0eXBlTmFtZXMuc29tZShmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHR5cGVDaGVja3NTaW1wbGVbbmFtZV0odmFsdWUpO1xuICAgICAgICB9KSkpO1xuICAgICAgfTtcbiAgICB9KSgpO1xuICAgIHJlYWRFcnJvciA9IGtvLm9ic2VydmFibGUoKTtcbiAgICB3cml0ZUVycm9yID0ga28ub2JzZXJ2YWJsZSgpO1xuICAgIHJlc3VsdCA9IGtvLmNvbXB1dGVkKHtcbiAgICAgIHB1cmU6IG9wdGlvbnMucHVyZSxcbiAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZSxcbiAgICAgIHJlYWQ6IHdyYXBSZWFkKG9wdGlvbnMsIHRhcmdldCwgcmVhZEVycm9yLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGludGVybmFsVmFsdWU7XG4gICAgICAgIGludGVybmFsVmFsdWUgPSB0YXJnZXQoKTtcbiAgICAgICAgaWYgKCF0eXBlQ2hlY2soaW50ZXJuYWxWYWx1ZSkpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5leHBlY3RlZCBpbnRlcm5hbCB0eXBlLiBFeHBlY3RlZCBcIiArIHR5cGVOYW1lICsgXCIsIGdvdCBcIiArIChpc0FuKGludGVybmFsVmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGludGVybmFsVmFsdWU7XG4gICAgICB9KSxcbiAgICAgIHdyaXRlOiB3cmFwV3JpdGUob3B0aW9ucywgdGFyZ2V0LCB3cml0ZUVycm9yLCBmdW5jdGlvbihleHRlcm5hbFZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlQ2hlY2soZXh0ZXJuYWxWYWx1ZSkpIHtcbiAgICAgICAgICB0YXJnZXQoZXh0ZXJuYWxWYWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuZXhwZWN0ZWQgZXh0ZXJuYWwgdHlwZS4gRXhwZWN0ZWQgXCIgKyB0eXBlTmFtZSArIFwiLCByZWNlaXZlZCBcIiArIChpc0FuKGV4dGVybmFsVmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSk7XG4gICAgcmVzdWx0LnR5cGVOYW1lID0gdHlwZU5hbWU7XG4gICAgcmVzdWx0LnR5cGVOYW1lcyA9IHR5cGVOYW1lcztcbiAgICByZXN1bHQudHlwZUNoZWNrID0gdHlwZUNoZWNrO1xuICAgIHJlc3VsdC50eXBlQ2hlY2tzID0gdHlwZUNoZWNrcztcbiAgICByZXN1bHQucmVhZEVycm9yID0gcmVhZEVycm9yO1xuICAgIHJlc3VsdC53cml0ZUVycm9yID0gd3JpdGVFcnJvcjtcbiAgICB2YWxpZGF0ZSh0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucyk7XG4gICAgaWYgKCFvcHRpb25zLmRlZmVyRXZhbHVhdGlvbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0LnBlZWsoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4ID0gZXJyb3I7XG4gICAgICAgIHJlc3VsdC5kaXNwb3NlKCk7XG4gICAgICAgIHRocm93IGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zID0ge307XG4gIGtvLmV4dGVuZGVycy5jb252ZXJ0ID0gZnVuY3Rpb24odGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgdmFyIGVycm9yLCBleCwgcmVhZEVycm9yLCByZXN1bHQsIHdyaXRlRXJyb3I7XG4gICAgaWYgKG9wdGlvbnMgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hlY2tlciwgZXh0VHlwZU5hbWUsIGV4dFR5cGVPcHRpb25zLCBpLCBpbnRUeXBlTmFtZSwgaW50VHlwZU9wdGlvbnMsIGxlbiwgbm9ybWFsLCByZWYsIHJlZjEsIHJlZjIsIHJlZjMsIHJlZjQsIHJlZjUsIHJlZjYsIHJlZjc7XG4gICAgICBpZiAoaXNBbi5TdHJpbmcob3B0aW9ucykgfHwgaXNBbi5BcnJheShvcHRpb25zKSkge1xuICAgICAgICBvcHRpb25zID0ge1xuICAgICAgICAgIHR5cGU6IG9wdGlvbnNcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucyA9PT0gdHJ1ZSkge1xuICAgICAgICBvcHRpb25zID0ge307XG4gICAgICB9XG4gICAgICBvcHRpb25zID0gZXh0ZW5kKHt9LCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIG5vcm1hbCA9IHtcbiAgICAgICAgY2hlY2tTZWxmOiAocmVmID0gb3B0aW9ucy5jaGVjaykgIT0gbnVsbCA/IHJlZiA6IGZuVHJ1ZSxcbiAgICAgICAgcmVhZDogb3B0aW9ucy5yZWFkLFxuICAgICAgICB3cml0ZTogb3B0aW9ucy53cml0ZSxcbiAgICAgICAgY2hlY2tzOiB7fSxcbiAgICAgICAgY2hlY2tlcnM6IFtdLFxuICAgICAgICBpc1R5cGVkOiBpc1R5cGVkKHRhcmdldCksXG4gICAgICAgIGlnbm9yZURlZmF1bHRDb252ZXJ0ZXJzOiBvcHRpb25zLmlnbm9yZURlZmF1bHRDb252ZXJ0ZXJzLFxuICAgICAgICBwdXJlOiBvcHRpb25zLnB1cmUsXG4gICAgICAgIGRlZmVyRXZhbHVhdGlvbjogb3B0aW9ucy5kZWZlckV2YWx1YXRpb24sXG4gICAgICAgIHR5cGVzOiB0eXBlTmFtZVRvRGlzdGluY3RBcnJheShvcHRpb25zLnR5cGUpXG4gICAgICB9O1xuICAgICAgbm9ybWFsaXplRXhSZWFkKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBub3JtYWxpemVFeFdyaXRlKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBub3JtYWxpemVWYWxpZGF0aW9uKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBmb3IgKGV4dFR5cGVOYW1lIGluIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwob3B0aW9ucywgZXh0VHlwZU5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXTtcbiAgICAgICAgaWYgKCFpc1ZhbGlkVHlwZU5hbWUoZXh0VHlwZU5hbWUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSAocmVmMSA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmMSA6IHt9O1xuICAgICAgICBub3JtYWxbZXh0VHlwZU5hbWVdID0ge1xuICAgICAgICAgIGNoZWNrU2VsZjogZXh0VHlwZU9wdGlvbnMuY2hlY2ssXG4gICAgICAgICAgcmVhZDogZXh0VHlwZU9wdGlvbnMucmVhZCxcbiAgICAgICAgICB3cml0ZTogZXh0VHlwZU9wdGlvbnMud3JpdGUsXG4gICAgICAgICAgdHlwZXM6IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KGV4dFR5cGVPcHRpb25zLnR5cGUpXG4gICAgICAgIH07XG4gICAgICAgIGZvciAoaW50VHlwZU5hbWUgaW4gZXh0VHlwZU9wdGlvbnMpIHtcbiAgICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChleHRUeXBlT3B0aW9ucywgaW50VHlwZU5hbWUpKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAoIWlzVmFsaWRUeXBlTmFtZShpbnRUeXBlTmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbnRUeXBlT3B0aW9ucyA9IChyZWYyID0gKHJlZjMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZjNbaW50VHlwZU5hbWVdIDogdm9pZCAwKSAhPSBudWxsID8gcmVmMiA6IHt9O1xuICAgICAgICAgIG5vcm1hbFtleHRUeXBlTmFtZV1baW50VHlwZU5hbWVdID0ge1xuICAgICAgICAgICAgcmVhZDogaW50VHlwZU9wdGlvbnMucmVhZCxcbiAgICAgICAgICAgIHdyaXRlOiBpbnRUeXBlT3B0aW9ucy53cml0ZVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG5vcm1hbC50eXBlID0gdHlwZU5hbWVUb1N0cmluZyhub3JtYWwudHlwZXMpO1xuICAgICAgcmVmNCA9IG5vcm1hbC50eXBlcztcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZjQubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZXh0VHlwZU5hbWUgPSByZWY0W2ldO1xuICAgICAgICBjaGVja2VyID0gKHJlZjUgPSAocmVmNiA9IChyZWY3ID0gbm9ybWFsW2V4dFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZjcuY2hlY2tTZWxmIDogdm9pZCAwKSAhPSBudWxsID8gcmVmNiA6IGlzQW4oZXh0VHlwZU5hbWUsIHtcbiAgICAgICAgICByZXR1cm5DaGVja2VyOiB0cnVlXG4gICAgICAgIH0pKSAhPSBudWxsID8gcmVmNSA6IGZuVHJ1ZTtcbiAgICAgICAgbm9ybWFsLmNoZWNrc1tleHRUeXBlTmFtZV0gPSAoZnVuY3Rpb24oY2hlY2tlcikge1xuICAgICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5vcm1hbC5jaGVja1NlbGYodmFsdWUpICYmIGNoZWNrZXIodmFsdWUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0pKGNoZWNrZXIpO1xuICAgICAgICBub3JtYWwuY2hlY2tlcnMucHVzaChub3JtYWwuY2hlY2tzW2V4dFR5cGVOYW1lXSk7XG4gICAgICB9XG4gICAgICBub3JtYWwuY2hlY2sgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbm9ybWFsLmNoZWNrU2VsZih2YWx1ZSkgJiYgKChub3JtYWwuY2hlY2tlcnMubGVuZ3RoID09PSAwKSB8fCBub3JtYWwuY2hlY2tlcnMuc29tZShmdW5jdGlvbihjaGVja2VyKSB7XG4gICAgICAgICAgcmV0dXJuIGNoZWNrZXIodmFsdWUpO1xuICAgICAgICB9KSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIG9wdGlvbnMgPSBub3JtYWw7XG4gICAgfSkoKTtcbiAgICByZWFkRXJyb3IgPSBrby5vYnNlcnZhYmxlKCk7XG4gICAgd3JpdGVFcnJvciA9IGtvLm9ic2VydmFibGUoKTtcbiAgICByZXN1bHQgPSBrby5jb21wdXRlZCh7XG4gICAgICBwdXJlOiBvcHRpb25zLnB1cmUsXG4gICAgICBkZWZlckV2YWx1YXRpb246IHRydWUsXG4gICAgICByZWFkOiB3cmFwUmVhZChvcHRpb25zLCB0YXJnZXQsIHJlYWRFcnJvciwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBiYXNlMSwgZXh0VHlwZU5hbWUsIGV4dFR5cGVOYW1lcywgZXh0VHlwZU9wdGlvbnMsIGV4dGVybmFsVmFsdWUsIGksIGludFR5cGVOYW1lLCBpbnRUeXBlTmFtZXMsIGludFR5cGVPcHRpb25zLCBpbnRlcm5hbFZhbHVlLCBqLCBrLCBsZW4sIGxlbjEsIGxlbjIsIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgdHJ5UmVhZDtcbiAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IHRhcmdldCgpO1xuICAgICAgICBleHRlcm5hbFZhbHVlID0gdm9pZCAwO1xuICAgICAgICB0cnlSZWFkID0gZnVuY3Rpb24ocmVhZCwgcmVhZE9wdGlvbnMpIHtcbiAgICAgICAgICB2YXIgZXJyb3IsIGV4O1xuICAgICAgICAgIGlmIChyZWFkICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGV4dGVybmFsVmFsdWUgPSByZWFkKGludGVybmFsVmFsdWUsIHJlYWRPcHRpb25zKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGV4ID0gZXJyb3I7XG4gICAgICAgICAgICAgIGlmICghKGV4IGluc3RhbmNlb2YgVHlwZUVycm9yKSkge1xuICAgICAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXggPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5jaGVjayhleHRlcm5hbFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgZXh0VHlwZU5hbWVzID0gb3B0aW9ucy50eXBlcztcbiAgICAgICAgaWYgKGV4dFR5cGVOYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBleHRUeXBlTmFtZXMgPSBbaXNBbihpbnRlcm5hbFZhbHVlKV07XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gZXh0VHlwZU5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgZXh0VHlwZU5hbWUgPSBleHRUeXBlTmFtZXNbaV07XG4gICAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSAocmVmID0gb3B0aW9uc1tleHRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYgOiB7fTtcbiAgICAgICAgICBpbnRUeXBlTmFtZXMgPSAocmVmMSA9IGV4dFR5cGVPcHRpb25zLnR5cGVzKSAhPSBudWxsID8gcmVmMSA6IFtdO1xuICAgICAgICAgIGlmIChpbnRUeXBlTmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pc1R5cGVkKSB7XG4gICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IHRhcmdldC50eXBlTmFtZXM7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBbaXNBbihpbnRlcm5hbFZhbHVlKV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBpbnRUeXBlTmFtZXMubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgICAgICBpbnRUeXBlTmFtZSA9IGludFR5cGVOYW1lc1tqXTtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmlzVHlwZWQgJiYgISh0eXBlb2YgKGJhc2UxID0gdGFyZ2V0LnR5cGVDaGVja3MpW2ludFR5cGVOYW1lXSA9PT0gXCJmdW5jdGlvblwiID8gYmFzZTFbaW50VHlwZU5hbWVdKGludGVybmFsVmFsdWUpIDogdm9pZCAwKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGludFR5cGVPcHRpb25zID0gKHJlZjIgPSBleHRUeXBlT3B0aW9uc1tpbnRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYyIDoge307XG4gICAgICAgICAgICBpZiAoaW50VHlwZU9wdGlvbnMucmVhZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmICh0cnlSZWFkKGludFR5cGVPcHRpb25zLnJlYWQsIGludFR5cGVPcHRpb25zLnJlYWRPcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGludFR5cGVOYW1lID09PSBleHRUeXBlTmFtZSkge1xuICAgICAgICAgICAgICBpZiAoKGV4dFR5cGVPcHRpb25zLnJlYWQgPT0gbnVsbCkgJiYgKG9wdGlvbnMucmVhZCA9PSBudWxsKSAmJiB0cnlSZWFkKGZuSWRlbnRpdHkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnMpIHtcbiAgICAgICAgICAgICAgaWYgKHRyeVJlYWQoa28udHlwZWQuZ2V0Q29udmVydGVyKGludFR5cGVOYW1lLCBleHRUeXBlTmFtZSksIGludFR5cGVPcHRpb25zLnJlYWRPcHRpb25zKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAoayA9IDAsIGxlbjIgPSBleHRUeXBlTmFtZXMubGVuZ3RoOyBrIDwgbGVuMjsgaysrKSB7XG4gICAgICAgICAgZXh0VHlwZU5hbWUgPSBleHRUeXBlTmFtZXNba107XG4gICAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSAocmVmMyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmMyA6IHt9O1xuICAgICAgICAgIGlmICh0cnlSZWFkKGV4dFR5cGVPcHRpb25zLnJlYWQsIGV4dFR5cGVPcHRpb25zLnJlYWRPcHRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0cnlSZWFkKG9wdGlvbnMucmVhZCwgb3B0aW9ucy5yZWFkT3B0aW9ucykpIHtcbiAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy50eXBlICE9IG51bGwpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBpbnRlcm5hbCB0eXBlIFwiICsgKGlzQW4oaW50ZXJuYWxWYWx1ZSkpICsgXCIgdG8gZXh0ZXJuYWwgdHlwZSBcIiArIG9wdGlvbnMudHlwZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gaW50ZXJuYWwgdHlwZSBcIiArIChpc0FuKGludGVybmFsVmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pLFxuICAgICAgd3JpdGU6IHdyYXBXcml0ZShvcHRpb25zLCB0YXJnZXQsIHdyaXRlRXJyb3IsIGZ1bmN0aW9uKGV4dGVybmFsVmFsdWUpIHtcbiAgICAgICAgdmFyIGV4dFR5cGVOYW1lLCBleHRUeXBlTmFtZXMsIGV4dFR5cGVPcHRpb25zLCBpLCBpbnRUeXBlTmFtZSwgaW50VHlwZU5hbWVzLCBpbnRUeXBlT3B0aW9ucywgaiwgaywgbGVuLCBsZW4xLCBsZW4yLCByZWYsIHJlZjEsIHJlZjIsIHJlZjMsIHRyeVdyaXRlO1xuICAgICAgICB0cnlXcml0ZSA9IGZ1bmN0aW9uKHdyaXRlLCB3cml0ZU9wdGlvbnMpIHtcbiAgICAgICAgICB2YXIgZXJyb3IsIGV4LCBpbnRlcm5hbFZhbHVlO1xuICAgICAgICAgIGlmICh3cml0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpbnRlcm5hbFZhbHVlID0gd3JpdGUoZXh0ZXJuYWxWYWx1ZSwgd3JpdGVPcHRpb25zKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIGV4ID0gZXJyb3I7XG4gICAgICAgICAgICAgIGlmICghKGV4IGluc3RhbmNlb2YgVHlwZUVycm9yKSkge1xuICAgICAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXggPT0gbnVsbCkge1xuICAgICAgICAgICAgICB0YXJnZXQoaW50ZXJuYWxWYWx1ZSk7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIGlmICgob3B0aW9ucy5jaGVja1NlbGYgPT0gbnVsbCkgfHwgb3B0aW9ucy5jaGVja1NlbGYoZXh0ZXJuYWxWYWx1ZSkpIHtcbiAgICAgICAgICBleHRUeXBlTmFtZXMgPSBvcHRpb25zLnR5cGVzO1xuICAgICAgICAgIGlmIChleHRUeXBlTmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBleHRUeXBlTmFtZXMgPSBbaXNBbihleHRlcm5hbFZhbHVlKV07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGV4dFR5cGVOYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgZXh0VHlwZU5hbWUgPSBleHRUeXBlTmFtZXNbaV07XG4gICAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IChyZWYgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZiA6IHt9O1xuICAgICAgICAgICAgaWYgKCgoZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmICE9IG51bGwpICYmICFleHRUeXBlT3B0aW9ucy5jaGVja1NlbGYoZXh0ZXJuYWxWYWx1ZSkpIHx8ICgoZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmID09IG51bGwpICYmICFpc0FuKGV4dGVybmFsVmFsdWUsIGV4dFR5cGVOYW1lKSkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSAocmVmMSA9IGV4dFR5cGVPcHRpb25zLnR5cGVzKSAhPSBudWxsID8gcmVmMSA6IFtdO1xuICAgICAgICAgICAgaWYgKGludFR5cGVOYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXNUeXBlZCkge1xuICAgICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IHRhcmdldC50eXBlTmFtZXM7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gW2lzQW4oZXh0ZXJuYWxWYWx1ZSldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gaW50VHlwZU5hbWVzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICAgICAgICBpbnRUeXBlTmFtZSA9IGludFR5cGVOYW1lc1tqXTtcbiAgICAgICAgICAgICAgaW50VHlwZU9wdGlvbnMgPSAocmVmMiA9IGV4dFR5cGVPcHRpb25zW2ludFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZjIgOiB7fTtcbiAgICAgICAgICAgICAgaWYgKGludFR5cGVPcHRpb25zLndyaXRlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpZiAodHJ5V3JpdGUoaW50VHlwZU9wdGlvbnMud3JpdGUsIGludFR5cGVPcHRpb25zLndyaXRlT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXh0VHlwZU5hbWUgPT09IGludFR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKChleHRUeXBlT3B0aW9ucy53cml0ZSA9PSBudWxsKSAmJiAob3B0aW9ucy53cml0ZSA9PSBudWxsKSAmJiAoIW9wdGlvbnMuaXNUeXBlZCB8fCB0YXJnZXQudHlwZUNoZWNrc1tleHRUeXBlTmFtZV0oZXh0ZXJuYWxWYWx1ZSkpICYmIHRyeVdyaXRlKGZuSWRlbnRpdHkpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFvcHRpb25zLmlnbm9yZURlZmF1bHRDb252ZXJ0ZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyeVdyaXRlKGtvLnR5cGVkLmdldENvbnZlcnRlcihleHRUeXBlTmFtZSwgaW50VHlwZU5hbWUpLCBpbnRUeXBlT3B0aW9ucy53cml0ZU9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoayA9IDAsIGxlbjIgPSBleHRUeXBlTmFtZXMubGVuZ3RoOyBrIDwgbGVuMjsgaysrKSB7XG4gICAgICAgICAgICBleHRUeXBlTmFtZSA9IGV4dFR5cGVOYW1lc1trXTtcbiAgICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gKHJlZjMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZjMgOiB7fTtcbiAgICAgICAgICAgIGlmICgoKGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZiAhPSBudWxsKSAmJiAhZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmKGV4dGVybmFsVmFsdWUpKSB8fCAoKGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZiA9PSBudWxsKSAmJiAhaXNBbihleHRlcm5hbFZhbHVlLCBleHRUeXBlTmFtZSkpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyeVdyaXRlKGV4dFR5cGVPcHRpb25zLndyaXRlLCBleHRUeXBlT3B0aW9ucy53cml0ZU9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRyeVdyaXRlKG9wdGlvbnMud3JpdGUsIG9wdGlvbnMud3JpdGVPcHRpb25zKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5pc1R5cGVkKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gZXh0ZXJuYWwgdHlwZSBcIiArIChpc0FuKGV4dGVybmFsVmFsdWUpKSArIFwiIHRvIGludGVybmFsIHR5cGUgXCIgKyB0YXJnZXQudHlwZU5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIGV4dGVybmFsIHR5cGUgXCIgKyAoaXNBbihleHRlcm5hbFZhbHVlKSkpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pO1xuICAgIHJlc3VsdC50eXBlTmFtZSA9IG9wdGlvbnMudHlwZTtcbiAgICByZXN1bHQudHlwZU5hbWVzID0gb3B0aW9ucy50eXBlcztcbiAgICByZXN1bHQudHlwZUNoZWNrID0gb3B0aW9ucy5jaGVjaztcbiAgICByZXN1bHQudHlwZUNoZWNrcyA9IG9wdGlvbnMuY2hlY2tzO1xuICAgIHJlc3VsdC5yZWFkRXJyb3IgPSByZWFkRXJyb3I7XG4gICAgcmVzdWx0LndyaXRlRXJyb3IgPSB3cml0ZUVycm9yO1xuICAgIHZhbGlkYXRlKHRhcmdldCwgcmVzdWx0LCBvcHRpb25zKTtcbiAgICBpZiAoIW9wdGlvbnMuZGVmZXJFdmFsdWF0aW9uKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQucGVlaygpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXggPSBlcnJvcjtcbiAgICAgICAgcmVzdWx0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhyb3cgZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMgPSB7fTtcbiAgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBjb252ZXJ0ZXJzO1xuICAgIGtvLnR5cGVkLl9jb252ZXJ0ZXJzID0gY29udmVydGVycyA9IHt9O1xuICAgIGtvLnR5cGVkLmFkZENvbnZlcnRlciA9IGZ1bmN0aW9uKGZyb21UeXBlTmFtZSwgdG9UeXBlTmFtZSwgY29udmVydGVyLCBkZWZhdWx0T3B0aW9ucywgZGVmYXVsdE9wdGlvbikge1xuICAgICAgdmFyIHdyYXBwZXI7XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUuYXNzZXJ0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmFzc2VydChpc1ZhbGlkVHlwZU5hbWUoZnJvbVR5cGVOYW1lKSwgXCJJbnZhbGlkIHR5cGVOYW1lIFwiICsgZnJvbVR5cGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLmFzc2VydCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoaXNWYWxpZFR5cGVOYW1lKHRvVHlwZU5hbWUpLCBcIkludmFsaWQgdHlwZU5hbWUgXCIgKyBmcm9tVHlwZU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZGVmYXVsdE9wdGlvbnMgIT0gbnVsbCkge1xuICAgICAgICBpZiAoZGVmYXVsdE9wdGlvbiAhPSBudWxsKSB7XG4gICAgICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyICYmICFpc0FuLk9iamVjdChvcHRpb25zKSkge1xuICAgICAgICAgICAgICBvID0ge307XG4gICAgICAgICAgICAgIG9bZGVmYXVsdE9wdGlvbl0gPSBvcHRpb25zO1xuICAgICAgICAgICAgICBvcHRpb25zID0gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0ZXIodmFsdWUsIGtvLnV0aWxzLmV4dGVuZChrby51dGlscy5leHRlbmQoe30sIHdyYXBwZXIub3B0aW9ucyksIG9wdGlvbnMpKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdyYXBwZXIgPSBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRlcih2YWx1ZSwga28udXRpbHMuZXh0ZW5kKGtvLnV0aWxzLmV4dGVuZCh7fSwgd3JhcHBlci5vcHRpb25zKSwgb3B0aW9ucykpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyYXBwZXIgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiBjb252ZXJ0ZXIodmFsdWUpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgd3JhcHBlci5vcHRpb25zID0gZGVmYXVsdE9wdGlvbnM7XG4gICAgICBpZiAoY29udmVydGVyc1tmcm9tVHlwZU5hbWVdID09IG51bGwpIHtcbiAgICAgICAgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdID0ge307XG4gICAgICB9XG4gICAgICBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV1bdG9UeXBlTmFtZV0gPSB3cmFwcGVyO1xuICAgICAgcmV0dXJuIGtvLnR5cGVkO1xuICAgIH07XG4gICAga28udHlwZWQuZ2V0Q29udmVydGVyID0gZnVuY3Rpb24oZnJvbVR5cGVOYW1lLCB0b1R5cGVOYW1lKSB7XG4gICAgICB2YXIgcmVmO1xuICAgICAgcmV0dXJuIChyZWYgPSBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0pICE9IG51bGwgPyByZWZbdG9UeXBlTmFtZV0gOiB2b2lkIDA7XG4gICAgfTtcbiAgICBrby50eXBlZC5yZW1vdmVDb252ZXJ0ZXIgPSBmdW5jdGlvbihmcm9tVHlwZU5hbWUsIHRvVHlwZU5hbWUpIHtcbiAgICAgIHZhciByZWYsIHJlZjE7XG4gICAgICBpZiAoKChyZWYgPSBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0pICE9IG51bGwgPyByZWZbdG9UeXBlTmFtZV0gOiB2b2lkIDApICE9IG51bGwpIHtcbiAgICAgICAgaWYgKChyZWYxID0gY29udmVydGVyc1tmcm9tVHlwZU5hbWVdKSAhPSBudWxsKSB7XG4gICAgICAgICAgZGVsZXRlIHJlZjFbdG9UeXBlTmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBrby50eXBlZDtcbiAgICB9O1xuICB9KSgpO1xuICAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGRlY2ltYWxBZGp1c3Q7XG4gICAgZGVjaW1hbEFkanVzdCA9IGZ1bmN0aW9uKHR5cGUsIHZhbHVlLCBleHApIHtcbiAgICAgIGlmICgoZXhwID09IG51bGwpIHx8ICtleHAgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHR5cGUodmFsdWUpO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSArdmFsdWU7XG4gICAgICBleHAgPSArZXhwO1xuICAgICAgaWYgKGlzTmFOKHZhbHVlKSB8fCAhKHR5cGVvZiBleHAgPT09ICdudW1iZXInICYmIGV4cCAlIDEgPT09IDApKSB7XG4gICAgICAgIHJldHVybiBOYU47XG4gICAgICB9XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJ2UnKTtcbiAgICAgIHZhbHVlID0gdHlwZSgrKHZhbHVlWzBdICsgJ2UnICsgKHZhbHVlWzFdID8gK3ZhbHVlWzFdIC0gZXhwIDogLWV4cCkpKTtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnZScpO1xuICAgICAgcmV0dXJuICsodmFsdWVbMF0gKyAnZScgKyAodmFsdWVbMV0gPyArdmFsdWVbMV0gKyBleHAgOiBleHApKTtcbiAgICB9O1xuXG4gICAgLyogIXByYWdtYSBjb3ZlcmFnZS1za2lwLW5leHQgKi9cbiAgICBpZiAoTWF0aC5yb3VuZDEwID09IG51bGwpIHtcbiAgICAgIE1hdGgucm91bmQxMCA9IGZ1bmN0aW9uKHZhbHVlLCBleHApIHtcbiAgICAgICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoTWF0aC5yb3VuZCwgdmFsdWUsIGV4cCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qICFwcmFnbWEgY292ZXJhZ2Utc2tpcC1uZXh0ICovXG4gICAgaWYgKE1hdGguZmxvb3IxMCA9PSBudWxsKSB7XG4gICAgICBNYXRoLmZsb29yMTAgPSBmdW5jdGlvbih2YWx1ZSwgZXhwKSB7XG4gICAgICAgIHJldHVybiBkZWNpbWFsQWRqdXN0KE1hdGguZmxvb3IsIHZhbHVlLCBleHApO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKiAhcHJhZ21hIGNvdmVyYWdlLXNraXAtbmV4dCAqL1xuICAgIGlmIChNYXRoLmNlaWwxMCA9PSBudWxsKSB7XG4gICAgICBNYXRoLmNlaWwxMCA9IGZ1bmN0aW9uKHZhbHVlLCBleHApIHtcbiAgICAgICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoTWF0aC5jZWlsLCB2YWx1ZSwgZXhwKTtcbiAgICAgIH07XG4gICAgfVxuICB9KSgpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ0Jvb2xlYW4nLCAnTnVtYmVyLkludGVnZXInLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMudHJ1dGh5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5mYWxzZXk7XG4gICAgfVxuICB9LCB7XG4gICAgdHJ1dGh5OiAxLFxuICAgIGZhbHNleTogMFxuICB9LCAndHJ1dGh5Jyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignQm9vbGVhbicsICdOdW1iZXInLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMudHJ1dGh5O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5mYWxzZXk7XG4gICAgfVxuICB9LCB7XG4gICAgdHJ1dGh5OiAxLFxuICAgIGZhbHNleTogMFxuICB9LCAndHJ1dGh5Jyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignQm9vbGVhbicsICdTdHJpbmcnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhbHVlID0gdmFsdWUgPyBvcHRpb25zLnRydXRoeSA6IG9wdGlvbnMuZmFsc2V5O1xuICAgIGlmIChvcHRpb25zLnVwcGVyQ2FzZSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sIHtcbiAgICB1cHBlckNhc2U6IGZhbHNlLFxuICAgIHRydXRoeTogJ3RydWUnLFxuICAgIGZhbHNleTogJ2ZhbHNlJ1xuICB9LCAndXBwZXJDYXNlJyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignRGF0ZScsICdNb21lbnQnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiAodHlwZW9mIG1vbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb21lbnQgIT09IG51bGwgPyBtb21lbnQgOiByZXF1aXJlKCdtb21lbnQnKSkodmFsdWUpO1xuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdEYXRlJywgJ1N0cmluZycsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFyIG1ldGhvZDtcbiAgICBpZiAoaXNOYU4odmFsdWUudmFsdWVPZigpKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBtZXRob2QgPSBvcHRpb25zLmZvcm1hdHNbb3B0aW9ucy5mb3JtYXRdO1xuICAgIHJldHVybiB2YWx1ZVttZXRob2RdLmFwcGx5KHZhbHVlLCBvcHRpb25zLnBhcmFtcyk7XG4gIH0sIHtcbiAgICBmb3JtYXRzOiB7XG4gICAgICBkYXRlOiAndG9EYXRlU3RyaW5nJyxcbiAgICAgIGlzbzogJ3RvSVNPU3RyaW5nJyxcbiAgICAgIGpzb246ICd0b0pTT04nLFxuICAgICAgbG9jYWxlRGF0ZTogJ3RvTG9jYWxlRGF0ZVN0cmluZycsXG4gICAgICBsb2NhbGVUaW1lOiAndG9Mb2NhbGVUaW1lU3RyaW5nJyxcbiAgICAgIGxvY2FsZTogJ3RvTG9jYWxlU3RyaW5nJyxcbiAgICAgIHRpbWU6ICd0b1RpbWVTdHJpbmcnLFxuICAgICAgdXRjOiAndG9VVENTdHJpbmcnLFxuICAgICAgXCJkZWZhdWx0XCI6ICd0b1N0cmluZydcbiAgICB9LFxuICAgIGZvcm1hdDogJ2RlZmF1bHQnLFxuICAgIHBhcmFtczogW11cbiAgfSwgJ2Zvcm1hdCcpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ0RhdGUnLCAnVW5kZWZpbmVkJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWlzTmFOKHZhbHVlLnZhbHVlT2YoKSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gdmFsaWQgRGF0ZSB0byBVbmRlZmluZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTW9tZW50JywgJ0RhdGUnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiB2YWx1ZS50b0RhdGUoKTtcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTW9tZW50JywgJ1N0cmluZycsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKCF2YWx1ZS5pc1ZhbGlkKCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlLmxvY2FsZShvcHRpb25zLmxvY2FsZSkuZm9ybWF0KG9wdGlvbnMuZm9ybWF0KTtcbiAgfSwge1xuICAgIGxvY2FsZTogJ2VuJyxcbiAgICBmb3JtYXQ6ICdMJ1xuICB9LCAnZm9ybWF0Jyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTW9tZW50JywgJ1VuZGVmaW5lZCcsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKHZhbHVlLmlzVmFsaWQoKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSB2YWxpZCBNb21lbnQgdG8gVW5kZWZpbmVkJyk7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ051bWJlcicsICdCb29sZWFuJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAoKG9wdGlvbnMuZmFsc2V5ICE9IG51bGwpICYmIHZhbHVlID09PSBvcHRpb25zLmZhbHNleSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoKG9wdGlvbnMudHJ1dGh5ICE9IG51bGwpICYmIHZhbHVlID09PSBvcHRpb25zLnRydXRoeSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmZhbHNleSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnRydXRoeSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IGZyb20gXCIgKyB2YWx1ZSArIFwiIHRvIEJvb2xlYW5cIik7XG4gIH0sIHtcbiAgICB0cnV0aHk6IHZvaWQgMCxcbiAgICBmYWxzZXk6IDBcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTnVtYmVyJywgJ051bWJlci5JbnRlZ2VyJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgbW9kZTtcbiAgICBpZiAob3B0aW9ucy5tb2RlID09IG51bGwpIHtcbiAgICAgIGlmICghaXNBbi5OdW1iZXIuSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgZnJvbSBOdW1iZXIgdG8gTnVtYmVyLkludGVnZXIuIE51bWJlciBpcyBub3QgYW4gaW50ZWdlcicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMubW9kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIG1vZGUgPSBNYXRoW29wdGlvbnMubW9kZV07XG4gICAgfSBlbHNlIHtcbiAgICAgIG1vZGUgPSBvcHRpb25zLm1vZGU7XG4gICAgfVxuICAgIHJldHVybiBtb2RlKHZhbHVlKTtcbiAgfSwge1xuICAgIG1vZGU6IHZvaWQgMFxuICB9LCAnbW9kZScpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ051bWJlcicsICdTdHJpbmcnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLmRlY2ltYWxzICE9IG51bGwpIHtcbiAgICAgIHZhbHVlID0gTWF0aC5yb3VuZDEwKHZhbHVlLCAtb3B0aW9ucy5kZWNpbWFscyk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvRml4ZWQob3B0aW9ucy5kZWNpbWFscyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LCB7XG4gICAgZGVjaW1hbHM6IHZvaWQgMFxuICB9LCAnZGVjaW1hbHMnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdOdW1iZXIuSW50ZWdlcicsICdCb29sZWFuJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAoKG9wdGlvbnMuZmFsc2V5ICE9IG51bGwpICYmIHZhbHVlID09PSBvcHRpb25zLmZhbHNleSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoKG9wdGlvbnMudHJ1dGh5ICE9IG51bGwpICYmIHZhbHVlID09PSBvcHRpb25zLnRydXRoeSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmZhbHNleSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLnRydXRoeSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IGZyb20gXCIgKyB2YWx1ZSArIFwiIHRvIEJvb2xlYW5cIik7XG4gIH0sIHtcbiAgICB0cnV0aHk6IHZvaWQgMCxcbiAgICBmYWxzZXk6IDBcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTnVtYmVyLkludGVnZXInLCAnTnVtYmVyJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ051bWJlci5JbnRlZ2VyJywgJ1N0cmluZycsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZyhvcHRpb25zLmJhc2UpO1xuICAgIGlmIChvcHRpb25zLnVwcGVyQ2FzZSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b1VwcGVyQ2FzZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sIHtcbiAgICBiYXNlOiAxMCxcbiAgICB1cHBlckNhc2U6IGZhbHNlXG4gIH0sICdiYXNlJyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignU3RyaW5nJywgJ0Jvb2xlYW4nLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhciBmYWxzZXksIGksIGosIGxlbiwgbGVuMSwgcmVmLCByZWYxLCB0cnV0aHk7XG4gICAgaWYgKG9wdGlvbnMudHJpbSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmlnbm9yZUNhc2UpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc3RyaWN0KSB7XG4gICAgICBpZiAodmFsdWUgPT09IG9wdGlvbnMudHJ1dGh5WzBdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gb3B0aW9ucy5mYWxzZXlbMF0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZWYgPSBvcHRpb25zLnRydXRoeTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB0cnV0aHkgPSByZWZbaV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1dGh5KSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlZjEgPSBvcHRpb25zLmZhbHNleTtcbiAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSByZWYxLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICBmYWxzZXkgPSByZWYxW2pdO1xuICAgICAgICBpZiAodmFsdWUgPT09IGZhbHNleSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZnJvbSBcIiArIHZhbHVlICsgXCIgdG8gQm9vbGVhblwiKTtcbiAgfSwge1xuICAgIGlnbm9yZUNhc2U6IHRydWUsXG4gICAgc3RyaWN0OiBmYWxzZSxcbiAgICB0cnV0aHk6IFsndHJ1ZScsICd0JywgJzEnLCAnLTEnLCAneWVzJywgJ3knXSxcbiAgICBmYWxzZXk6IFsnZmFsc2UnLCAnZicsICcwJywgJ25vJywgJ24nXSxcbiAgICB0cmltOiBmYWxzZVxuICB9LCAnc3RyaWN0Jyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignU3RyaW5nJywgJ0RhdGUnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhciBkYXRlLCBtYXRjaCwgbnVtLCB0aW1lLCB0ejtcbiAgICBpZiAob3B0aW9ucy50cmltKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuc3RyaWN0KSB7XG4gICAgICBtYXRjaCA9IHZhbHVlLm1hdGNoKG9wdGlvbnMuZm9ybWF0KTtcbiAgICAgIGlmIChtYXRjaCA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBTdHJpbmcgdG8gRGF0ZScpO1xuICAgICAgfVxuICAgICAgbnVtID0gZnVuY3Rpb24odmFsdWUsIGRlZikge1xuICAgICAgICBpZiAoKHZhbHVlICE9IG51bGwpICYmIHZhbHVlICE9PSAnJykge1xuICAgICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gZGVmO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdHogPSB2b2lkIDA7XG4gICAgICBpZiAoKG1hdGNoWzddICE9IG51bGwpICYmIG1hdGNoWzddICE9PSAnJykge1xuICAgICAgICB0eiA9IChudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6SG91cnNdKSAqIDYwICsgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC50ek1pbnV0ZXNdKSkgKiA2MCAqIDEwMDA7XG4gICAgICAgIGlmIChtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QudHpTaWduXSA9PT0gJy0nKSB7XG4gICAgICAgICAgdHogKj0gLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnV0YyB8fCAodHogIT0gbnVsbCkpIHtcbiAgICAgICAgdGltZSA9IERhdGUuVVRDKG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QueWVhcl0sIDApLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1vbnRoXSwgMSkgLSAxLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LmRheV0sIDEpLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LmhvdXJzXSwgMCksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubWludXRlc10sIDApLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnNlY29uZHNdLCAwKSk7XG4gICAgICAgIGlmICh0eiAhPSBudWxsKSB7XG4gICAgICAgICAgdGltZSArPSB0ejtcbiAgICAgICAgfVxuICAgICAgICBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYXRlID0gbmV3IERhdGUobnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC55ZWFyXSwgMCksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubW9udGhdLCAxKSAtIDEsIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuZGF5XSwgMSksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuaG91cnNdLCAwKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5taW51dGVzXSwgMCksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3Quc2Vjb25kc10sIDApKTtcbiAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKGlzTmFOKGRhdGUudmFsdWVPZigpKSkge1xuICAgICAgdGhyb3cgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIFN0cmluZyB0byBEYXRlJyk7XG4gICAgfVxuICAgIHJldHVybiBkYXRlO1xuICB9LCB7XG4gICAgZm9ybWF0OiAvXihbMC05XXs0fSktKFswLTldezJ9KS0oWzAtOV17Mn0pKD86KD86VHxcXHMpKFswLTldezJ9KTooWzAtOV17Mn0pKD86OihbMC05XXsyfSg/Oi5bMC05XSspPykpPyg/OihcXCt8XFwtKShbMC05XXsyfSk6KFswLTldezJ9KSk/KT8kLyxcbiAgICBmb3JtYXREaWN0OiB7XG4gICAgICB5ZWFyOiAxLFxuICAgICAgbW9udGg6IDIsXG4gICAgICBkYXk6IDMsXG4gICAgICBob3VyczogNCxcbiAgICAgIG1pbnV0ZXM6IDUsXG4gICAgICBzZWNvbmRzOiA2LFxuICAgICAgdHpTaWduOiA3LFxuICAgICAgdHpIb3VyczogOCxcbiAgICAgIHR6TWludXRlczogOVxuICAgIH0sXG4gICAgdXRjOiBmYWxzZSxcbiAgICBzdHJpY3Q6IHRydWUsXG4gICAgdHJpbTogZmFsc2VcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignU3RyaW5nJywgJ01vbWVudCcsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICBpZiAob3B0aW9ucy50cmltKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgcmVzdWx0ID0gKHR5cGVvZiBtb21lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9tZW50ICE9PSBudWxsID8gbW9tZW50IDogcmVxdWlyZSgnbW9tZW50JykpKHZhbHVlLCBvcHRpb25zLmZvcm1hdCwgb3B0aW9ucy5sYW5ndWFnZSwgb3B0aW9ucy5zdHJpY3QpO1xuICAgIGlmICghcmVzdWx0LmlzVmFsaWQoKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBTdHJpbmcgdG8gTW9tZW50Jyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH0sIHtcbiAgICBzdHJpY3Q6IGZhbHNlLFxuICAgIGxhbmd1YWdlOiAnZW4nLFxuICAgIGZvcm1hdDogJ0wnLFxuICAgIHRyaW06IGZhbHNlXG4gIH0sICdmb3JtYXQnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdTdHJpbmcnLCAnTnVtYmVyLkludGVnZXInLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhciBjaGFycywgZXJyb3IsIGV4LCByZWY7XG4gICAgaWYgKG9wdGlvbnMudHJpbSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmJhc2UgPT09IDEwICYmICFvcHRpb25zLnN0cmljdCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGtvLnR5cGVkLmdldENvbnZlcnRlcignU3RyaW5nJywgJ051bWJlcicpKHZhbHVlLCAwKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4ID0gZXJyb3I7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIFwiICsgdmFsdWUgKyBcIiB0byBOdW1iZXIuSW50ZWdlclwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2hhcnMgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JztcbiAgICBpZiAoIVJlZ0V4cChcIl4oXFxcXC18XFxcXCspP1tcIiArIChjaGFycy5zbGljZSgwLCAocmVmID0gb3B0aW9ucy5iYXNlKSAhPSBudWxsID8gcmVmIDogMTApKSArIFwiXSskXCIsICFvcHRpb25zLnN0cmljdCA/ICdpJyA6IHZvaWQgMCkudGVzdCh2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIFwiICsgdmFsdWUgKyBcIiB0byBOdW1iZXIuSW50ZWdlclwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCBvcHRpb25zLmJhc2UpO1xuICB9LCB7XG4gICAgYmFzZTogMTAsXG4gICAgc3RyaWN0OiBmYWxzZSxcbiAgICB0cmltOiBmYWxzZVxuICB9LCAnYmFzZScpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1N0cmluZycsICdOdW1iZXInLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnRyaW0pIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICBpZiAoIS9eKFxcK3xcXC0pP1swLTldKyhcXC4/KVswLTldKiQvLnRlc3QodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBcIiArIHZhbHVlICsgXCIgdG8gTnVtYmVyXCIpO1xuICAgIH1cbiAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUsIG9wdGlvbnMuYmFzZSk7XG4gICAgaWYgKG9wdGlvbnMuZGVjaW1hbHMgIT0gbnVsbCkge1xuICAgICAgdmFsdWUgPSBNYXRoLnJvdW5kMTAodmFsdWUsIC1vcHRpb25zLmRlY2ltYWxzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LCB7XG4gICAgZGVjaW1hbHM6IHZvaWQgMCxcbiAgICB0cmltOiBmYWxzZVxuICB9LCAnZGVjaW1hbHMnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdTdHJpbmcnLCAnVW5kZWZpbmVkJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy50cmltKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gXCIgKyB2YWx1ZSArIFwiIHRvIFVuZGVmaW5lZFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfSwge1xuICAgIHRyaW06IGZhbHNlXG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1VuZGVmaW5lZCcsICdEYXRlJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignVW5kZWZpbmVkJywgJ01vbWVudCcsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHJlcXVpcmUoJ21vbWVudCcpLmludmFsaWQoKTtcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignVW5kZWZpbmVkJywgJ1N0cmluZycsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuICcnO1xuICB9KTtcbiAgcmV0dXJuIGtvO1xufTtcblxuYXBwbHlLb3RyKGtvKTtcblxyXG5yZXR1cm4ga287XHJcbn0pKTtcclxuIiwiYXBwbHlLb3RyID0gKGtvKSAtPlxyXG4gIGtvLnR5cGVkID0ge31cclxuXHJcbiAgZm5UcnVlID0gKCkgLT4gdHJ1ZVxyXG4gIGZuRmFsc2UgPSAoKSAtPiBmYWxzZVxyXG4gIGZuSWRlbnRpdHkgPSAoeCkgLT4geFxyXG5cclxuICB0eXBlTmFtZVRvU3RyaW5nID0gKHZhbHVlKSAtPlxyXG4gICAgaWYgbm90IHZhbHVlPyBvciB2YWx1ZS5sZW5ndGggPT0gMFxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICBlbHNlIGlmIGlzQW4uU3RyaW5nLkxpdGVyYWwodmFsdWUpXHJcbiAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgZWxzZVxyXG4gICAgICByZXR1cm4gdmFsdWUuam9pbignfCcpXHJcblxyXG4gIHR5cGVOYW1lVG9BcnJheSA9ICh2YWx1ZSkgLT5cclxuICAgIHZhbHVlID0gdHlwZU5hbWVUb1N0cmluZyh2YWx1ZSlcclxuICAgIGlmIGlzQW4uU3RyaW5nLkxpdGVyYWwodmFsdWUpXHJcbiAgICAgIHJldHVybiB2YWx1ZS5zcGxpdCgnfCcpXHJcbiAgICBlbHNlXHJcbiAgICAgIHJldHVybiBbXVxyXG5cclxuICB0eXBlTmFtZVRvRGlzdGluY3RBcnJheSA9ICh2YWx1ZSkgLT5cclxuICAgIHZhbHVlID0gdHlwZU5hbWVUb0FycmF5KHZhbHVlKVxyXG5cclxuICAgIHJlc3VsdCA9IFtdXHJcbiAgICBmb3IgdHlwZU5hbWUgaW4gdmFsdWVcclxuICAgICAgaWYgcmVzdWx0LmluZGV4T2YodHlwZU5hbWUpID09IC0xXHJcbiAgICAgICAgcmVzdWx0LnB1c2godHlwZU5hbWUpXHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdFxyXG5cclxuICBpc1ZhbGlkVHlwZU5hbWUgPSAodmFsdWUpIC0+XHJcbiAgICByZXR1cm4gL15bQS1aXS8udGVzdCh2YWx1ZSlcclxuXHJcbiAgaXNUeXBlZCA9ICh2YWx1ZSkgLT5cclxuICAgIHJldHVybiBpc0FuLkZ1bmN0aW9uKHZhbHVlKSBhbmQgdmFsdWUudHlwZU5hbWU/IGFuZCB2YWx1ZS50eXBlTmFtZXM/IGFuZCB2YWx1ZS50eXBlQ2hlY2s/IGFuZCB2YWx1ZS50eXBlQ2hlY2tzP1xyXG5cclxuICBrby50eXBlZC5vcHRpb25zID0ge1xyXG4gICAgIyB2YWxpZGF0aW9uIG9wdGlvbnNcclxuICAgIHZhbGlkYXRpb246IHtcclxuICAgICAgIyB0dXJuIHZhbGlkYXRpb24gb24vb2ZmXHJcbiAgICAgIGVuYWJsZTogZmFsc2VcclxuXHJcbiAgICAgICMgdmFsaWRhdGUgb24gcmVhZFxyXG4gICAgICByZWFkOiB0cnVlXHJcblxyXG4gICAgICAjIHZhbGlkYXRlIG9uIHdyaXRlXHJcbiAgICAgIHdyaXRlOiB0cnVlXHJcblxyXG4gICAgICAjIHZhbGlkYXRlIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGVcclxuICAgICAgdGFyZ2V0OiBmYWxzZVxyXG5cclxuICAgICAgIyB2YWxpZGF0ZSB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGVcclxuICAgICAgcmVzdWx0OiB0cnVlXHJcblxyXG4gICAgICAjIHRoZSBtZXNzYWdlIHRvIHVzZSAoZGVmYXVsdHMgdG8gdGhlIG1lc3NhZ2UgZnJvbSB0aGUgdGhyb3duIGV4Y2VwdGlvbilcclxuICAgICAgbWVzc2FnZTogdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgZXhSZWFkOiB7XHJcbiAgICAgICMgQ2F0Y2ggZXhjZXB0aW9ucy4gTWF5IGFsc28gYmUgYSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGV4Y2VwdGlvbiBzaG91bGQgYmUgY2F1Z2h0XHJcbiAgICAgIGNhdGNoOiB0cnVlXHJcblxyXG4gICAgICAjIGRlZmF1bHQgY2F0Y2ggZnVuY3Rpb24gdG8gdXNlIHdoZW4gY2F0Y2ggaXMgdHJ1ZS9mYWxzZVxyXG4gICAgICBjYXRjaFRydWU6IChleCkgLT4gZXggaW5zdGFuY2VvZiBUeXBlRXJyb3JcclxuICAgICAgY2F0Y2hGYWxzZTogZm5GYWxzZVxyXG5cclxuICAgICAgIyBEbyBub3QgdGhyb3cgZXhjZXB0aW9ucyB3aGVuIHJlYWRpbmcuIFVzZSBkZWZhdWx0IHZhbHVlL2Z1bmMgaW5zdGVhZFxyXG4gICAgICB1c2VEZWZhdWx0OiBmYWxzZVxyXG5cclxuICAgICAgIyBEZWZhdWx0IHZhbHVlIHRvIHVzZSB3aGVuIGFuIGV4Y2VwdGlvbiBpcyBjYXVnaHRcclxuICAgICAgZGVmYXVsdFZhbHVlOiB1bmRlZmluZWRcclxuXHJcbiAgICAgICMgQ29tcHV0ZSBhIGRlZmF1bHQgdmFsdWUgd2hlbiBhbiBleGNlcHRpb24gaXMgY2F1Z2h0LiBPdmVycmlkZXMgZGVmYXVsdFZhbHVlXHJcbiAgICAgIGRlZmF1bHRGdW5jOiB1bmRlZmluZWRcclxuICAgIH1cclxuICAgIGV4V3JpdGU6IHtcclxuICAgICAgIyBDYXRjaCBleGNlcHRpb25zLiBNYXkgYWxzbyBiZSBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZXhjZXB0aW9uIHNob3VsZCBiZSBjYXVnaHRcclxuICAgICAgY2F0Y2g6IHRydWVcclxuXHJcbiAgICAgICMgZGVmYXVsdCBjYXRjaCBmdW5jdGlvbiB0byB1c2Ugd2hlbiBjYXRjaCBpcyB0cnVlL2ZhbHNlXHJcbiAgICAgIGNhdGNoVHJ1ZTogKGV4KSAtPiBleCBpbnN0YW5jZW9mIFR5cGVFcnJvclxyXG4gICAgICBjYXRjaEZhbHNlOiBmbkZhbHNlXHJcblxyXG4gICAgICAjIERvIG5vdCB0aHJvdyBleGNlcHRpb25zIHdoZW4gd3JpdGluZ1xyXG4gICAgICBub1Rocm93OiBmYWxzZVxyXG5cclxuICAgICAgIyBEbyBub3QgbGVhdmUgdGFyZ2V0IHVuc2V0LiBTZXQgdGhlIHRhcmdldCB0byB0aGlzIHZhbHVlIG9uIGVycm9yXHJcbiAgICAgIHVzZURlZmF1bHQ6IGZhbHNlXHJcblxyXG4gICAgICAjIERlZmF1bHQgdmFsdWUgdG8gdXNlIHdoZW4gYW4gZXhjZXB0aW9uIGlzIGNhdWdodFxyXG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZFxyXG5cclxuICAgICAgIyBDb21wdXRlIGEgZGVmYXVsdCB2YWx1ZSB3aGVuIGFuIGV4Y2VwdGlvbiBpcyBjYXVnaHQuIE92ZXJyaWRlcyBkZWZhdWx0VmFsdWVcclxuICAgICAgZGVmYXVsdEZ1bmM6IHVuZGVmaW5lZFxyXG4gICAgfVxyXG5cclxuICAgICMgdXNlIHB1cmUgY29tcHV0ZWQgb2JzZXJ2YWJsZXNcclxuICAgIHB1cmU6IHRydWVcclxuXHJcbiAgICAjIGRvIG5vdCBhdHRlbXB0IHRvIHJlYWQgdGhlIHZhbHVlIGltbWVkaWF0ZWx5XHJcbiAgICBkZWZlckV2YWx1YXRpb246IHRydWVcclxuICB9XHJcblxyXG4gIGV4dGVuZCA9IChyb290LCBvYmplY3RzLi4uKSAtPlxyXG4gICAgZm9yIG9iamVjdCBpbiBvYmplY3RzXHJcbiAgICAgIHJvb3QgPSBrby51dGlscy5leHRlbmQocm9vdCwgb2JqZWN0KVxyXG4gICAgcmV0dXJuIHJvb3RcclxuXHJcbiAgbm9ybWFsaXplRXggPSAobmFtZSwgcm9vdCwgb2JqZWN0cy4uLikgLT5cclxuICAgIHJvb3RbbmFtZV0gPSBvcHQgPSBleHRlbmQoe30sIChvYmplY3Q/W25hbWVdIGZvciBvd24ga2V5LCBvYmplY3Qgb2Ygb2JqZWN0cykuLi4pXHJcblxyXG4gICAgIyBmb3JjZSBjYXRjaCB0byBiZSBhIGZ1bmN0aW9uXHJcbiAgICBpZiBvcHQuY2F0Y2ggPT0gdHJ1ZVxyXG4gICAgICBvcHQuY2F0Y2ggPSBvcHQuY2F0Y2hUcnVlXHJcbiAgICBlbHNlIGlmIG9wdC5jYXRjaCA9PSBmYWxzZVxyXG4gICAgICBvcHQuY2F0Y2ggPSBvcHQuY2F0Y2hGYWxzZVxyXG5cclxuICAgICMgZm9yY2UgZGVmYXVsdEZ1bmNcclxuICAgIGlmIG9wdC51c2VEZWZhdWx0IGFuZCBub3Qgb3B0LmRlZmF1bHRGdW5jP1xyXG4gICAgICBvcHQuZGVmYXVsdEZ1bmMgPSAoKSAtPiBvcHQuZGVmYXVsdFZhbHVlXHJcblxyXG4gICAgcmV0dXJuIG9wdFxyXG5cclxuICBub3JtYWxpemVFeFJlYWQgPSAocm9vdCwgb2JqZWN0cy4uLikgLT5cclxuICAgIG5vcm1hbGl6ZUV4KCdleFJlYWQnLCByb290LCBvYmplY3RzLi4uKVxyXG5cclxuICBub3JtYWxpemVFeFdyaXRlID0gKHJvb3QsIG9iamVjdHMuLi4pIC0+XHJcbiAgICBub3JtYWxpemVFeCgnZXhXcml0ZScsIHJvb3QsIG9iamVjdHMuLi4pXHJcblxyXG4gIG5vcm1hbGl6ZVZhbGlkYXRpb24gPSAocm9vdCwgb2JqZWN0cy4uLikgLT5cclxuICAgIG5vcm0gPSAodikgLT5cclxuICAgICAgaWYgdiA9PSB0cnVlXHJcbiAgICAgICAgcmV0dXJuIHsgZW5hYmxlOiB0cnVlIH1cclxuICAgICAgZWxzZSBpZiB2ID09IGZhbHNlXHJcbiAgICAgICAgcmV0dXJuIHsgZW5hYmxlOiBmYWxzZSB9XHJcbiAgICAgIGVsc2VcclxuICAgICAgICByZXR1cm4gdlxyXG5cclxuICAgIHJvb3RbJ3ZhbGlkYXRpb24nXSA9IG9wdCA9IGV4dGVuZCh7fSwgKG5vcm0ob2JqZWN0P1sndmFsaWRhdGlvbiddKSBmb3Igb3duIGtleSwgb2JqZWN0IG9mIG9iamVjdHMpLi4uKVxyXG5cclxuICAgIHJldHVybiBvcHRcclxuXHJcbiAgd3JhcFJlYWQgPSAob3B0aW9ucywgdGFyZ2V0LCByZWFkRXJyb3IsIHJlYWQpIC0+XHJcbiAgICByZXR1cm4gKCkgLT5cclxuICAgICAgdHJ5XHJcbiAgICAgICAgcmV0dXJuIHJlYWQoKVxyXG4gICAgICBjYXRjaCBleFxyXG4gICAgICAgIGlmIG9wdGlvbnMuZXhSZWFkLmNhdGNoKGV4KVxyXG4gICAgICAgICAgcmVhZEVycm9yKGV4KVxyXG5cclxuICAgICAgICAgIGlmIG9wdGlvbnMuZXhSZWFkLnVzZURlZmF1bHRcclxuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZXhSZWFkLmRlZmF1bHRGdW5jKClcclxuXHJcbiAgICAgICAgdGhyb3cgZXhcclxuICAgICAgZmluYWxseVxyXG4gICAgICAgIGlmIG5vdCBleD9cclxuICAgICAgICAgIHJlYWRFcnJvcih1bmRlZmluZWQpXHJcblxyXG4gIHdyYXBXcml0ZSA9IChvcHRpb25zLCB0YXJnZXQsIHdyaXRlRXJyb3IsIHdyaXRlKSAtPlxyXG4gICAgcmV0dXJuICh2YWx1ZSkgLT5cclxuICAgICAgdHJ5XHJcbiAgICAgICAgd3JpdGUodmFsdWUpXHJcbiAgICAgIGNhdGNoIGV4XHJcbiAgICAgICAgaWYgb3B0aW9ucy5leFdyaXRlLmNhdGNoKGV4KVxyXG4gICAgICAgICAgd3JpdGVFcnJvcihleClcclxuXHJcbiAgICAgICAgICBpZiBvcHRpb25zLmV4V3JpdGUudXNlRGVmYXVsdFxyXG4gICAgICAgICAgICB0YXJnZXQob3B0aW9ucy5leFdyaXRlLmRlZmF1bHRGdW5jKCkpXHJcblxyXG4gICAgICAgIGlmIG5vdCBvcHRpb25zLmV4V3JpdGUubm9UaHJvd1xyXG4gICAgICAgICAgdGhyb3cgZXhcclxuICAgICAgZmluYWxseVxyXG4gICAgICAgIGlmIG5vdCBleD9cclxuICAgICAgICAgIHdyaXRlRXJyb3IodW5kZWZpbmVkKVxyXG5cclxuICB2YWxpZGF0ZSA9ICh0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucykgLT5cclxuICAgIGlmIG5vdCBvcHRpb25zLnZhbGlkYXRpb24uZW5hYmxlXHJcbiAgICAgIHJldHVyblxyXG5cclxuICAgIHZhbGlkYXRpb24gPSBvcHRpb25zLnZhbGlkYXRpb25cclxuXHJcbiAgICBpZiAobm90IHZhbGlkYXRpb24udGFyZ2V0IGFuZCBub3QgdmFsaWRhdGlvbi5yZXN1bHQpIG9yIChub3QgdmFsaWRhdGlvbi5yZWFkIGFuZCBub3QgdmFsaWRhdGlvbi53cml0ZSlcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgaWYga28udmFsaWRhdGlvbj9cclxuICAgICAgIyMjXHJcbiAgICAgIE5vdGUgdGhhdCB1c2luZyBrbyB2YWxpZGF0aW9uIHdpbGwgZm9yY2UgYW4gaW1tZWRpYXRlIGV2YWx1YXRpb24gb2YgdGhlIHRhcmdldHRlZCBvYnNlcnZhYmxlc1xyXG4gICAgICAjIyNcclxuICAgICAgaWYgb3B0aW9ucy52YWxpZGF0aW9uLnJlYWQgYW5kIG9wdGlvbnMudmFsaWRhdGlvbi53cml0ZVxyXG4gICAgICAgIG1lc3NhZ2UgPSAoKSAtPiByZXN1bHQud3JpdGVFcnJvcigpPy5tZXNzYWdlID8gcmVzdWx0LnJlYWRFcnJvcigpPy5tZXNzYWdlXHJcbiAgICAgIGVsc2UgaWYgb3B0aW9ucy52YWxpZGF0aW9uLnJlYWRcclxuICAgICAgICBtZXNzYWdlID0gKCkgLT4gcmVzdWx0LnJlYWRFcnJvcigpPy5tZXNzYWdlXHJcbiAgICAgIGVsc2UgI2lmIG9wdGlvbnMudmFsaWRhdGlvbi53cml0ZVxyXG4gICAgICAgIG1lc3NhZ2UgPSAoKSAtPiByZXN1bHQud3JpdGVFcnJvcigpPy5tZXNzYWdlXHJcblxyXG4gICAgICBhcHBseVZhbGlkYXRpb24gPSAoYmFzZSkgLT5cclxuICAgICAgICBiYXNlLmV4dGVuZCh7IHZhbGlkYXRhYmxlOiB7IGVuYWJsZTogdHJ1ZSB9IH0pXHJcblxyXG4gICAgICAgIHJ1bGUgPSB7XHJcbiAgICAgICAgICBtZXNzYWdlOiB1bmRlZmluZWRcclxuICAgICAgICAgIHZhbGlkYXRvcjogKCkgLT5cclxuICAgICAgICAgICAgbSA9IG1lc3NhZ2UoKVxyXG4gICAgICAgICAgICBpZiBub3QgbT9cclxuICAgICAgICAgICAgICBydWxlLm1lc3NhZ2UgPSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgcnVsZS5tZXNzYWdlID0gdmFsaWRhdGlvbi5tZXNzYWdlID8gbVxyXG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAga28udmFsaWRhdGlvbi5hZGRBbm9ueW1vdXNSdWxlKGJhc2UsIHJ1bGUpXHJcblxyXG4gICAgICAgIHJldHVyblxyXG5cclxuICAgICAgaWYgdmFsaWRhdGlvbi50YXJnZXRcclxuICAgICAgICBhcHBseVZhbGlkYXRpb24odGFyZ2V0KVxyXG5cclxuICAgICAgaWYgdmFsaWRhdGlvbi5yZXN1bHRcclxuICAgICAgICBhcHBseVZhbGlkYXRpb24ocmVzdWx0KVxyXG5cclxuICAgIHJldHVyblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gIGtvLmV4dGVuZGVycy50eXBlID0gKHRhcmdldCwgb3B0aW9ucykgLT5cclxuICAgICMgUmVxdWlyZXNcclxuICAgICMgdHlwZU5hbWUgOiBTdHJpbmdcclxuICAgICMgdHlwZU5hbWVzIDogQXJyYXkgb2YgU3RyaW5nXHJcbiAgICAjIHR5cGVDaGVjayA6IGZ1bmN0aW9uICh2YWx1ZSkgeyAuLi4gfVxyXG4gICAgIyB0eXBlQ2hlY2tzIDogeyB0eXBlTmFtZTogZnVuY3Rpb24gaXNUeXBlKHZhbHVlKSB7IC4uLiB9LCAuLi4gfVxyXG5cclxuICAgIGlmIGlzQW4uU3RyaW5nLkxpdGVyYWwob3B0aW9ucykgb3IgaXNBbi5BcnJheShvcHRpb25zKVxyXG4gICAgICAjIC5leHRlbmQoeyB0eXBlOiAnVHlwZU5hbWV8VHlwZU5hbWV8VHlwZU5hbWUnIH0pXHJcbiAgICAgICMgLmV4dGVuZCh7IHR5cGU6IFsnVHlwZU5hbWUnLCdUeXBlTmFtZScsLi4uXSB9KVxyXG4gICAgICBvcHRpb25zID0geyB0eXBlOiBvcHRpb25zIH1cclxuICAgIGVsc2UgaWYgaXNBbi5GdW5jdGlvbihvcHRpb25zKVxyXG4gICAgICAjIC5leHRlbmQoeyB0eXBlOiBmdW5jdGlvbiAodmFsdWUpIHsgcmV0dXJuIHRydWV8ZmFsc2U7IH0gfSlcclxuICAgICAgb3B0aW9ucyA9IHtcclxuICAgICAgICB0eXBlOiBvcHRpb25zLnR5cGVOYW1lXHJcbiAgICAgICAgY2hlY2s6IG9wdGlvbnNcclxuICAgICAgfVxyXG5cclxuICAgIG5vcm1hbCA9IGV4dGVuZCh7fSwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucylcclxuICAgIG5vcm1hbGl6ZUV4UmVhZChub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICBub3JtYWxpemVFeFdyaXRlKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucylcclxuICAgIG5vcm1hbGl6ZVZhbGlkYXRpb24obm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgb3B0aW9ucyA9IG5vcm1hbFxyXG5cclxuICAgICMgR2F0aGVyIHR5cGUgbmFtZXNcclxuICAgIHR5cGVOYW1lcyA9IHR5cGVOYW1lVG9BcnJheShvcHRpb25zLnR5cGUpXHJcbiAgICB0eXBlTmFtZXMucHVzaCgobmFtZSBmb3Igb3duIG5hbWUgb2Ygb3B0aW9ucyB3aGVuIGlzVmFsaWRUeXBlTmFtZShuYW1lKSkuLi4pXHJcbiAgICB0eXBlTmFtZXMgPSB0eXBlTmFtZVRvRGlzdGluY3RBcnJheSh0eXBlTmFtZXMpXHJcbiAgICB0eXBlTmFtZSA9IHR5cGVOYW1lVG9TdHJpbmcodHlwZU5hbWVzKVxyXG5cclxuICAgICMgc2ltcGxlIGNoZWNrc1xyXG4gICAgdHlwZUNoZWNrc1NpbXBsZSA9IHt9XHJcbiAgICBkbyAtPlxyXG4gICAgICBmb3IgbmFtZSBpbiB0eXBlTmFtZXNcclxuICAgICAgICB0eXBlQ2hlY2tzU2ltcGxlW25hbWVdID0gb3B0aW9uc1tuYW1lXSA/IGlzQW4obmFtZSwgeyByZXR1cm5DaGVja2VyOiB0cnVlIH0pXHJcblxyXG4gICAgIyBzaW1wbGUgY2hlY2tcclxuICAgIHR5cGVDaGVja1NpbXBsZSA9IG9wdGlvbnMuY2hlY2sgPyAoKCkgLT4gdHJ1ZSlcclxuXHJcbiAgICAjIGNoZWNrc1xyXG4gICAgdHlwZUNoZWNrcyA9IHt9XHJcbiAgICBkbyAtPlxyXG4gICAgICBmb3IgbmFtZSwgY2hlY2sgb2YgdHlwZUNoZWNrc1NpbXBsZVxyXG4gICAgICAgIGRvIChjaGVjaykgLT5cclxuICAgICAgICAgIHR5cGVDaGVja3NbbmFtZV0gPSAodmFsdWUpIC0+XHJcbiAgICAgICAgICAgIGNoZWNrKHZhbHVlKSBhbmQgdHlwZUNoZWNrU2ltcGxlKHZhbHVlKVxyXG5cclxuICAgICMgY2hlY2tcclxuICAgIHR5cGVDaGVjayA9IGRvIC0+XHJcbiAgICAgIHJldHVybiAodmFsdWUpIC0+XHJcbiAgICAgICAgdHlwZUNoZWNrU2ltcGxlKHZhbHVlKSBhbmQgKCh0eXBlTmFtZXMubGVuZ3RoID09IDApIG9yICh0eXBlTmFtZXMuc29tZSgobmFtZSkgLT4gdHlwZUNoZWNrc1NpbXBsZVtuYW1lXSh2YWx1ZSkpKSlcclxuXHJcbiAgICByZWFkRXJyb3IgPSBrby5vYnNlcnZhYmxlKClcclxuICAgIHdyaXRlRXJyb3IgPSBrby5vYnNlcnZhYmxlKClcclxuXHJcbiAgICByZXN1bHQgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgIHB1cmU6IG9wdGlvbnMucHVyZVxyXG4gICAgICBkZWZlckV2YWx1YXRpb246IHRydWVcclxuXHJcbiAgICAgIHJlYWQ6IHdyYXBSZWFkKFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgIHJlYWRFcnJvcixcclxuICAgICAgICAoKSAtPlxyXG4gICAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IHRhcmdldCgpXHJcblxyXG4gICAgICAgICAgaWYgbm90IHR5cGVDaGVjayhpbnRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5leHBlY3RlZCBpbnRlcm5hbCB0eXBlLiBFeHBlY3RlZCAje3R5cGVOYW1lfSwgZ290ICN7aXNBbihpbnRlcm5hbFZhbHVlKX1cIilcclxuXHJcbiAgICAgICAgICByZXR1cm4gaW50ZXJuYWxWYWx1ZVxyXG4gICAgICApXHJcbiAgICAgIHdyaXRlOiB3cmFwV3JpdGUoXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgd3JpdGVFcnJvcixcclxuICAgICAgICAoZXh0ZXJuYWxWYWx1ZSkgLT5cclxuICAgICAgICAgIGlmIHR5cGVDaGVjayhleHRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICB0YXJnZXQoZXh0ZXJuYWxWYWx1ZSlcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuZXhwZWN0ZWQgZXh0ZXJuYWwgdHlwZS4gRXhwZWN0ZWQgI3t0eXBlTmFtZX0sIHJlY2VpdmVkICN7aXNBbihleHRlcm5hbFZhbHVlKX1cIilcclxuXHJcbiAgICAgICAgICByZXR1cm5cclxuICAgICAgKVxyXG4gICAgfSlcclxuXHJcbiAgICByZXN1bHQudHlwZU5hbWUgPSB0eXBlTmFtZVxyXG4gICAgcmVzdWx0LnR5cGVOYW1lcyA9IHR5cGVOYW1lc1xyXG4gICAgcmVzdWx0LnR5cGVDaGVjayA9IHR5cGVDaGVja1xyXG4gICAgcmVzdWx0LnR5cGVDaGVja3MgPSB0eXBlQ2hlY2tzXHJcblxyXG4gICAgcmVzdWx0LnJlYWRFcnJvciA9IHJlYWRFcnJvclxyXG4gICAgcmVzdWx0LndyaXRlRXJyb3IgPSB3cml0ZUVycm9yXHJcblxyXG4gICAgdmFsaWRhdGUodGFyZ2V0LCByZXN1bHQsIG9wdGlvbnMpXHJcblxyXG4gICAgaWYgbm90IG9wdGlvbnMuZGVmZXJFdmFsdWF0aW9uXHJcbiAgICAgIHRyeVxyXG4gICAgICAgIHJlc3VsdC5wZWVrKClcclxuICAgICAgY2F0Y2ggZXhcclxuICAgICAgICByZXN1bHQuZGlzcG9zZSgpXHJcbiAgICAgICAgdGhyb3cgZXhcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMgPSB7XHJcbiAgfVxyXG5cclxuXHJcbiAga28uZXh0ZW5kZXJzLmNvbnZlcnQgPSAodGFyZ2V0LCBvcHRpb25zKSAtPlxyXG4gICAgaWYgb3B0aW9ucyA9PSBmYWxzZVxyXG4gICAgICByZXR1cm4gdGFyZ2V0XHJcblxyXG4gICAgIyBub3JtYWxpemUgb3B0aW9uc1xyXG4gICAgZG8gLT5cclxuICAgICAgaWYgaXNBbi5TdHJpbmcob3B0aW9ucykgb3IgaXNBbi5BcnJheShvcHRpb25zKVxyXG4gICAgICAgIG9wdGlvbnMgPSB7IHR5cGU6IG9wdGlvbnMgfVxyXG4gICAgICBlbHNlIGlmIG9wdGlvbnMgPT0gdHJ1ZVxyXG4gICAgICAgIG9wdGlvbnMgPSB7fVxyXG5cclxuICAgICAgIyBtZXJnZSBvcHRpb25zXHJcbiAgICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpXHJcblxyXG4gICAgICBub3JtYWwgPSB7XHJcbiAgICAgICAgY2hlY2tTZWxmOiBvcHRpb25zLmNoZWNrID8gZm5UcnVlXHJcbiAgICAgICAgcmVhZDogb3B0aW9ucy5yZWFkXHJcbiAgICAgICAgd3JpdGU6IG9wdGlvbnMud3JpdGVcclxuICAgICAgICBjaGVja3M6IHt9XHJcbiAgICAgICAgY2hlY2tlcnM6IFtdXHJcbiAgICAgICAgaXNUeXBlZDogaXNUeXBlZCh0YXJnZXQpXHJcbiAgICAgICAgaWdub3JlRGVmYXVsdENvbnZlcnRlcnM6IG9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnNcclxuICAgICAgICBwdXJlOiBvcHRpb25zLnB1cmVcclxuICAgICAgICBkZWZlckV2YWx1YXRpb246IG9wdGlvbnMuZGVmZXJFdmFsdWF0aW9uXHJcbiAgICAgICAgdHlwZXM6IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KG9wdGlvbnMudHlwZSlcclxuICAgICAgfVxyXG5cclxuICAgICAgbm9ybWFsaXplRXhSZWFkKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucylcclxuICAgICAgbm9ybWFsaXplRXhXcml0ZShub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICAgIG5vcm1hbGl6ZVZhbGlkYXRpb24obm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zLCBvcHRpb25zKVxyXG5cclxuICAgICAgIyBFeHBhbmQgZWFjaCBFeHRlcm5hbCBUeXBlXHJcbiAgICAgIGZvciBvd24gZXh0VHlwZU5hbWUsIGV4dFR5cGVPcHRpb25zIG9mIG9wdGlvbnNcclxuICAgICAgICBpZiBub3QgaXNWYWxpZFR5cGVOYW1lKGV4dFR5cGVOYW1lKVxyXG4gICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgIG5vcm1hbFtleHRUeXBlTmFtZV0gPSB7XHJcbiAgICAgICAgICBjaGVja1NlbGY6IGV4dFR5cGVPcHRpb25zLmNoZWNrXHJcbiAgICAgICAgICByZWFkOiBleHRUeXBlT3B0aW9ucy5yZWFkXHJcbiAgICAgICAgICB3cml0ZTogZXh0VHlwZU9wdGlvbnMud3JpdGVcclxuICAgICAgICAgIHR5cGVzOiB0eXBlTmFtZVRvRGlzdGluY3RBcnJheShleHRUeXBlT3B0aW9ucy50eXBlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgIyBFeHBhbmQgYWxsIGludGVybmFsIHR5cGVzXHJcbiAgICAgICAgZm9yIG93biBpbnRUeXBlTmFtZSBvZiBleHRUeXBlT3B0aW9uc1xyXG4gICAgICAgICAgaWYgbm90IGlzVmFsaWRUeXBlTmFtZShpbnRUeXBlTmFtZSlcclxuICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICBpbnRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdP1tpbnRUeXBlTmFtZV0gPyB7fVxyXG5cclxuICAgICAgICAgIG5vcm1hbFtleHRUeXBlTmFtZV1baW50VHlwZU5hbWVdID0ge1xyXG4gICAgICAgICAgICByZWFkOiBpbnRUeXBlT3B0aW9ucy5yZWFkXHJcbiAgICAgICAgICAgIHdyaXRlOiBpbnRUeXBlT3B0aW9ucy53cml0ZVxyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgbm9ybWFsLnR5cGUgPSB0eXBlTmFtZVRvU3RyaW5nKG5vcm1hbC50eXBlcylcclxuXHJcbiAgICAgIGZvciBleHRUeXBlTmFtZSBpbiBub3JtYWwudHlwZXNcclxuICAgICAgICBjaGVja2VyID0gbm9ybWFsW2V4dFR5cGVOYW1lXT8uY2hlY2tTZWxmID8gaXNBbihleHRUeXBlTmFtZSwgeyByZXR1cm5DaGVja2VyOiB0cnVlIH0pID8gZm5UcnVlXHJcbiAgICAgICAgbm9ybWFsLmNoZWNrc1tleHRUeXBlTmFtZV0gPSBkbyAoY2hlY2tlcikgLT5cclxuICAgICAgICAgICh2YWx1ZSkgLT4gbm9ybWFsLmNoZWNrU2VsZih2YWx1ZSkgYW5kIGNoZWNrZXIodmFsdWUpXHJcbiAgICAgICAgbm9ybWFsLmNoZWNrZXJzLnB1c2gobm9ybWFsLmNoZWNrc1tleHRUeXBlTmFtZV0pXHJcblxyXG4gICAgICBub3JtYWwuY2hlY2sgPSAodmFsdWUpIC0+XHJcbiAgICAgICAgbm9ybWFsLmNoZWNrU2VsZih2YWx1ZSkgYW5kICgobm9ybWFsLmNoZWNrZXJzLmxlbmd0aCA9PSAwKSBvciBub3JtYWwuY2hlY2tlcnMuc29tZSgoY2hlY2tlcikgLT4gY2hlY2tlcih2YWx1ZSkpKVxyXG5cclxuICAgICAgb3B0aW9ucyA9IG5vcm1hbFxyXG5cclxuXHJcbiAgICByZWFkRXJyb3IgPSBrby5vYnNlcnZhYmxlKClcclxuICAgIHdyaXRlRXJyb3IgPSBrby5vYnNlcnZhYmxlKClcclxuXHJcbiAgICByZXN1bHQgPSBrby5jb21wdXRlZCh7XHJcbiAgICAgIHB1cmU6IG9wdGlvbnMucHVyZVxyXG4gICAgICBkZWZlckV2YWx1YXRpb246IHRydWVcclxuXHJcbiAgICAgIHJlYWQ6IHdyYXBSZWFkKFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgIHJlYWRFcnJvcixcclxuICAgICAgICAoKSAtPlxyXG4gICAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IHRhcmdldCgpXHJcbiAgICAgICAgICBleHRlcm5hbFZhbHVlID0gdW5kZWZpbmVkXHJcblxyXG4gICAgICAgICAgIyBUcnkgZXhhY3QgaW50ZXJuYWwgdHlwZSBtYXRjaFxyXG4gICAgICAgICAgdHJ5UmVhZCA9IChyZWFkLCByZWFkT3B0aW9ucykgLT5cclxuICAgICAgICAgICAgaWYgcmVhZD9cclxuICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIGV4dGVybmFsVmFsdWUgPSByZWFkKGludGVybmFsVmFsdWUsIHJlYWRPcHRpb25zKVxyXG4gICAgICAgICAgICAgIGNhdGNoIGV4XHJcbiAgICAgICAgICAgICAgICBpZiBleCBub3QgaW5zdGFuY2VvZiBUeXBlRXJyb3JcclxuICAgICAgICAgICAgICAgICAgdGhyb3cgZXhcclxuXHJcbiAgICAgICAgICAgICAgaWYgbm90IGV4P1xyXG4gICAgICAgICAgICAgICAgaWYgb3B0aW9ucy5jaGVjayhleHRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcblxyXG4gICAgICAgICAgZXh0VHlwZU5hbWVzID0gb3B0aW9ucy50eXBlc1xyXG4gICAgICAgICAgaWYgZXh0VHlwZU5hbWVzLmxlbmd0aCA9PSAwXHJcbiAgICAgICAgICAgIGV4dFR5cGVOYW1lcyA9IFtpc0FuKGludGVybmFsVmFsdWUpXVxyXG5cclxuICAgICAgICAgICMgTG9vayBmb3Igc3BlY2lmaWMgY29udmVyc2lvblxyXG4gICAgICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIGV4dFR5cGVOYW1lc1xyXG4gICAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgICAgICMgaW50ZXJuYWwgdHlwZXNcclxuICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gZXh0VHlwZU9wdGlvbnMudHlwZXMgPyBbXVxyXG4gICAgICAgICAgICBpZiBpbnRUeXBlTmFtZXMubGVuZ3RoID09IDBcclxuICAgICAgICAgICAgICBpZiBvcHRpb25zLmlzVHlwZWRcclxuICAgICAgICAgICAgICAgICMgZ28gYnkgdGFyZ2V0IG9yZGVyXHJcbiAgICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSB0YXJnZXQudHlwZU5hbWVzXHJcbiAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgIyBnbyBieSBpbmZlcnJlZCBvcmRlclxyXG4gICAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gW2lzQW4oaW50ZXJuYWxWYWx1ZSldXHJcblxyXG4gICAgICAgICAgICBmb3IgaW50VHlwZU5hbWUgaW4gaW50VHlwZU5hbWVzXHJcbiAgICAgICAgICAgICAgIyBjaGVjayBpbnRlcm5hbCB0eXBlXHJcbiAgICAgICAgICAgICAgaWYgb3B0aW9ucy5pc1R5cGVkIGFuZCBub3QgdGFyZ2V0LnR5cGVDaGVja3NbaW50VHlwZU5hbWVdPyhpbnRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgICAgIyBnZXQgdGhlIG9wdGlvbnNcclxuICAgICAgICAgICAgICBpbnRUeXBlT3B0aW9ucyA9IGV4dFR5cGVPcHRpb25zW2ludFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgICAgICMgdHJ5IGN1c3RvbSBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgaWYgaW50VHlwZU9wdGlvbnMucmVhZD9cclxuICAgICAgICAgICAgICAgIGlmIHRyeVJlYWQoaW50VHlwZU9wdGlvbnMucmVhZCwgaW50VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlXHJcbiAgICAgICAgICAgICAgIyB0cnkgbm8gY29udmVyc2lvblxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgaW50VHlwZU5hbWUgPT0gZXh0VHlwZU5hbWVcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBleHRUeXBlT3B0aW9ucy5yZWFkPyBhbmQgbm90IG9wdGlvbnMucmVhZD8gYW5kIHRyeVJlYWQoZm5JZGVudGl0eSlcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWVcclxuICAgICAgICAgICAgICBlbHNlIGlmIG5vdCBvcHRpb25zLmlnbm9yZURlZmF1bHRDb252ZXJ0ZXJzXHJcbiAgICAgICAgICAgICAgICAjIHRyeSBkZWZhdWx0IGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgIGlmIHRyeVJlYWQoa28udHlwZWQuZ2V0Q29udmVydGVyKGludFR5cGVOYW1lLCBleHRUeXBlTmFtZSksIGludFR5cGVPcHRpb25zLnJlYWRPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZVxyXG5cclxuICAgICAgICAgICMgTG9vayBmb3Igb25lLXNpZGVkIGNvbnZlcnNpb25cclxuICAgICAgICAgIGZvciBleHRUeXBlTmFtZSBpbiBleHRUeXBlTmFtZXNcclxuICAgICAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgICAjIHRyeSBjdXN0b20gY29udmVyc2lvblxyXG4gICAgICAgICAgICBpZiB0cnlSZWFkKGV4dFR5cGVPcHRpb25zLnJlYWQsIGV4dFR5cGVPcHRpb25zLnJlYWRPcHRpb25zKVxyXG4gICAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlXHJcblxyXG4gICAgICAgICAgIyBMb29rIGZvciBnZW5lcmljIGNvbnZlcnNpb25cclxuICAgICAgICAgIGlmIHRyeVJlYWQob3B0aW9ucy5yZWFkLCBvcHRpb25zLnJlYWRPcHRpb25zKVxyXG4gICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZVxyXG5cclxuICAgICAgICAgIGlmIG9wdGlvbnMudHlwZT9cclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gaW50ZXJuYWwgdHlwZSAje2lzQW4oaW50ZXJuYWxWYWx1ZSl9IHRvIGV4dGVybmFsIHR5cGUgI3tvcHRpb25zLnR5cGV9XCIpXHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIGludGVybmFsIHR5cGUgI3tpc0FuKGludGVybmFsVmFsdWUpfVwiKVxyXG4gICAgICApXHJcblxyXG4gICAgICB3cml0ZTogd3JhcFdyaXRlKFxyXG4gICAgICAgIG9wdGlvbnMsXHJcbiAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgIHdyaXRlRXJyb3IsXHJcbiAgICAgICAgKGV4dGVybmFsVmFsdWUpIC0+XHJcbiAgICAgICAgICB0cnlXcml0ZSA9ICh3cml0ZSwgd3JpdGVPcHRpb25zKSAtPlxyXG4gICAgICAgICAgICBpZiB3cml0ZT9cclxuICAgICAgICAgICAgICB0cnlcclxuICAgICAgICAgICAgICAgIGludGVybmFsVmFsdWUgPSB3cml0ZShleHRlcm5hbFZhbHVlLCB3cml0ZU9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgY2F0Y2ggZXhcclxuICAgICAgICAgICAgICAgIGlmIGV4IG5vdCBpbnN0YW5jZW9mIFR5cGVFcnJvclxyXG4gICAgICAgICAgICAgICAgICB0aHJvdyBleFxyXG5cclxuICAgICAgICAgICAgICBpZiBub3QgZXg/XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQoaW50ZXJuYWxWYWx1ZSlcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgICAgICAgICBpZiBub3Qgb3B0aW9ucy5jaGVja1NlbGY/IG9yIG9wdGlvbnMuY2hlY2tTZWxmKGV4dGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgIGV4dFR5cGVOYW1lcyA9IG9wdGlvbnMudHlwZXNcclxuICAgICAgICAgICAgaWYgZXh0VHlwZU5hbWVzLmxlbmd0aCA9PSAwXHJcbiAgICAgICAgICAgICAgZXh0VHlwZU5hbWVzID0gW2lzQW4oZXh0ZXJuYWxWYWx1ZSldXHJcblxyXG4gICAgICAgICAgICAjIExvb2sgZm9yIHNwZWNpZmljIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIGV4dFR5cGVOYW1lc1xyXG4gICAgICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV0gPyB7fVxyXG5cclxuICAgICAgICAgICAgICBpZiAoZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmPyBhbmQgbm90IGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZihleHRlcm5hbFZhbHVlKSkgb3IgKG5vdCBleHRUeXBlT3B0aW9ucy5jaGVja1NlbGY/IGFuZCBub3QgaXNBbihleHRlcm5hbFZhbHVlLCBleHRUeXBlTmFtZSkpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAjIGludGVybmFsIHR5cGVzXHJcbiAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gZXh0VHlwZU9wdGlvbnMudHlwZXMgPyBbXVxyXG4gICAgICAgICAgICAgIGlmIGludFR5cGVOYW1lcy5sZW5ndGggPT0gMFxyXG4gICAgICAgICAgICAgICAgaWYgb3B0aW9ucy5pc1R5cGVkXHJcbiAgICAgICAgICAgICAgICAgICMgZ28gYnkgdGFyZ2V0IG9yZGVyXHJcbiAgICAgICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IHRhcmdldC50eXBlTmFtZXNcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgIyBnbyBieSBpbmZlcnJlZCBvcmRlclxyXG4gICAgICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBbaXNBbihleHRlcm5hbFZhbHVlKV1cclxuXHJcbiAgICAgICAgICAgICAgZm9yIGludFR5cGVOYW1lIGluIGludFR5cGVOYW1lc1xyXG4gICAgICAgICAgICAgICAgaW50VHlwZU9wdGlvbnMgPSBleHRUeXBlT3B0aW9uc1tpbnRUeXBlTmFtZV0gPyB7fVxyXG5cclxuICAgICAgICAgICAgICAgICMgdHJ5IGN1c3RvbSBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICBpZiBpbnRUeXBlT3B0aW9ucy53cml0ZT9cclxuICAgICAgICAgICAgICAgICAgaWYgdHJ5V3JpdGUoaW50VHlwZU9wdGlvbnMud3JpdGUsIGludFR5cGVPcHRpb25zLndyaXRlT3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgICMgdHJ5IG5vIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgZXh0VHlwZU5hbWUgPT0gaW50VHlwZU5hbWVcclxuICAgICAgICAgICAgICAgICAgaWYgbm90IGV4dFR5cGVPcHRpb25zLndyaXRlPyBhbmQgbm90IG9wdGlvbnMud3JpdGU/IGFuZCAobm90IG9wdGlvbnMuaXNUeXBlZCBvciB0YXJnZXQudHlwZUNoZWNrc1tleHRUeXBlTmFtZV0oZXh0ZXJuYWxWYWx1ZSkpIGFuZCB0cnlXcml0ZShmbklkZW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgIyB0cnkgZGVmYXVsdCBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIG5vdCBvcHRpb25zLmlnbm9yZURlZmF1bHRDb252ZXJ0ZXJzXHJcbiAgICAgICAgICAgICAgICAgIGlmIHRyeVdyaXRlKGtvLnR5cGVkLmdldENvbnZlcnRlcihleHRUeXBlTmFtZSwgaW50VHlwZU5hbWUpLCBpbnRUeXBlT3B0aW9ucy53cml0ZU9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICAgICAjIExvb2sgZm9yIG9uZS1zaWRlZCBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgIGZvciBleHRUeXBlTmFtZSBpbiBleHRUeXBlTmFtZXNcclxuICAgICAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgICAgICAgaWYgKGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZj8gYW5kIG5vdCBleHRUeXBlT3B0aW9ucy5jaGVja1NlbGYoZXh0ZXJuYWxWYWx1ZSkpIG9yIChub3QgZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmPyBhbmQgbm90IGlzQW4oZXh0ZXJuYWxWYWx1ZSwgZXh0VHlwZU5hbWUpKVxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuXHJcbiAgICAgICAgICAgICAgIyB0cnkgY3VzdG9tIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICBpZiB0cnlXcml0ZShleHRUeXBlT3B0aW9ucy53cml0ZSwgZXh0VHlwZU9wdGlvbnMud3JpdGVPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICAgICAgICAjIExvb2sgZm9yIGdlbmVyaWMgY29udmVyc2lvblxyXG4gICAgICAgICAgICBpZiB0cnlXcml0ZShvcHRpb25zLndyaXRlLCBvcHRpb25zLndyaXRlT3B0aW9ucylcclxuICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICBpZiBvcHRpb25zLmlzVHlwZWRcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gZXh0ZXJuYWwgdHlwZSAje2lzQW4oZXh0ZXJuYWxWYWx1ZSl9IHRvIGludGVybmFsIHR5cGUgI3t0YXJnZXQudHlwZU5hbWV9XCIpXHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIGV4dGVybmFsIHR5cGUgI3tpc0FuKGV4dGVybmFsVmFsdWUpfVwiKVxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHJlc3VsdC50eXBlTmFtZSA9IG9wdGlvbnMudHlwZVxyXG4gICAgcmVzdWx0LnR5cGVOYW1lcyA9IG9wdGlvbnMudHlwZXNcclxuICAgIHJlc3VsdC50eXBlQ2hlY2sgPSBvcHRpb25zLmNoZWNrXHJcbiAgICByZXN1bHQudHlwZUNoZWNrcyA9IG9wdGlvbnMuY2hlY2tzXHJcblxyXG4gICAgcmVzdWx0LnJlYWRFcnJvciA9IHJlYWRFcnJvclxyXG4gICAgcmVzdWx0LndyaXRlRXJyb3IgPSB3cml0ZUVycm9yXHJcblxyXG4gICAgdmFsaWRhdGUodGFyZ2V0LCByZXN1bHQsIG9wdGlvbnMpXHJcblxyXG4gICAgaWYgbm90IG9wdGlvbnMuZGVmZXJFdmFsdWF0aW9uXHJcbiAgICAgIHRyeVxyXG4gICAgICAgIHJlc3VsdC5wZWVrKClcclxuICAgICAgY2F0Y2ggZXhcclxuICAgICAgICByZXN1bHQuZGlzcG9zZSgpXHJcbiAgICAgICAgdGhyb3cgZXhcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMgPSB7XHJcbiAgfVxyXG5cclxuXHJcbiAgZG8gLT5cclxuICAgIGtvLnR5cGVkLl9jb252ZXJ0ZXJzID0gY29udmVydGVycyA9IHt9XHJcblxyXG4gICAga28udHlwZWQuYWRkQ29udmVydGVyID0gKGZyb21UeXBlTmFtZSwgdG9UeXBlTmFtZSwgY29udmVydGVyLCBkZWZhdWx0T3B0aW9ucywgZGVmYXVsdE9wdGlvbikgLT5cclxuICAgICAgY29uc29sZT8uYXNzZXJ0Pyhpc1ZhbGlkVHlwZU5hbWUoZnJvbVR5cGVOYW1lKSwgXCJJbnZhbGlkIHR5cGVOYW1lICN7ZnJvbVR5cGVOYW1lfVwiKVxyXG4gICAgICBjb25zb2xlPy5hc3NlcnQ/KGlzVmFsaWRUeXBlTmFtZSh0b1R5cGVOYW1lKSwgXCJJbnZhbGlkIHR5cGVOYW1lICN7ZnJvbVR5cGVOYW1lfVwiKVxyXG5cclxuICAgICAgaWYgZGVmYXVsdE9wdGlvbnM/XHJcbiAgICAgICAgaWYgZGVmYXVsdE9wdGlvbj9cclxuICAgICAgICAgIHdyYXBwZXIgPSAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgICAgICAgIGlmIGFyZ3VtZW50cy5sZW5ndGggPT0gMiBhbmQgbm90IGlzQW4uT2JqZWN0KG9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgbyA9IHt9XHJcbiAgICAgICAgICAgICAgb1tkZWZhdWx0T3B0aW9uXSA9IG9wdGlvbnNcclxuICAgICAgICAgICAgICBvcHRpb25zID0gb1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRlcih2YWx1ZSwga28udXRpbHMuZXh0ZW5kKGtvLnV0aWxzLmV4dGVuZCh7fSwgd3JhcHBlci5vcHRpb25zKSwgb3B0aW9ucykpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgd3JhcHBlciA9ICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRlcih2YWx1ZSwga28udXRpbHMuZXh0ZW5kKGtvLnV0aWxzLmV4dGVuZCh7fSwgd3JhcHBlci5vcHRpb25zKSwgb3B0aW9ucykpXHJcbiAgICAgIGVsc2VcclxuICAgICAgICB3cmFwcGVyID0gKHZhbHVlKSAtPlxyXG4gICAgICAgICAgcmV0dXJuIGNvbnZlcnRlcih2YWx1ZSlcclxuXHJcbiAgICAgIHdyYXBwZXIub3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zXHJcblxyXG4gICAgICBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0gPz0ge31cclxuICAgICAgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdW3RvVHlwZU5hbWVdID0gd3JhcHBlclxyXG5cclxuICAgICAgcmV0dXJuIGtvLnR5cGVkXHJcblxyXG4gICAga28udHlwZWQuZ2V0Q29udmVydGVyID0gKGZyb21UeXBlTmFtZSwgdG9UeXBlTmFtZSkgLT5cclxuICAgICAgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdP1t0b1R5cGVOYW1lXVxyXG5cclxuICAgIGtvLnR5cGVkLnJlbW92ZUNvbnZlcnRlciA9IChmcm9tVHlwZU5hbWUsIHRvVHlwZU5hbWUpIC0+XHJcbiAgICAgIGlmIGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXT9bdG9UeXBlTmFtZV0/XHJcbiAgICAgICAgZGVsZXRlIGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXT9bdG9UeXBlTmFtZV1cclxuXHJcbiAgICAgIHJldHVybiBrby50eXBlZFxyXG5cclxuICAgIHJldHVyblxyXG5cclxuXHJcbiAgZG8gLT5cclxuICAgICMjIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL01hdGgvcm91bmRcclxuICAgIGRlY2ltYWxBZGp1c3QgPSAodHlwZSwgdmFsdWUsIGV4cCkgLT5cclxuICAgICAgIyBpZiBleHAgaXMgdW5kZWZpbmVkIG9yIHplcm9cclxuICAgICAgaWYgbm90IGV4cD8gb3IgK2V4cCA9PSAwXHJcbiAgICAgICAgcmV0dXJuIHR5cGUodmFsdWUpXHJcblxyXG4gICAgICB2YWx1ZSA9ICt2YWx1ZVxyXG4gICAgICBleHAgPSArZXhwXHJcblxyXG4gICAgICAjIElmIHRoZSB2YWx1ZSBpdCBub3QgYSBudW1iZXIgb2YgdGhlIGV4cCBpcyBub3QgYW4gaW50ZWdlclxyXG4gICAgICBpZiAoaXNOYU4odmFsdWUpIG9yIG5vdCAodHlwZW9mIGV4cCA9PSAnbnVtYmVyJyBhbmQgZXhwICUgMSA9PSAwKSlcclxuICAgICAgICByZXR1cm4gTmFOXHJcblxyXG4gICAgICAjIFNoaWZ0XHJcbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnZScpXHJcbiAgICAgIHZhbHVlID0gdHlwZSgrKHZhbHVlWzBdICsgJ2UnICsgKGlmIHZhbHVlWzFdIHRoZW4gKCt2YWx1ZVsxXSAtIGV4cCkgZWxzZSAtZXhwKSkpXHJcblxyXG4gICAgICAjIFNoaWZ0IGJhY2tcclxuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KCdlJylcclxuICAgICAgcmV0dXJuICgrKHZhbHVlWzBdICsgJ2UnICsgKGlmIHZhbHVlWzFdIHRoZW4gKCt2YWx1ZVsxXSArIGV4cCkgZWxzZSBleHApKSlcclxuXHJcbiAgICAjIyMgIXByYWdtYSBjb3ZlcmFnZS1za2lwLW5leHQgIyMjXHJcbiAgICBpZiBub3QgTWF0aC5yb3VuZDEwP1xyXG4gICAgICBNYXRoLnJvdW5kMTAgPSAodmFsdWUsIGV4cCkgLT5cclxuICAgICAgICByZXR1cm4gZGVjaW1hbEFkanVzdChNYXRoLnJvdW5kLCB2YWx1ZSwgZXhwKVxyXG5cclxuICAgICMjIyAhcHJhZ21hIGNvdmVyYWdlLXNraXAtbmV4dCAjIyNcclxuICAgIGlmIG5vdCBNYXRoLmZsb29yMTA/XHJcbiAgICAgIE1hdGguZmxvb3IxMCA9ICh2YWx1ZSwgZXhwKSAtPlxyXG4gICAgICAgIHJldHVybiBkZWNpbWFsQWRqdXN0KE1hdGguZmxvb3IsIHZhbHVlLCBleHApXHJcblxyXG4gICAgIyMjICFwcmFnbWEgY292ZXJhZ2Utc2tpcC1uZXh0ICMjI1xyXG4gICAgaWYgbm90IE1hdGguY2VpbDEwP1xyXG4gICAgICBNYXRoLmNlaWwxMCA9ICh2YWx1ZSwgZXhwKSAtPlxyXG4gICAgICAgIHJldHVybiBkZWNpbWFsQWRqdXN0KE1hdGguY2VpbCwgdmFsdWUsIGV4cClcclxuXHJcbiAgICByZXR1cm5cclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0Jvb2xlYW4nXHJcbiAgICAnTnVtYmVyLkludGVnZXInXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIHJldHVybiBpZiB2YWx1ZSB0aGVuIG9wdGlvbnMudHJ1dGh5IGVsc2Ugb3B0aW9ucy5mYWxzZXlcclxuICAgIHtcclxuICAgICAgdHJ1dGh5OiAxXHJcbiAgICAgIGZhbHNleTogMFxyXG4gICAgfVxyXG4gICAgJ3RydXRoeSdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdCb29sZWFuJ1xyXG4gICAgJ051bWJlcidcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgcmV0dXJuIGlmIHZhbHVlIHRoZW4gb3B0aW9ucy50cnV0aHkgZWxzZSBvcHRpb25zLmZhbHNleVxyXG4gICAge1xyXG4gICAgICB0cnV0aHk6IDFcclxuICAgICAgZmFsc2V5OiAwXHJcbiAgICB9XHJcbiAgICAndHJ1dGh5J1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0Jvb2xlYW4nXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICB2YWx1ZSA9IGlmIHZhbHVlIHRoZW4gb3B0aW9ucy50cnV0aHkgZWxzZSBvcHRpb25zLmZhbHNleVxyXG5cclxuICAgICAgaWYgb3B0aW9ucy51cHBlckNhc2VcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKClcclxuXHJcbiAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAge1xyXG4gICAgICB1cHBlckNhc2U6IGZhbHNlXHJcbiAgICAgIHRydXRoeTogJ3RydWUnXHJcbiAgICAgIGZhbHNleTogJ2ZhbHNlJ1xyXG4gICAgfVxyXG4gICAgJ3VwcGVyQ2FzZSdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdEYXRlJ1xyXG4gICAgJ01vbWVudCdcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgKG1vbWVudCA/IHJlcXVpcmUoJ21vbWVudCcpKSh2YWx1ZSlcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdEYXRlJ1xyXG4gICAgJ1N0cmluZydcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgaXNOYU4odmFsdWUudmFsdWVPZigpKVxyXG4gICAgICAgIHJldHVybiAnJ1xyXG5cclxuICAgICAgbWV0aG9kID0gb3B0aW9ucy5mb3JtYXRzW29wdGlvbnMuZm9ybWF0XVxyXG4gICAgICByZXR1cm4gdmFsdWVbbWV0aG9kXS5hcHBseSh2YWx1ZSwgb3B0aW9ucy5wYXJhbXMpXHJcblxyXG4gICAge1xyXG4gICAgICBmb3JtYXRzOiB7XHJcbiAgICAgICAgZGF0ZTogJ3RvRGF0ZVN0cmluZydcclxuICAgICAgICBpc286ICd0b0lTT1N0cmluZydcclxuICAgICAgICBqc29uOiAndG9KU09OJ1xyXG4gICAgICAgIGxvY2FsZURhdGU6ICd0b0xvY2FsZURhdGVTdHJpbmcnXHJcbiAgICAgICAgbG9jYWxlVGltZTogJ3RvTG9jYWxlVGltZVN0cmluZydcclxuICAgICAgICBsb2NhbGU6ICd0b0xvY2FsZVN0cmluZydcclxuICAgICAgICB0aW1lOiAndG9UaW1lU3RyaW5nJ1xyXG4gICAgICAgIHV0YzogJ3RvVVRDU3RyaW5nJ1xyXG4gICAgICAgIGRlZmF1bHQ6ICd0b1N0cmluZydcclxuICAgICAgfVxyXG4gICAgICBmb3JtYXQ6ICdkZWZhdWx0J1xyXG4gICAgICBwYXJhbXM6IFtdXHJcbiAgICB9XHJcbiAgICAnZm9ybWF0J1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0RhdGUnLFxyXG4gICAgJ1VuZGVmaW5lZCcsXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG5vdCBpc05hTih2YWx1ZS52YWx1ZU9mKCkpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSB2YWxpZCBEYXRlIHRvIFVuZGVmaW5lZCcpXHJcblxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTW9tZW50J1xyXG4gICAgJ0RhdGUnXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIHZhbHVlLnRvRGF0ZSgpXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTW9tZW50J1xyXG4gICAgJ1N0cmluZydcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgbm90IHZhbHVlLmlzVmFsaWQoKVxyXG4gICAgICAgIHJldHVybiAnJ1xyXG5cclxuICAgICAgcmV0dXJuIHZhbHVlLmxvY2FsZShvcHRpb25zLmxvY2FsZSkuZm9ybWF0KG9wdGlvbnMuZm9ybWF0KVxyXG4gICAge1xyXG4gICAgICBsb2NhbGU6ICdlbidcclxuICAgICAgZm9ybWF0OiAnTCdcclxuICAgIH1cclxuICAgICdmb3JtYXQnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTW9tZW50JyxcclxuICAgICdVbmRlZmluZWQnLFxyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiB2YWx1ZS5pc1ZhbGlkKClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIHZhbGlkIE1vbWVudCB0byBVbmRlZmluZWQnKVxyXG5cclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ051bWJlcidcclxuICAgICdCb29sZWFuJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLmZhbHNleT8gYW5kIHZhbHVlID09IG9wdGlvbnMuZmFsc2V5XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIGVsc2UgaWYgb3B0aW9ucy50cnV0aHk/IGFuZCB2YWx1ZSA9PSBvcHRpb25zLnRydXRoeVxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMuZmFsc2V5P1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICBlbHNlIGlmIG5vdCBvcHRpb25zLnRydXRoeT9cclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IGZyb20gI3t2YWx1ZX0gdG8gQm9vbGVhblwiKVxyXG4gICAge1xyXG4gICAgICB0cnV0aHk6IHVuZGVmaW5lZFxyXG4gICAgICBmYWxzZXk6IDBcclxuICAgIH1cclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXInXHJcbiAgICAnTnVtYmVyLkludGVnZXInXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG5vdCBvcHRpb25zLm1vZGU/XHJcbiAgICAgICAgaWYgbm90IGlzQW4uTnVtYmVyLkludGVnZXIodmFsdWUpXHJcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCBmcm9tIE51bWJlciB0byBOdW1iZXIuSW50ZWdlci4gTnVtYmVyIGlzIG5vdCBhbiBpbnRlZ2VyJylcclxuICAgICAgICByZXR1cm4gdmFsdWVcclxuICAgICAgZWxzZSBpZiB0eXBlb2Ygb3B0aW9ucy5tb2RlID09ICdzdHJpbmcnXHJcbiAgICAgICAgbW9kZSA9IE1hdGhbb3B0aW9ucy5tb2RlXVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgbW9kZSA9IG9wdGlvbnMubW9kZVxyXG5cclxuICAgICAgcmV0dXJuIG1vZGUodmFsdWUpXHJcbiAgICB7XHJcbiAgICAgIG1vZGU6IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgJ21vZGUnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTnVtYmVyJ1xyXG4gICAgJ1N0cmluZydcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgb3B0aW9ucy5kZWNpbWFscz9cclxuICAgICAgICB2YWx1ZSA9IE1hdGgucm91bmQxMCh2YWx1ZSwgLW9wdGlvbnMuZGVjaW1hbHMpXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0ZpeGVkKG9wdGlvbnMuZGVjaW1hbHMpXHJcbiAgICAgIGVsc2VcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKClcclxuXHJcbiAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAge1xyXG4gICAgICBkZWNpbWFsczogdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICAnZGVjaW1hbHMnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTnVtYmVyLkludGVnZXInXHJcbiAgICAnQm9vbGVhbidcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgb3B0aW9ucy5mYWxzZXk/IGFuZCB2YWx1ZSA9PSBvcHRpb25zLmZhbHNleVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICBlbHNlIGlmIG9wdGlvbnMudHJ1dGh5PyBhbmQgdmFsdWUgPT0gb3B0aW9ucy50cnV0aHlcclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICBlbHNlIGlmIG5vdCBvcHRpb25zLmZhbHNleT9cclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgZWxzZSBpZiBub3Qgb3B0aW9ucy50cnV0aHk/XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuXHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBmcm9tICN7dmFsdWV9IHRvIEJvb2xlYW5cIilcclxuICAgIHtcclxuICAgICAgdHJ1dGh5OiB1bmRlZmluZWRcclxuICAgICAgZmFsc2V5OiAwXHJcbiAgICB9XHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTnVtYmVyLkludGVnZXInXHJcbiAgICAnTnVtYmVyJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTnVtYmVyLkludGVnZXInXHJcbiAgICAnU3RyaW5nJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZyhvcHRpb25zLmJhc2UpXHJcbiAgICAgIGlmIG9wdGlvbnMudXBwZXJDYXNlXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b1VwcGVyQ2FzZSgpXHJcblxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuICAgIHtcclxuICAgICAgYmFzZTogMTBcclxuICAgICAgdXBwZXJDYXNlOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgJ2Jhc2UnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnU3RyaW5nJyxcclxuICAgICdCb29sZWFuJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgb3B0aW9ucy50cmltXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKClcclxuXHJcbiAgICAgIGlmIG9wdGlvbnMuaWdub3JlQ2FzZVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKVxyXG5cclxuICAgICAgaWYgb3B0aW9ucy5zdHJpY3RcclxuICAgICAgICBpZiB2YWx1ZSA9PSBvcHRpb25zLnRydXRoeVswXVxyXG4gICAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgICBlbHNlIGlmIHZhbHVlID09IG9wdGlvbnMuZmFsc2V5WzBdXHJcbiAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgZWxzZVxyXG4gICAgICAgIGZvciB0cnV0aHkgaW4gb3B0aW9ucy50cnV0aHlcclxuICAgICAgICAgIGlmIHZhbHVlID09IHRydXRoeVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgICBmb3IgZmFsc2V5IGluIG9wdGlvbnMuZmFsc2V5XHJcbiAgICAgICAgICBpZiB2YWx1ZSA9PSBmYWxzZXlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcblxyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBCb29sZWFuXCIpXHJcbiAgICB7XHJcbiAgICAgIGlnbm9yZUNhc2U6IHRydWVcclxuICAgICAgc3RyaWN0OiBmYWxzZVxyXG4gICAgICB0cnV0aHk6IFtcclxuICAgICAgICAndHJ1ZSdcclxuICAgICAgICAndCdcclxuICAgICAgICAnMSdcclxuICAgICAgICAnLTEnXHJcbiAgICAgICAgJ3llcydcclxuICAgICAgICAneSdcclxuICAgICAgXVxyXG4gICAgICBmYWxzZXk6IFtcclxuICAgICAgICAnZmFsc2UnXHJcbiAgICAgICAgJ2YnXHJcbiAgICAgICAgJzAnXHJcbiAgICAgICAgJ25vJ1xyXG4gICAgICAgICduJ1xyXG4gICAgICBdXHJcbiAgICAgIHRyaW06IGZhbHNlXHJcbiAgICB9XHJcbiAgICAnc3RyaWN0J1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1N0cmluZydcclxuICAgICdEYXRlJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLnRyaW1cclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKVxyXG5cclxuICAgICAgaWYgb3B0aW9ucy5zdHJpY3RcclxuICAgICAgICBtYXRjaCA9IHZhbHVlLm1hdGNoKG9wdGlvbnMuZm9ybWF0KVxyXG4gICAgICAgIGlmIG5vdCBtYXRjaD9cclxuICAgICAgICAgIHRocm93IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBTdHJpbmcgdG8gRGF0ZScpXHJcblxyXG4gICAgICAgIG51bSA9ICh2YWx1ZSwgZGVmKSAtPlxyXG4gICAgICAgICAgaWYgKHZhbHVlPyBhbmQgdmFsdWUgIT0gJycpIHRoZW4gcGFyc2VGbG9hdCh2YWx1ZSkgZWxzZSBkZWZcclxuXHJcbiAgICAgICAgdHogPSB1bmRlZmluZWRcclxuICAgICAgICBpZiBtYXRjaFs3XT8gYW5kIG1hdGNoWzddICE9ICcnXHJcbiAgICAgICAgICB0eiA9IChudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6SG91cnNdKSAqIDYwICsgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC50ek1pbnV0ZXNdKSkgKiA2MCAqIDEwMDBcclxuICAgICAgICAgIGlmIG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC50elNpZ25dID09ICctJ1xyXG4gICAgICAgICAgICB0eiAqPSAtMVxyXG5cclxuICAgICAgICBpZiBvcHRpb25zLnV0YyBvciB0ej9cclxuICAgICAgICAgIHRpbWUgPSBEYXRlLlVUQyhcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC55ZWFyXSwgMClcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5tb250aF0sIDEpIC0gMVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LmRheV0sIDEpXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuaG91cnNdLCAwKVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1pbnV0ZXNdLCAwKVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnNlY29uZHNdLCAwKVxyXG4gICAgICAgICAgKVxyXG5cclxuICAgICAgICAgIGlmIHR6P1xyXG4gICAgICAgICAgICB0aW1lICs9IHR6XHJcblxyXG4gICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpXHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKFxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnllYXJdLCAwKVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1vbnRoXSwgMSkgLSAxXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuZGF5XSwgMSlcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5ob3Vyc10sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubWludXRlc10sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3Quc2Vjb25kc10sIDApXHJcbiAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwKVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKVxyXG5cclxuICAgICAgaWYgaXNOYU4oZGF0ZS52YWx1ZU9mKCkpXHJcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIFN0cmluZyB0byBEYXRlJylcclxuXHJcbiAgICAgIHJldHVybiBkYXRlXHJcbiAgICB7XHJcbiAgICAgICMgaHR0cHM6Ly93d3cuZGVidWdnZXguY29tL3IvRm5EZjkwaHFuR3VsMVpZdS8wXHJcbiAgICAgIGZvcm1hdDogL14oWzAtOV17NH0pLShbMC05XXsyfSktKFswLTldezJ9KSg/Oig/OlR8XFxzKShbMC05XXsyfSk6KFswLTldezJ9KSg/OjooWzAtOV17Mn0oPzouWzAtOV0rKT8pKT8oPzooXFwrfFxcLSkoWzAtOV17Mn0pOihbMC05XXsyfSkpPyk/JC9cclxuICAgICAgZm9ybWF0RGljdDoge1xyXG4gICAgICAgIHllYXI6IDFcclxuICAgICAgICBtb250aDogMlxyXG4gICAgICAgIGRheTogM1xyXG4gICAgICAgIGhvdXJzOiA0XHJcbiAgICAgICAgbWludXRlczogNVxyXG4gICAgICAgIHNlY29uZHM6IDZcclxuICAgICAgICB0elNpZ246IDdcclxuICAgICAgICB0ekhvdXJzOiA4XHJcbiAgICAgICAgdHpNaW51dGVzOiA5XHJcbiAgICAgIH1cclxuICAgICAgdXRjOiBmYWxzZVxyXG4gICAgICBzdHJpY3Q6IHRydWVcclxuICAgICAgdHJpbTogZmFsc2VcclxuICAgIH1cclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdTdHJpbmcnXHJcbiAgICAnTW9tZW50J1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLnRyaW1cclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKVxyXG5cclxuICAgICAgcmVzdWx0ID0gKG1vbWVudCA/IHJlcXVpcmUoJ21vbWVudCcpKSh2YWx1ZSwgb3B0aW9ucy5mb3JtYXQsIG9wdGlvbnMubGFuZ3VhZ2UsIG9wdGlvbnMuc3RyaWN0KVxyXG4gICAgICBpZiBub3QgcmVzdWx0LmlzVmFsaWQoKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gU3RyaW5nIHRvIE1vbWVudCcpXHJcblxyXG4gICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB7XHJcbiAgICAgIHN0cmljdDogZmFsc2VcclxuICAgICAgbGFuZ3VhZ2U6ICdlbidcclxuICAgICAgZm9ybWF0OiAnTCdcclxuICAgICAgdHJpbTogZmFsc2VcclxuICAgIH1cclxuICAgICdmb3JtYXQnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnU3RyaW5nJyxcclxuICAgICdOdW1iZXIuSW50ZWdlcicsXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICBpZiBvcHRpb25zLmJhc2UgPT0gMTAgYW5kIG5vdCBvcHRpb25zLnN0cmljdFxyXG4gICAgICAgIHRyeVxyXG4gICAgICAgICAgcmV0dXJuIGtvLnR5cGVkLmdldENvbnZlcnRlcignU3RyaW5nJywgJ051bWJlcicpKHZhbHVlLCAwKVxyXG4gICAgICAgIGNhdGNoIGV4XHJcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBOdW1iZXIuSW50ZWdlclwiKVxyXG5cclxuICAgICAgY2hhcnMgPSAnMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6J1xyXG4gICAgICBpZiBub3QgUmVnRXhwKFwiXihcXFxcLXxcXFxcKyk/WyN7Y2hhcnMuc2xpY2UoMCwgb3B0aW9ucy5iYXNlID8gMTApfV0rJFwiLCBpZiBub3Qgb3B0aW9ucy5zdHJpY3QgdGhlbiAnaScpLnRlc3QodmFsdWUpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gI3t2YWx1ZX0gdG8gTnVtYmVyLkludGVnZXJcIilcclxuXHJcbiAgICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgb3B0aW9ucy5iYXNlKVxyXG4gICAge1xyXG4gICAgICBiYXNlOiAxMFxyXG4gICAgICBzdHJpY3Q6IGZhbHNlXHJcbiAgICAgIHRyaW06IGZhbHNlXHJcbiAgICB9XHJcbiAgICAnYmFzZSdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdTdHJpbmcnXHJcbiAgICAnTnVtYmVyJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLnRyaW1cclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKVxyXG5cclxuICAgICAgaWYgbm90IC9eKFxcK3xcXC0pP1swLTldKyhcXC4/KVswLTldKiQvLnRlc3QodmFsdWUpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gI3t2YWx1ZX0gdG8gTnVtYmVyXCIpXHJcblxyXG4gICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUsIG9wdGlvbnMuYmFzZSlcclxuXHJcbiAgICAgIGlmIG9wdGlvbnMuZGVjaW1hbHM/XHJcbiAgICAgICAgdmFsdWUgPSBNYXRoLnJvdW5kMTAodmFsdWUsIC1vcHRpb25zLmRlY2ltYWxzKVxyXG5cclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB7XHJcbiAgICAgIGRlY2ltYWxzOiB1bmRlZmluZWRcclxuICAgICAgdHJpbTogZmFsc2VcclxuICAgIH1cclxuICAgICdkZWNpbWFscydcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdTdHJpbmcnLFxyXG4gICAgJ1VuZGVmaW5lZCcsXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICBpZiB2YWx1ZS5sZW5ndGggIT0gMFxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tICN7dmFsdWV9IHRvIFVuZGVmaW5lZFwiKVxyXG5cclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxyXG4gICAge1xyXG4gICAgICB0cmltOiBmYWxzZVxyXG4gICAgfVxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1VuZGVmaW5lZCcsXHJcbiAgICAnRGF0ZScsXHJcbiAgICAodmFsdWUpIC0+XHJcbiAgICAgIHJldHVybiBuZXcgRGF0ZShOYU4pXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICdNb21lbnQnLFxyXG4gICAgKHZhbHVlKSAtPlxyXG4gICAgICByZXR1cm4gcmVxdWlyZSgnbW9tZW50JykuaW52YWxpZCgpXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICdTdHJpbmcnLFxyXG4gICAgKHZhbHVlKSAtPlxyXG4gICAgICByZXR1cm4gJydcclxuICApXHJcblxyXG4gIHJldHVybiBrb1xyXG5cclxuYXBwbHlLb3RyKGtvKVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
