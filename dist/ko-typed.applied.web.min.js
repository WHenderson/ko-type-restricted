!function(e,t){"function"==typeof define&&define.amd?define(["knockout","is-an"],t):e.ko=t(e.ko,e.isAn)}(this,function(e,t){var r,n=[].slice,o={}.hasOwnProperty;return r=function(e){var r,a,i,u,l,c,f,d,s,p,y,m,v,h,g,w;return e.typed={},u=function(){return!0},a=function(){return!1},i=function(e){return e},v=function(e){return null==e||0===e.length?void 0:t.String.Literal(e)?e:e.join("|")},y=function(e){return e=v(e),t.String.Literal(e)?e.split("|"):[]},m=function(e){var t,r,n,o;for(e=y(e),n=[],t=0,r=e.length;r>t;t++)o=e[t],-1===n.indexOf(o)&&n.push(o);return n},c=function(e){return/^[A-Z]/.test(e)},l=function(e){return t.Function(e)&&null!=e.typeName&&null!=e.typeNames&&null!=e.typeCheck&&null!=e.typeChecks},e.typed.options={validation:{enable:!1,read:!0,write:!0,target:!1,result:!0,message:void 0},exRead:{"catch":!0,catchTrue:function(e){return e instanceof TypeError},catchFalse:a,useDefault:!1,defaultValue:void 0,defaultFunc:void 0},exWrite:{"catch":!0,catchTrue:function(e){return e instanceof TypeError},catchFalse:a,noThrow:!1,useDefault:!1,defaultValue:void 0,defaultFunc:void 0},pure:!0,deferEvaluation:!0},r=function(){var t,r,o,a,i;for(i=arguments[0],a=2<=arguments.length?n.call(arguments,1):[],t=0,r=a.length;r>t;t++)o=a[t],i=e.utils.extend(i,o);return i},f=function(){var e,t,a,i,u,l;return t=arguments[0],l=arguments[1],i=3<=arguments.length?n.call(arguments,2):[],l[t]=u=r.apply(null,[{}].concat(n.call(function(){var r;r=[];for(e in i)o.call(i,e)&&(a=i[e],r.push(null!=a?a[t]:void 0));return r}()))),u["catch"]===!0?u["catch"]=u.catchTrue:u["catch"]===!1&&(u["catch"]=u.catchFalse),u.useDefault&&null==u.defaultFunc&&(u.defaultFunc=function(){return u.defaultValue}),u},d=function(){var e,t;return t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],f.apply(null,["exRead",t].concat(n.call(e)))},s=function(){var e,t;return t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],f.apply(null,["exWrite",t].concat(n.call(e)))},p=function(){var e,t,a,i,u,l;return l=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],t=function(e){return e===!0?{enable:!0}:e===!1?{enable:!1}:e},l.validation=u=r.apply(null,[{}].concat(n.call(function(){var r;r=[];for(e in i)o.call(i,e)&&(a=i[e],r.push(t(null!=a?a.validation:void 0)));return r}()))),u},g=function(e,t,r,n){return function(){var t,o;try{return n()}catch(t){if(o=t,e.exRead["catch"](o)&&(r(o),e.exRead.useDefault))return e.exRead.defaultFunc();throw o}finally{null==o&&r(void 0)}}},w=function(e,t,r,n){return function(o){var a,i;try{return n(o)}catch(a){if(i=a,e.exWrite["catch"](i)&&(r(i),e.exWrite.useDefault&&t(e.exWrite.defaultFunc())),!e.exWrite.noThrow)throw i}finally{null==i&&r(void 0)}}},h=function(t,r,n){var o,a,i;n.validation.enable&&(i=n.validation,(i.target||i.result)&&(i.read||i.write)&&null!=e.validation&&(a=n.validation.read&&n.validation.write?function(){var e,t,n;return null!=(e=null!=(t=r.writeError())?t.message:void 0)?e:null!=(n=r.readError())?n.message:void 0}:n.validation.read?function(){var e;return null!=(e=r.readError())?e.message:void 0}:function(){var e;return null!=(e=r.writeError())?e.message:void 0},o=function(t){var r;t.extend({validatable:{enable:!0}}),r={message:void 0,validator:function(){var e,t;return e=a(),null==e?(r.message=void 0,!0):(r.message=null!=(t=i.message)?t:e,!1)}},e.validation.addAnonymousRule(t,r)},i.target&&o(t),i.result&&o(r)))},e.extenders.type=function(n,a){var i,u,l,f,C,b,S,k,N,D,T,x,E,U;if(t.String.Literal(a)||t.Array(a)?a={type:a}:t.Function(a)&&(a={type:a.typeName,check:a}),f=r({},e.typed.options,e.extenders.type.options,a),d(f,e.typed.options,e.extenders.type.options,a),s(f,e.typed.options,e.extenders.type.options,a),p(f,e.typed.options,e.extenders.type.options,a),a=f,E=y(a.type),E.push.apply(E,function(){var e;e=[];for(l in a)o.call(a,l)&&c(l)&&e.push(l);return e}()),E=m(E),x=v(E),T={},function(){var e,r,n,o;for(o=[],e=0,r=E.length;r>e;e++)l=E[e],o.push(T[l]=null!=(n=a[l])?n:t(l,{returnChecker:!0}));return o}(),N=null!=(b=a.check)?b:function(){return!0},D={},function(){var e,t;t=[];for(l in T)e=T[l],t.push(function(e){return D[l]=function(t){return e(t)&&N(t)}}(e));return t}(),k=function(){return function(e){return N(e)&&(0===E.length||E.some(function(t){return T[t](e)}))}}(),C=e.observable(),U=e.observable(),S=e.computed({pure:a.pure,deferEvaluation:!0,read:g(a,n,C,function(){var e;if(e=n(),!k(e))throw new TypeError("Unexpected internal type. Expected "+x+", got "+t(e));return e}),write:w(a,n,U,function(e){if(!k(e))throw new TypeError("Unexpected external type. Expected "+x+", received "+t(e));n(e)})}),S.typeName=x,S.typeNames=E,S.typeCheck=k,S.typeChecks=D,S.readError=C,S.writeError=U,h(n,S,a),!a.deferEvaluation)try{S.peek()}catch(i){throw u=i,S.dispose(),u}return S},e.extenders.type.options={},e.extenders.convert=function(n,a){var f,y,C,b,S;if(a===!1)return n;if(function(){var i,f,y,h,g,w,C,b,S,k,N,D,T,x,E,U;t.String(a)||t.Array(a)?a={type:a}:a===!0&&(a={}),a=r({},e.typed.options,e.extenders.convert.options,a),b={checkSelf:null!=(S=a.check)?S:u,read:a.read,write:a.write,checks:{},checkers:[],isTyped:l(n),ignoreDefaultConverters:a.ignoreDefaultConverters,pure:a.pure,deferEvaluation:a.deferEvaluation,types:m(a.type)},d(b,e.typed.options,e.extenders.convert.options,a),s(b,e.typed.options,e.extenders.convert.options,a),p(b,e.typed.options,e.extenders.convert.options,a);for(f in a)if(o.call(a,f)&&(y=a[f],c(f))){y=null!=(k=a[f])?k:{},b[f]={checkSelf:y.check,read:y.read,write:y.write,types:m(y.type)};for(g in y)o.call(y,g)&&c(g)&&(w=null!=(N=null!=(D=a[f])?D[g]:void 0)?N:{},b[f][g]={read:w.read,write:w.write})}for(b.type=v(b.types),T=b.types,h=0,C=T.length;C>h;h++)f=T[h],i=null!=(x=null!=(E=null!=(U=b[f])?U.checkSelf:void 0)?E:t(f,{returnChecker:!0}))?x:u,b.checks[f]=function(e){return function(t){return b.checkSelf(t)&&e(t)}}(i),b.checkers.push(b.checks[f]);return b.check=function(e){return b.checkSelf(e)&&(0===b.checkers.length||b.checkers.some(function(t){return t(e)}))},a=b}(),C=e.observable(),S=e.observable(),b=e.computed({pure:a.pure,deferEvaluation:!0,read:g(a,n,C,function(){var r,o,u,l,c,f,d,s,p,y,m,v,h,g,w,C,b,S,k,N;for(y=n(),c=void 0,N=function(e,t){var r,n;if(null!=e){try{c=e(y,t)}catch(r){if(n=r,!(n instanceof TypeError))throw n}if(null==n&&a.check(c))return!0}return!1},u=a.types,0===u.length&&(u=[t(y)]),f=0,h=u.length;h>f;f++)for(o=u[f],l=null!=(C=a[o])?C:{},s=null!=(b=l.types)?b:[],0===s.length&&(s=a.isTyped?n.typeNames:[t(y)]),m=0,g=s.length;g>m;m++)if(d=s[m],!a.isTyped||("function"==typeof(r=n.typeChecks)[d]?r[d](y):void 0))if(p=null!=(S=l[d])?S:{},null!=p.read){if(N(p.read,p.readOptions))return c}else if(d===o){if(null==l.read&&null==a.read&&N(i))return c}else if(!a.ignoreDefaultConverters&&N(e.typed.getConverter(d,o),p.readOptions))return c;for(v=0,w=u.length;w>v;v++)if(o=u[v],l=null!=(k=a[o])?k:{},N(l.read,l.readOptions))return c;if(N(a.read,a.readOptions))return c;throw null!=a.type?new TypeError("Unable to convert from internal type "+t(y)+" to external type "+a.type):new TypeError("Unable to convert from internal type "+t(y))}),write:w(a,n,S,function(r){var o,u,l,c,f,d,s,p,y,m,v,h,g,w,C,b,S;if(S=function(e,t){var o,a,i;if(null!=e){try{i=e(r,t)}catch(o){if(a=o,!(a instanceof TypeError))throw a}if(null==a)return n(i),!0}return!1},null==a.checkSelf||a.checkSelf(r)){for(u=a.types,0===u.length&&(u=[t(r)]),c=0,m=u.length;m>c;c++)if(o=u[c],l=null!=(g=a[o])?g:{},(null==l.checkSelf||l.checkSelf(r))&&(null!=l.checkSelf||t(r,o)))for(d=null!=(w=l.types)?w:[],0===d.length&&(d=a.isTyped?n.typeNames:[t(r)]),p=0,v=d.length;v>p;p++)if(f=d[p],s=null!=(C=l[f])?C:{},null!=s.write){if(S(s.write,s.writeOptions))return}else if(o===f){if(null==l.write&&null==a.write&&(!a.isTyped||n.typeChecks[o](r))&&S(i))return}else if(!a.ignoreDefaultConverters&&S(e.typed.getConverter(o,f),s.writeOptions))return;for(y=0,h=u.length;h>y;y++)if(o=u[y],l=null!=(b=a[o])?b:{},(null==l.checkSelf||l.checkSelf(r))&&(null!=l.checkSelf||t(r,o))&&S(l.write,l.writeOptions))return;if(S(a.write,a.writeOptions))return}throw a.isTyped?new TypeError("Unable to convert from external type "+t(r)+" to internal type "+n.typeName):new TypeError("Unable to convert from external type "+t(r))})}),b.typeName=a.type,b.typeNames=a.types,b.typeCheck=a.check,b.typeChecks=a.checks,b.readError=C,b.writeError=S,h(n,b,a),!a.deferEvaluation)try{b.peek()}catch(f){throw y=f,b.dispose(),y}return b},e.extenders.convert.options={},function(){var r;e.typed._converters=r={},e.typed.addConverter=function(n,o,a,i,u){var l;return"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(c(n),"Invalid typeName "+n),"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(c(o),"Invalid typeName "+n),l=null!=i?null!=u?function(r,n){var o;return 2!==arguments.length||t.Object(n)||(o={},o[u]=n,n=o),a(r,e.utils.extend(e.utils.extend({},l.options),n))}:function(t,r){return a(t,e.utils.extend(e.utils.extend({},l.options),r))}:function(e){return a(e)},l.options=i,null==r[n]&&(r[n]={}),r[n][o]=l,e.typed},e.typed.getConverter=function(e,t){var n;return null!=(n=r[e])?n[t]:void 0},e.typed.removeConverter=function(t,n){var o,a;return null!=(null!=(o=r[t])?o[n]:void 0)&&null!=(a=r[t])&&delete a[n],e.typed}}(),function(){var e;e=function(e,t,r){return null==r||0===+r?e(t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!==0?NaN:(t=t.toString().split("e"),t=e(+(t[0]+"e"+(t[1]?+t[1]-r:-r))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+r:r))))},null==Math.round10&&(Math.round10=function(t,r){return e(Math.round,t,r)}),null==Math.floor10&&(Math.floor10=function(t,r){return e(Math.floor,t,r)}),null==Math.ceil10&&(Math.ceil10=function(t,r){return e(Math.ceil,t,r)})}(),e.typed.addConverter("Boolean","Number.Integer",function(e,t){return e?t.truthy:t.falsey},{truthy:1,falsey:0},"truthy"),e.typed.addConverter("Boolean","Number",function(e,t){return e?t.truthy:t.falsey},{truthy:1,falsey:0},"truthy"),e.typed.addConverter("Boolean","String",function(e,t){return e=e?t.truthy:t.falsey,t.upperCase&&(e=e.toUpperCase()),e},{upperCase:!1,truthy:"true",falsey:"false"},"upperCase"),e.typed.addConverter("Date","Moment",function(e,t){return("undefined"!=typeof moment&&null!==moment?moment:require("moment"))(e)}),e.typed.addConverter("Date","String",function(e,t){var r;return isNaN(e.valueOf())?"":(r=t.formats[t.format],e[r].apply(e,t.params))},{formats:{date:"toDateString",iso:"toISOString",json:"toJSON",localeDate:"toLocaleDateString",localeTime:"toLocaleTimeString",locale:"toLocaleString",time:"toTimeString",utc:"toUTCString","default":"toString"},format:"default",params:[]},"format"),e.typed.addConverter("Date","Undefined",function(e,t){if(!isNaN(e.valueOf()))throw new TypeError("Unable to convert from valid Date to Undefined")}),e.typed.addConverter("Moment","Date",function(e,t){return e.toDate()}),e.typed.addConverter("Moment","String",function(e,t){return e.isValid()?e.locale(t.locale).format(t.format):""},{locale:"en",format:"L"},"format"),e.typed.addConverter("Moment","Undefined",function(e,t){if(e.isValid())throw new TypeError("Unable to convert from valid Moment to Undefined")}),e.typed.addConverter("Number","Boolean",function(e,t){if(null!=t.falsey&&e===t.falsey)return!1;if(null!=t.truthy&&e===t.truthy)return!0;if(null==t.falsey)return!1;if(null==t.truthy)return!0;throw new TypeError("Cannot convert from "+e+" to Boolean")},{truthy:void 0,falsey:0}),e.typed.addConverter("Number","Number.Integer",function(e,r){var n;if(null==r.mode){if(!t.Number.Integer(e))throw new TypeError("Cannot convert from Number to Number.Integer. Number is not an integer");return e}return(n="string"==typeof r.mode?Math[r.mode]:r.mode)(e)},{mode:void 0},"mode"),e.typed.addConverter("Number","String",function(e,t){return null!=t.decimals?(e=Math.round10(e,-t.decimals),e=e.toFixed(t.decimals)):e=e.toString(),e},{decimals:void 0},"decimals"),e.typed.addConverter("Number.Integer","Boolean",function(e,t){if(null!=t.falsey&&e===t.falsey)return!1;if(null!=t.truthy&&e===t.truthy)return!0;if(null==t.falsey)return!1;if(null==t.truthy)return!0;throw new TypeError("Cannot convert from "+e+" to Boolean")},{truthy:void 0,falsey:0}),e.typed.addConverter("Number.Integer","Number",function(e,t){return e}),e.typed.addConverter("Number.Integer","String",function(e,t){return e=e.toString(t.base),t.upperCase&&(e=e.toUpperCase()),e},{base:10,upperCase:!1},"base"),e.typed.addConverter("String","Boolean",function(e,t){var r,n,o,a,i,u,l,c;if(t.trim&&(e=e.trim()),t.ignoreCase&&(e=e.toLowerCase()),t.strict){if(e===t.truthy[0])return!0;if(e===t.falsey[0])return!1}else{for(u=t.truthy,n=0,a=u.length;a>n;n++)if(c=u[n],e===c)return!0;for(l=t.falsey,o=0,i=l.length;i>o;o++)if(r=l[o],e===r)return!1}throw new TypeError("Cannot convert from "+e+" to Boolean")},{ignoreCase:!0,strict:!1,truthy:["true","t","1","-1","yes","y"],falsey:["false","f","0","no","n"],trim:!1},"strict"),e.typed.addConverter("String","Date",function(e,t){var r,n,o,a,i;if(t.trim&&(e=e.trim()),t.strict){if(n=e.match(t.format),null==n)throw TypeError("Unable to convert from String to Date");o=function(e,t){return null!=e&&""!==e?parseFloat(e):t},i=void 0,null!=n[7]&&""!==n[7]&&(i=60*(60*o(n[t.formatDict.tzHours])+o(n[t.formatDict.tzMinutes]))*1e3,"-"===n[t.formatDict.tzSign]&&(i*=-1)),t.utc||null!=i?(a=Date.UTC(o(n[t.formatDict.year],0),o(n[t.formatDict.month],1)-1,o(n[t.formatDict.day],1),o(n[t.formatDict.hours],0),o(n[t.formatDict.minutes],0),o(n[t.formatDict.seconds],0)),null!=i&&(a+=i),r=new Date(a)):(r=new Date(o(n[t.formatDict.year],0),o(n[t.formatDict.month],1)-1,o(n[t.formatDict.day],1),o(n[t.formatDict.hours],0),o(n[t.formatDict.minutes],0),o(n[t.formatDict.seconds],0)),r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3))}else r=new Date(e);if(isNaN(r.valueOf()))throw TypeError("Unable to convert from String to Date");return r},{format:/^([0-9]{4})-([0-9]{2})-([0-9]{2})(?:(?:T|\s)([0-9]{2}):([0-9]{2})(?::([0-9]{2}(?:.[0-9]+)?))?(?:(\+|\-)([0-9]{2}):([0-9]{2}))?)?$/,formatDict:{year:1,month:2,day:3,hours:4,minutes:5,seconds:6,tzSign:7,tzHours:8,tzMinutes:9},utc:!1,strict:!0,trim:!1}),e.typed.addConverter("String","Moment",function(e,t){var r;if(t.trim&&(e=e.trim()),r=("undefined"!=typeof moment&&null!==moment?moment:require("moment"))(e,t.format,t.language,t.strict),!r.isValid())throw new TypeError("Unable to convert from String to Moment");return r},{strict:!1,language:"en",format:"L",trim:!1},"format"),e.typed.addConverter("String","Number.Integer",function(t,r){var n,o,a,i;if(r.trim&&(t=t.trim()),10===r.base&&!r.strict)try{return e.typed.getConverter("String","Number")(t,0)}catch(o){throw a=o,new TypeError("Unable to convert from "+t+" to Number.Integer")}if(n="0123456789abcdefghijklmnopqrstuvwxyz",!RegExp("^(\\-|\\+)?["+n.slice(0,null!=(i=r.base)?i:10)+"]+$",r.strict?void 0:"i").test(t))throw new TypeError("Unable to convert from "+t+" to Number.Integer");return parseInt(t,r.base)},{base:10,strict:!1,trim:!1},"base"),e.typed.addConverter("String","Number",function(e,t){if(t.trim&&(e=e.trim()),!/^(\+|\-)?[0-9]+(\.?)[0-9]*$/.test(e))throw new TypeError("Unable to convert from "+e+" to Number");return e=parseFloat(e,t.base),null!=t.decimals&&(e=Math.round10(e,-t.decimals)),e},{decimals:void 0,trim:!1},"decimals"),e.typed.addConverter("String","Undefined",function(e,t){if(t.trim&&(e=e.trim()),0!==e.length)throw new TypeError("Unable to convert from "+e+" to Undefined")},{trim:!1}),e.typed.addConverter("Undefined","Date",function(e){return new Date(NaN)}),e.typed.addConverter("Undefined","Moment",function(e){return require("moment").invalid()}),e.typed.addConverter("Undefined","String",function(e){return""}),e},r(e),e});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtvLXR5cGVkLmFwcGxpZWQud2ViLmpzIiwia28tdHlwZWQuYXBwbGllZC5jb2ZmZWUiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJrbyIsImlzQW4iLCJ0aGlzIiwiYXBwbHlLb3RyIiwic2xpY2UiLCJoYXNQcm9wIiwiaGFzT3duUHJvcGVydHkiLCJleHRlbmQiLCJmbkZhbHNlIiwiZm5JZGVudGl0eSIsImZuVHJ1ZSIsImlzVHlwZWQiLCJpc1ZhbGlkVHlwZU5hbWUiLCJub3JtYWxpemVFeCIsIm5vcm1hbGl6ZUV4UmVhZCIsIm5vcm1hbGl6ZUV4V3JpdGUiLCJub3JtYWxpemVWYWxpZGF0aW9uIiwidHlwZU5hbWVUb0FycmF5IiwidHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXkiLCJ0eXBlTmFtZVRvU3RyaW5nIiwidmFsaWRhdGUiLCJ3cmFwUmVhZCIsIndyYXBXcml0ZSIsInR5cGVkIiwieCIsInZhbHVlIiwibGVuZ3RoIiwiU3RyaW5nIiwiTGl0ZXJhbCIsImpvaW4iLCJzcGxpdCIsImkiLCJsZW4iLCJyZXN1bHQiLCJ0eXBlTmFtZSIsImluZGV4T2YiLCJwdXNoIiwidGVzdCIsIkZ1bmN0aW9uIiwidHlwZU5hbWVzIiwidHlwZUNoZWNrIiwidHlwZUNoZWNrcyIsIm9wdGlvbnMiLCJ2YWxpZGF0aW9uIiwiZW5hYmxlIiwicmVhZCIsIndyaXRlIiwidGFyZ2V0IiwibWVzc2FnZSIsImV4UmVhZCIsImNhdGNoIiwiY2F0Y2hUcnVlIiwiZXgiLCJUeXBlRXJyb3IiLCJjYXRjaEZhbHNlIiwidXNlRGVmYXVsdCIsImRlZmF1bHRWYWx1ZSIsImRlZmF1bHRGdW5jIiwiZXhXcml0ZSIsIm5vVGhyb3ciLCJwdXJlIiwiZGVmZXJFdmFsdWF0aW9uIiwib2JqZWN0Iiwib2JqZWN0cyIsImFyZ3VtZW50cyIsImNhbGwiLCJ1dGlscyIsImtleSIsIm5hbWUiLCJvcHQiLCJhcHBseSIsImNvbmNhdCIsInJlc3VsdHMiLCJub3JtIiwidiIsInJlYWRFcnJvciIsImVycm9yIiwid3JpdGVFcnJvciIsImFwcGx5VmFsaWRhdGlvbiIsInJlZiIsInJlZjEiLCJyZWYyIiwiYmFzZSIsInJ1bGUiLCJ2YWxpZGF0YWJsZSIsInZhbGlkYXRvciIsIm0iLCJhZGRBbm9ueW1vdXNSdWxlIiwiZXh0ZW5kZXJzIiwidHlwZSIsIm5vcm1hbCIsInR5cGVDaGVja1NpbXBsZSIsInR5cGVDaGVja3NTaW1wbGUiLCJBcnJheSIsImNoZWNrIiwicmV0dXJuQ2hlY2tlciIsInNvbWUiLCJvYnNlcnZhYmxlIiwiY29tcHV0ZWQiLCJpbnRlcm5hbFZhbHVlIiwiZXh0ZXJuYWxWYWx1ZSIsInBlZWsiLCJkaXNwb3NlIiwiY29udmVydCIsImNoZWNrZXIiLCJleHRUeXBlTmFtZSIsImV4dFR5cGVPcHRpb25zIiwiaW50VHlwZU5hbWUiLCJpbnRUeXBlT3B0aW9ucyIsInJlZjMiLCJyZWY0IiwicmVmNSIsInJlZjYiLCJyZWY3IiwiY2hlY2tTZWxmIiwiY2hlY2tzIiwiY2hlY2tlcnMiLCJpZ25vcmVEZWZhdWx0Q29udmVydGVycyIsInR5cGVzIiwiYmFzZTEiLCJleHRUeXBlTmFtZXMiLCJpbnRUeXBlTmFtZXMiLCJqIiwiayIsImxlbjEiLCJsZW4yIiwidHJ5UmVhZCIsInJlYWRPcHRpb25zIiwiZ2V0Q29udmVydGVyIiwidHJ5V3JpdGUiLCJ3cml0ZU9wdGlvbnMiLCJjb252ZXJ0ZXJzIiwiX2NvbnZlcnRlcnMiLCJhZGRDb252ZXJ0ZXIiLCJmcm9tVHlwZU5hbWUiLCJ0b1R5cGVOYW1lIiwiY29udmVydGVyIiwiZGVmYXVsdE9wdGlvbnMiLCJkZWZhdWx0T3B0aW9uIiwid3JhcHBlciIsImNvbnNvbGUiLCJhc3NlcnQiLCJvIiwiT2JqZWN0IiwicmVtb3ZlQ29udmVydGVyIiwiZGVjaW1hbEFkanVzdCIsImV4cCIsImlzTmFOIiwiTmFOIiwidG9TdHJpbmciLCJNYXRoIiwicm91bmQxMCIsInJvdW5kIiwiZmxvb3IxMCIsImZsb29yIiwiY2VpbDEwIiwiY2VpbCIsInRydXRoeSIsImZhbHNleSIsInVwcGVyQ2FzZSIsInRvVXBwZXJDYXNlIiwibW9tZW50IiwicmVxdWlyZSIsIm1ldGhvZCIsInZhbHVlT2YiLCJmb3JtYXRzIiwiZm9ybWF0IiwicGFyYW1zIiwiZGF0ZSIsImlzbyIsImpzb24iLCJsb2NhbGVEYXRlIiwibG9jYWxlVGltZSIsImxvY2FsZSIsInRpbWUiLCJ1dGMiLCJkZWZhdWx0IiwidG9EYXRlIiwiaXNWYWxpZCIsIm1vZGUiLCJOdW1iZXIiLCJJbnRlZ2VyIiwiZGVjaW1hbHMiLCJ0b0ZpeGVkIiwidHJpbSIsImlnbm9yZUNhc2UiLCJ0b0xvd2VyQ2FzZSIsInN0cmljdCIsIm1hdGNoIiwibnVtIiwidHoiLCJkZWYiLCJwYXJzZUZsb2F0IiwiZm9ybWF0RGljdCIsInR6SG91cnMiLCJ0ek1pbnV0ZXMiLCJ0elNpZ24iLCJEYXRlIiwiVVRDIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInNldFRpbWUiLCJnZXRUaW1lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJsYW5ndWFnZSIsImNoYXJzIiwiUmVnRXhwIiwicGFyc2VJbnQiLCJpbnZhbGlkIl0sIm1hcHBpbmdzIjoiQ0FBRSxTQUFTQSxFQUFNQyxHQUNPLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFDekNELFFBQVEsV0FBWSxTQUFVRCxHQUU5QkQsRUFBS0ksR0FBS0gsRUFBUUQsRUFBS0ksR0FBSUosRUFBS0ssT0FFbENDLEtBQU0sU0FBVUYsRUFBSUMsR0FDdEIsR0FBSUUsR0NQSkMsS0FBQUEsTURTRUMsS0FBYUMsY0FnaENmLE9DemhDQUgsR0FBWSxTQUFDSCxHQUNYLEdBQUFPLEdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLENBb21DQSxPQXBtQ0F0QixHQUFHdUIsU0FFSGIsRUFBUyxXRFlQLE9DWmEsR0FDZkYsRUFBVSxXRGNS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QUV0RCxPQUFPMEwsVUFBUzFMLEVBQU9pQixFQUFRd0MsUUFFL0JBLEtBQU0sR0FDTnlHLFFBQVEsRUFDUkgsTUFBTSxHQUVSLFFBR0Z4TCxFQUFHdUIsTUFBTThHLGFBQ1AsU0FDQSxTQUNBLFNBQUM1RyxFQUFPaUIsR0FJTixHQUhHQSxFQUFROEksT0FDVC9KLEVBQVFBLEVBQU0rSixTQUVULDhCQUE4Qm5KLEtBQUtaLEdBQ3hDLEtBQVUsSUFBQTRCLFdBQVUsMEJBQTBCNUIsRUFBTSxhQU90RCxPQUxBQSxHQUFRdUssV0FBV3ZLLEVBQU9pQixFQUFRd0MsTUFFL0IsTUFBQXhDLEVBQUE0SSxXQUNEN0osRUFBUTZILEtBQUtDLFFBQVE5SCxHQUFRaUIsRUFBUTRJLFdBRWhDN0osSUFFUDZKLFNBQVUsT0FDVkUsTUFBTSxHQUVSLFlBR0Z4TCxFQUFHdUIsTUFBTThHLGFBQ1AsU0FDQSxZQUNBLFNBQUM1RyxFQUFPaUIsR0FJTixHQUhHQSxFQUFROEksT0FDVC9KLEVBQVFBLEVBQU0rSixRQUVHLElBQWhCL0osRUFBTUMsT0FDUCxLQUFVLElBQUEyQixXQUFVLDBCQUEwQjVCLEVBQU0sbUJBSXREK0osTUFBTSxJQUlWeEwsRUFBR3VCLE1BQU04RyxhQUNQLFlBQ0EsT0FDQSxTQUFDNUcsR0FDQyxNQUFXLElBQUE0SyxNQUFLakQsT0FHcEJwSixFQUFHdUIsTUFBTThHLGFBQ1AsWUFDQSxTQUNBLFNBQUM1RyxHQUNDLE1BQU95SSxTQUFRLFVBQVVrRCxZQUc3QnBOLEVBQUd1QixNQUFNOEcsYUFDUCxZQUNBLFNBQ0EsU0FBQzVHLEdBQ0MsTUFBTyxLQUdKekIsR0FFVEcsRUFBVUgsR0Q5RUhBIiwiZmlsZSI6ImtvLXR5cGVkLmFwcGxpZWQud2ViLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xyXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgIGRlZmluZShbJ2tub2Nrb3V0JywgJ2lzLWFuJ10sIGZhY3RvcnkpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByb290LmtvID0gZmFjdG9yeShyb290LmtvLCByb290LmlzQW4pO1xyXG4gIH1cclxufSh0aGlzLCBmdW5jdGlvbiAoa28sIGlzQW4pIHtcclxudmFyIGFwcGx5S290cixcbiAgc2xpY2UgPSBbXS5zbGljZSxcbiAgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5O1xuXG5hcHBseUtvdHIgPSBmdW5jdGlvbihrbykge1xuICB2YXIgZXh0ZW5kLCBmbkZhbHNlLCBmbklkZW50aXR5LCBmblRydWUsIGlzVHlwZWQsIGlzVmFsaWRUeXBlTmFtZSwgbm9ybWFsaXplRXgsIG5vcm1hbGl6ZUV4UmVhZCwgbm9ybWFsaXplRXhXcml0ZSwgbm9ybWFsaXplVmFsaWRhdGlvbiwgdHlwZU5hbWVUb0FycmF5LCB0eXBlTmFtZVRvRGlzdGluY3RBcnJheSwgdHlwZU5hbWVUb1N0cmluZywgdmFsaWRhdGUsIHdyYXBSZWFkLCB3cmFwV3JpdGU7XG4gIGtvLnR5cGVkID0ge307XG4gIGZuVHJ1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9O1xuICBmbkZhbHNlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICBmbklkZW50aXR5ID0gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB4O1xuICB9O1xuICB0eXBlTmFtZVRvU3RyaW5nID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAoKHZhbHVlID09IG51bGwpIHx8IHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHZvaWQgMDtcbiAgICB9IGVsc2UgaWYgKGlzQW4uU3RyaW5nLkxpdGVyYWwodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWx1ZS5qb2luKCd8Jyk7XG4gICAgfVxuICB9O1xuICB0eXBlTmFtZVRvQXJyYXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhbHVlID0gdHlwZU5hbWVUb1N0cmluZyh2YWx1ZSk7XG4gICAgaWYgKGlzQW4uU3RyaW5nLkxpdGVyYWwodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUuc3BsaXQoJ3wnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfTtcbiAgdHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciBpLCBsZW4sIHJlc3VsdCwgdHlwZU5hbWU7XG4gICAgdmFsdWUgPSB0eXBlTmFtZVRvQXJyYXkodmFsdWUpO1xuICAgIHJlc3VsdCA9IFtdO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0eXBlTmFtZSA9IHZhbHVlW2ldO1xuICAgICAgaWYgKHJlc3VsdC5pbmRleE9mKHR5cGVOYW1lKSA9PT0gLTEpIHtcbiAgICAgICAgcmVzdWx0LnB1c2godHlwZU5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBpc1ZhbGlkVHlwZU5hbWUgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiAvXltBLVpdLy50ZXN0KHZhbHVlKTtcbiAgfTtcbiAgaXNUeXBlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGlzQW4uRnVuY3Rpb24odmFsdWUpICYmICh2YWx1ZS50eXBlTmFtZSAhPSBudWxsKSAmJiAodmFsdWUudHlwZU5hbWVzICE9IG51bGwpICYmICh2YWx1ZS50eXBlQ2hlY2sgIT0gbnVsbCkgJiYgKHZhbHVlLnR5cGVDaGVja3MgIT0gbnVsbCk7XG4gIH07XG4gIGtvLnR5cGVkLm9wdGlvbnMgPSB7XG4gICAgdmFsaWRhdGlvbjoge1xuICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgIHJlYWQ6IHRydWUsXG4gICAgICB3cml0ZTogdHJ1ZSxcbiAgICAgIHRhcmdldDogZmFsc2UsXG4gICAgICByZXN1bHQ6IHRydWUsXG4gICAgICBtZXNzYWdlOiB2b2lkIDBcbiAgICB9LFxuICAgIGV4UmVhZDoge1xuICAgICAgXCJjYXRjaFwiOiB0cnVlLFxuICAgICAgY2F0Y2hUcnVlOiBmdW5jdGlvbihleCkge1xuICAgICAgICByZXR1cm4gZXggaW5zdGFuY2VvZiBUeXBlRXJyb3I7XG4gICAgICB9LFxuICAgICAgY2F0Y2hGYWxzZTogZm5GYWxzZSxcbiAgICAgIHVzZURlZmF1bHQ6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiB2b2lkIDAsXG4gICAgICBkZWZhdWx0RnVuYzogdm9pZCAwXG4gICAgfSxcbiAgICBleFdyaXRlOiB7XG4gICAgICBcImNhdGNoXCI6IHRydWUsXG4gICAgICBjYXRjaFRydWU6IGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgIHJldHVybiBleCBpbnN0YW5jZW9mIFR5cGVFcnJvcjtcbiAgICAgIH0sXG4gICAgICBjYXRjaEZhbHNlOiBmbkZhbHNlLFxuICAgICAgbm9UaHJvdzogZmFsc2UsXG4gICAgICB1c2VEZWZhdWx0OiBmYWxzZSxcbiAgICAgIGRlZmF1bHRWYWx1ZTogdm9pZCAwLFxuICAgICAgZGVmYXVsdEZ1bmM6IHZvaWQgMFxuICAgIH0sXG4gICAgcHVyZTogdHJ1ZSxcbiAgICBkZWZlckV2YWx1YXRpb246IHRydWVcbiAgfTtcbiAgZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGksIGxlbiwgb2JqZWN0LCBvYmplY3RzLCByb290O1xuICAgIHJvb3QgPSBhcmd1bWVudHNbMF0sIG9iamVjdHMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSBvYmplY3RzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBvYmplY3QgPSBvYmplY3RzW2ldO1xuICAgICAgcm9vdCA9IGtvLnV0aWxzLmV4dGVuZChyb290LCBvYmplY3QpO1xuICAgIH1cbiAgICByZXR1cm4gcm9vdDtcbiAgfTtcbiAgbm9ybWFsaXplRXggPSBmdW5jdGlvbigpIHtcbiAgICB2YXIga2V5LCBuYW1lLCBvYmplY3QsIG9iamVjdHMsIG9wdCwgcm9vdDtcbiAgICBuYW1lID0gYXJndW1lbnRzWzBdLCByb290ID0gYXJndW1lbnRzWzFdLCBvYmplY3RzID0gMyA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpIDogW107XG4gICAgcm9vdFtuYW1lXSA9IG9wdCA9IGV4dGVuZC5hcHBseShudWxsLCBbe31dLmNvbmNhdChzbGljZS5jYWxsKChmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXN1bHRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChrZXkgaW4gb2JqZWN0cykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvYmplY3RzLCBrZXkpKSBjb250aW51ZTtcbiAgICAgICAgb2JqZWN0ID0gb2JqZWN0c1trZXldO1xuICAgICAgICByZXN1bHRzLnB1c2gob2JqZWN0ICE9IG51bGwgPyBvYmplY3RbbmFtZV0gOiB2b2lkIDApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSkoKSkpKTtcbiAgICBpZiAob3B0W1wiY2F0Y2hcIl0gPT09IHRydWUpIHtcbiAgICAgIG9wdFtcImNhdGNoXCJdID0gb3B0LmNhdGNoVHJ1ZTtcbiAgICB9IGVsc2UgaWYgKG9wdFtcImNhdGNoXCJdID09PSBmYWxzZSkge1xuICAgICAgb3B0W1wiY2F0Y2hcIl0gPSBvcHQuY2F0Y2hGYWxzZTtcbiAgICB9XG4gICAgaWYgKG9wdC51c2VEZWZhdWx0ICYmIChvcHQuZGVmYXVsdEZ1bmMgPT0gbnVsbCkpIHtcbiAgICAgIG9wdC5kZWZhdWx0RnVuYyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gb3B0LmRlZmF1bHRWYWx1ZTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBvcHQ7XG4gIH07XG4gIG5vcm1hbGl6ZUV4UmVhZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvYmplY3RzLCByb290O1xuICAgIHJvb3QgPSBhcmd1bWVudHNbMF0sIG9iamVjdHMgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkgOiBbXTtcbiAgICByZXR1cm4gbm9ybWFsaXplRXguYXBwbHkobnVsbCwgWydleFJlYWQnLCByb290XS5jb25jYXQoc2xpY2UuY2FsbChvYmplY3RzKSkpO1xuICB9O1xuICBub3JtYWxpemVFeFdyaXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9iamVjdHMsIHJvb3Q7XG4gICAgcm9vdCA9IGFyZ3VtZW50c1swXSwgb2JqZWN0cyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIHJldHVybiBub3JtYWxpemVFeC5hcHBseShudWxsLCBbJ2V4V3JpdGUnLCByb290XS5jb25jYXQoc2xpY2UuY2FsbChvYmplY3RzKSkpO1xuICB9O1xuICBub3JtYWxpemVWYWxpZGF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGtleSwgbm9ybSwgb2JqZWN0LCBvYmplY3RzLCBvcHQsIHJvb3Q7XG4gICAgcm9vdCA9IGFyZ3VtZW50c1swXSwgb2JqZWN0cyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIG5vcm0gPSBmdW5jdGlvbih2KSB7XG4gICAgICBpZiAodiA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVuYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmICh2ID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVuYWJsZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB2O1xuICAgICAgfVxuICAgIH07XG4gICAgcm9vdFsndmFsaWRhdGlvbiddID0gb3B0ID0gZXh0ZW5kLmFwcGx5KG51bGwsIFt7fV0uY29uY2F0KHNsaWNlLmNhbGwoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGtleSBpbiBvYmplY3RzKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9iamVjdHMsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICBvYmplY3QgPSBvYmplY3RzW2tleV07XG4gICAgICAgIHJlc3VsdHMucHVzaChub3JtKG9iamVjdCAhPSBudWxsID8gb2JqZWN0Wyd2YWxpZGF0aW9uJ10gOiB2b2lkIDApKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pKCkpKSk7XG4gICAgcmV0dXJuIG9wdDtcbiAgfTtcbiAgd3JhcFJlYWQgPSBmdW5jdGlvbihvcHRpb25zLCB0YXJnZXQsIHJlYWRFcnJvciwgcmVhZCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBlcnJvciwgZXg7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gcmVhZCgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXggPSBlcnJvcjtcbiAgICAgICAgaWYgKG9wdGlvbnMuZXhSZWFkW1wiY2F0Y2hcIl0oZXgpKSB7XG4gICAgICAgICAgcmVhZEVycm9yKGV4KTtcbiAgICAgICAgICBpZiAob3B0aW9ucy5leFJlYWQudXNlRGVmYXVsdCkge1xuICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuZXhSZWFkLmRlZmF1bHRGdW5jKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IGV4O1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKGV4ID09IG51bGwpIHtcbiAgICAgICAgICByZWFkRXJyb3Iodm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH07XG4gIHdyYXBXcml0ZSA9IGZ1bmN0aW9uKG9wdGlvbnMsIHRhcmdldCwgd3JpdGVFcnJvciwgd3JpdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBlcnJvciwgZXg7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gd3JpdGUodmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXggPSBlcnJvcjtcbiAgICAgICAgaWYgKG9wdGlvbnMuZXhXcml0ZVtcImNhdGNoXCJdKGV4KSkge1xuICAgICAgICAgIHdyaXRlRXJyb3IoZXgpO1xuICAgICAgICAgIGlmIChvcHRpb25zLmV4V3JpdGUudXNlRGVmYXVsdCkge1xuICAgICAgICAgICAgdGFyZ2V0KG9wdGlvbnMuZXhXcml0ZS5kZWZhdWx0RnVuYygpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvcHRpb25zLmV4V3JpdGUubm9UaHJvdykge1xuICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICB9XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZXggPT0gbnVsbCkge1xuICAgICAgICAgIHdyaXRlRXJyb3Iodm9pZCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH07XG4gIHZhbGlkYXRlID0gZnVuY3Rpb24odGFyZ2V0LCByZXN1bHQsIG9wdGlvbnMpIHtcbiAgICB2YXIgYXBwbHlWYWxpZGF0aW9uLCBtZXNzYWdlLCB2YWxpZGF0aW9uO1xuICAgIGlmICghb3B0aW9ucy52YWxpZGF0aW9uLmVuYWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YWxpZGF0aW9uID0gb3B0aW9ucy52YWxpZGF0aW9uO1xuICAgIGlmICgoIXZhbGlkYXRpb24udGFyZ2V0ICYmICF2YWxpZGF0aW9uLnJlc3VsdCkgfHwgKCF2YWxpZGF0aW9uLnJlYWQgJiYgIXZhbGlkYXRpb24ud3JpdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChrby52YWxpZGF0aW9uICE9IG51bGwpIHtcblxuICAgICAgLypcbiAgICAgIE5vdGUgdGhhdCB1c2luZyBrbyB2YWxpZGF0aW9uIHdpbGwgZm9yY2UgYW4gaW1tZWRpYXRlIGV2YWx1YXRpb24gb2YgdGhlIHRhcmdldHRlZCBvYnNlcnZhYmxlc1xuICAgICAgICovXG4gICAgICBpZiAob3B0aW9ucy52YWxpZGF0aW9uLnJlYWQgJiYgb3B0aW9ucy52YWxpZGF0aW9uLndyaXRlKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcmVmLCByZWYxLCByZWYyO1xuICAgICAgICAgIHJldHVybiAocmVmID0gKHJlZjEgPSByZXN1bHQud3JpdGVFcnJvcigpKSAhPSBudWxsID8gcmVmMS5tZXNzYWdlIDogdm9pZCAwKSAhPSBudWxsID8gcmVmIDogKHJlZjIgPSByZXN1bHQucmVhZEVycm9yKCkpICE9IG51bGwgPyByZWYyLm1lc3NhZ2UgOiB2b2lkIDA7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMudmFsaWRhdGlvbi5yZWFkKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcmVmO1xuICAgICAgICAgIHJldHVybiAocmVmID0gcmVzdWx0LnJlYWRFcnJvcigpKSAhPSBudWxsID8gcmVmLm1lc3NhZ2UgOiB2b2lkIDA7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyIHJlZjtcbiAgICAgICAgICByZXR1cm4gKHJlZiA9IHJlc3VsdC53cml0ZUVycm9yKCkpICE9IG51bGwgPyByZWYubWVzc2FnZSA6IHZvaWQgMDtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGFwcGx5VmFsaWRhdGlvbiA9IGZ1bmN0aW9uKGJhc2UpIHtcbiAgICAgICAgdmFyIHJ1bGU7XG4gICAgICAgIGJhc2UuZXh0ZW5kKHtcbiAgICAgICAgICB2YWxpZGF0YWJsZToge1xuICAgICAgICAgICAgZW5hYmxlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcnVsZSA9IHtcbiAgICAgICAgICBtZXNzYWdlOiB2b2lkIDAsXG4gICAgICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBtLCByZWY7XG4gICAgICAgICAgICBtID0gbWVzc2FnZSgpO1xuICAgICAgICAgICAgaWYgKG0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICBydWxlLm1lc3NhZ2UgPSB2b2lkIDA7XG4gICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcnVsZS5tZXNzYWdlID0gKHJlZiA9IHZhbGlkYXRpb24ubWVzc2FnZSkgIT0gbnVsbCA/IHJlZiA6IG07XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGtvLnZhbGlkYXRpb24uYWRkQW5vbnltb3VzUnVsZShiYXNlLCBydWxlKTtcbiAgICAgIH07XG4gICAgICBpZiAodmFsaWRhdGlvbi50YXJnZXQpIHtcbiAgICAgICAgYXBwbHlWYWxpZGF0aW9uKHRhcmdldCk7XG4gICAgICB9XG4gICAgICBpZiAodmFsaWRhdGlvbi5yZXN1bHQpIHtcbiAgICAgICAgYXBwbHlWYWxpZGF0aW9uKHJlc3VsdCk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuICBrby5leHRlbmRlcnMudHlwZSA9IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9ucykge1xuICAgIHZhciBlcnJvciwgZXgsIG5hbWUsIG5vcm1hbCwgcmVhZEVycm9yLCByZWYsIHJlc3VsdCwgdHlwZUNoZWNrLCB0eXBlQ2hlY2tTaW1wbGUsIHR5cGVDaGVja3MsIHR5cGVDaGVja3NTaW1wbGUsIHR5cGVOYW1lLCB0eXBlTmFtZXMsIHdyaXRlRXJyb3I7XG4gICAgaWYgKGlzQW4uU3RyaW5nLkxpdGVyYWwob3B0aW9ucykgfHwgaXNBbi5BcnJheShvcHRpb25zKSkge1xuICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgdHlwZTogb3B0aW9uc1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGlzQW4uRnVuY3Rpb24ob3B0aW9ucykpIHtcbiAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgIHR5cGU6IG9wdGlvbnMudHlwZU5hbWUsXG4gICAgICAgIGNoZWNrOiBvcHRpb25zXG4gICAgICB9O1xuICAgIH1cbiAgICBub3JtYWwgPSBleHRlbmQoe30sIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIG5vcm1hbGl6ZUV4UmVhZChub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIG5vcm1hbGl6ZUV4V3JpdGUobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKTtcbiAgICBub3JtYWxpemVWYWxpZGF0aW9uKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgb3B0aW9ucyA9IG5vcm1hbDtcbiAgICB0eXBlTmFtZXMgPSB0eXBlTmFtZVRvQXJyYXkob3B0aW9ucy50eXBlKTtcbiAgICB0eXBlTmFtZXMucHVzaC5hcHBseSh0eXBlTmFtZXMsIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXN1bHRzO1xuICAgICAgcmVzdWx0cyA9IFtdO1xuICAgICAgZm9yIChuYW1lIGluIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwob3B0aW9ucywgbmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoaXNWYWxpZFR5cGVOYW1lKG5hbWUpKSB7XG4gICAgICAgICAgcmVzdWx0cy5wdXNoKG5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KSgpKTtcbiAgICB0eXBlTmFtZXMgPSB0eXBlTmFtZVRvRGlzdGluY3RBcnJheSh0eXBlTmFtZXMpO1xuICAgIHR5cGVOYW1lID0gdHlwZU5hbWVUb1N0cmluZyh0eXBlTmFtZXMpO1xuICAgIHR5cGVDaGVja3NTaW1wbGUgPSB7fTtcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSwgbGVuLCByZWYsIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSB0eXBlTmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbmFtZSA9IHR5cGVOYW1lc1tpXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKHR5cGVDaGVja3NTaW1wbGVbbmFtZV0gPSAocmVmID0gb3B0aW9uc1tuYW1lXSkgIT0gbnVsbCA/IHJlZiA6IGlzQW4obmFtZSwge1xuICAgICAgICAgIHJldHVybkNoZWNrZXI6IHRydWVcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSkoKTtcbiAgICB0eXBlQ2hlY2tTaW1wbGUgPSAocmVmID0gb3B0aW9ucy5jaGVjaykgIT0gbnVsbCA/IHJlZiA6IChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHR5cGVDaGVja3MgPSB7fTtcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hlY2ssIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKG5hbWUgaW4gdHlwZUNoZWNrc1NpbXBsZSkge1xuICAgICAgICBjaGVjayA9IHR5cGVDaGVja3NTaW1wbGVbbmFtZV07XG4gICAgICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oY2hlY2spIHtcbiAgICAgICAgICByZXR1cm4gdHlwZUNoZWNrc1tuYW1lXSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2hlY2sodmFsdWUpICYmIHR5cGVDaGVja1NpbXBsZSh2YWx1ZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkoY2hlY2spKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pKCk7XG4gICAgdHlwZUNoZWNrID0gKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0eXBlQ2hlY2tTaW1wbGUodmFsdWUpICYmICgodHlwZU5hbWVzLmxlbmd0aCA9PT0gMCkgfHwgKHR5cGVOYW1lcy5zb21lKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZUNoZWNrc1NpbXBsZVtuYW1lXSh2YWx1ZSk7XG4gICAgICAgIH0pKSk7XG4gICAgICB9O1xuICAgIH0pKCk7XG4gICAgcmVhZEVycm9yID0ga28ub2JzZXJ2YWJsZSgpO1xuICAgIHdyaXRlRXJyb3IgPSBrby5vYnNlcnZhYmxlKCk7XG4gICAgcmVzdWx0ID0ga28uY29tcHV0ZWQoe1xuICAgICAgcHVyZTogb3B0aW9ucy5wdXJlLFxuICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxuICAgICAgcmVhZDogd3JhcFJlYWQob3B0aW9ucywgdGFyZ2V0LCByZWFkRXJyb3IsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaW50ZXJuYWxWYWx1ZTtcbiAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IHRhcmdldCgpO1xuICAgICAgICBpZiAoIXR5cGVDaGVjayhpbnRlcm5hbFZhbHVlKSkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmV4cGVjdGVkIGludGVybmFsIHR5cGUuIEV4cGVjdGVkIFwiICsgdHlwZU5hbWUgKyBcIiwgZ290IFwiICsgKGlzQW4oaW50ZXJuYWxWYWx1ZSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW50ZXJuYWxWYWx1ZTtcbiAgICAgIH0pLFxuICAgICAgd3JpdGU6IHdyYXBXcml0ZShvcHRpb25zLCB0YXJnZXQsIHdyaXRlRXJyb3IsIGZ1bmN0aW9uKGV4dGVybmFsVmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVDaGVjayhleHRlcm5hbFZhbHVlKSkge1xuICAgICAgICAgIHRhcmdldChleHRlcm5hbFZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5leHBlY3RlZCBleHRlcm5hbCB0eXBlLiBFeHBlY3RlZCBcIiArIHR5cGVOYW1lICsgXCIsIHJlY2VpdmVkIFwiICsgKGlzQW4oZXh0ZXJuYWxWYWx1ZSkpKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KTtcbiAgICByZXN1bHQudHlwZU5hbWUgPSB0eXBlTmFtZTtcbiAgICByZXN1bHQudHlwZU5hbWVzID0gdHlwZU5hbWVzO1xuICAgIHJlc3VsdC50eXBlQ2hlY2sgPSB0eXBlQ2hlY2s7XG4gICAgcmVzdWx0LnR5cGVDaGVja3MgPSB0eXBlQ2hlY2tzO1xuICAgIHJlc3VsdC5yZWFkRXJyb3IgPSByZWFkRXJyb3I7XG4gICAgcmVzdWx0LndyaXRlRXJyb3IgPSB3cml0ZUVycm9yO1xuICAgIHZhbGlkYXRlKHRhcmdldCwgcmVzdWx0LCBvcHRpb25zKTtcbiAgICBpZiAoIW9wdGlvbnMuZGVmZXJFdmFsdWF0aW9uKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQucGVlaygpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXggPSBlcnJvcjtcbiAgICAgICAgcmVzdWx0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhyb3cgZXg7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMgPSB7fTtcbiAga28uZXh0ZW5kZXJzLmNvbnZlcnQgPSBmdW5jdGlvbih0YXJnZXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgZXJyb3IsIGV4LCByZWFkRXJyb3IsIHJlc3VsdCwgd3JpdGVFcnJvcjtcbiAgICBpZiAob3B0aW9ucyA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjaGVja2VyLCBleHRUeXBlTmFtZSwgZXh0VHlwZU9wdGlvbnMsIGksIGludFR5cGVOYW1lLCBpbnRUeXBlT3B0aW9ucywgbGVuLCBub3JtYWwsIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgcmVmNCwgcmVmNSwgcmVmNiwgcmVmNztcbiAgICAgIGlmIChpc0FuLlN0cmluZyhvcHRpb25zKSB8fCBpc0FuLkFycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7XG4gICAgICAgICAgdHlwZTogb3B0aW9uc1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIGlmIChvcHRpb25zID09PSB0cnVlKSB7XG4gICAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMgPSBleHRlbmQoe30sIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgbm9ybWFsID0ge1xuICAgICAgICBjaGVja1NlbGY6IChyZWYgPSBvcHRpb25zLmNoZWNrKSAhPSBudWxsID8gcmVmIDogZm5UcnVlLFxuICAgICAgICByZWFkOiBvcHRpb25zLnJlYWQsXG4gICAgICAgIHdyaXRlOiBvcHRpb25zLndyaXRlLFxuICAgICAgICBjaGVja3M6IHt9LFxuICAgICAgICBjaGVja2VyczogW10sXG4gICAgICAgIGlzVHlwZWQ6IGlzVHlwZWQodGFyZ2V0KSxcbiAgICAgICAgaWdub3JlRGVmYXVsdENvbnZlcnRlcnM6IG9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnMsXG4gICAgICAgIHB1cmU6IG9wdGlvbnMucHVyZSxcbiAgICAgICAgZGVmZXJFdmFsdWF0aW9uOiBvcHRpb25zLmRlZmVyRXZhbHVhdGlvbixcbiAgICAgICAgdHlwZXM6IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KG9wdGlvbnMudHlwZSlcbiAgICAgIH07XG4gICAgICBub3JtYWxpemVFeFJlYWQobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIG5vcm1hbGl6ZUV4V3JpdGUobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIG5vcm1hbGl6ZVZhbGlkYXRpb24obm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zLCBvcHRpb25zKTtcbiAgICAgIGZvciAoZXh0VHlwZU5hbWUgaW4gb3B0aW9ucykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvcHRpb25zLCBleHRUeXBlTmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICBleHRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdO1xuICAgICAgICBpZiAoIWlzVmFsaWRUeXBlTmFtZShleHRUeXBlTmFtZSkpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBleHRUeXBlT3B0aW9ucyA9IChyZWYxID0gb3B0aW9uc1tleHRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYxIDoge307XG4gICAgICAgIG5vcm1hbFtleHRUeXBlTmFtZV0gPSB7XG4gICAgICAgICAgY2hlY2tTZWxmOiBleHRUeXBlT3B0aW9ucy5jaGVjayxcbiAgICAgICAgICByZWFkOiBleHRUeXBlT3B0aW9ucy5yZWFkLFxuICAgICAgICAgIHdyaXRlOiBleHRUeXBlT3B0aW9ucy53cml0ZSxcbiAgICAgICAgICB0eXBlczogdHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXkoZXh0VHlwZU9wdGlvbnMudHlwZSlcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChpbnRUeXBlTmFtZSBpbiBleHRUeXBlT3B0aW9ucykge1xuICAgICAgICAgIGlmICghaGFzUHJvcC5jYWxsKGV4dFR5cGVPcHRpb25zLCBpbnRUeXBlTmFtZSkpIGNvbnRpbnVlO1xuICAgICAgICAgIGlmICghaXNWYWxpZFR5cGVOYW1lKGludFR5cGVOYW1lKSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGludFR5cGVPcHRpb25zID0gKHJlZjIgPSAocmVmMyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmM1tpbnRUeXBlTmFtZV0gOiB2b2lkIDApICE9IG51bGwgPyByZWYyIDoge307XG4gICAgICAgICAgbm9ybWFsW2V4dFR5cGVOYW1lXVtpbnRUeXBlTmFtZV0gPSB7XG4gICAgICAgICAgICByZWFkOiBpbnRUeXBlT3B0aW9ucy5yZWFkLFxuICAgICAgICAgICAgd3JpdGU6IGludFR5cGVPcHRpb25zLndyaXRlXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbm9ybWFsLnR5cGUgPSB0eXBlTmFtZVRvU3RyaW5nKG5vcm1hbC50eXBlcyk7XG4gICAgICByZWY0ID0gbm9ybWFsLnR5cGVzO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmNC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBleHRUeXBlTmFtZSA9IHJlZjRbaV07XG4gICAgICAgIGNoZWNrZXIgPSAocmVmNSA9IChyZWY2ID0gKHJlZjcgPSBub3JtYWxbZXh0VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmNy5jaGVja1NlbGYgOiB2b2lkIDApICE9IG51bGwgPyByZWY2IDogaXNBbihleHRUeXBlTmFtZSwge1xuICAgICAgICAgIHJldHVybkNoZWNrZXI6IHRydWVcbiAgICAgICAgfSkpICE9IG51bGwgPyByZWY1IDogZm5UcnVlO1xuICAgICAgICBub3JtYWwuY2hlY2tzW2V4dFR5cGVOYW1lXSA9IChmdW5jdGlvbihjaGVja2VyKSB7XG4gICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsLmNoZWNrU2VsZih2YWx1ZSkgJiYgY2hlY2tlcih2YWx1ZSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSkoY2hlY2tlcik7XG4gICAgICAgIG5vcm1hbC5jaGVja2Vycy5wdXNoKG5vcm1hbC5jaGVja3NbZXh0VHlwZU5hbWVdKTtcbiAgICAgIH1cbiAgICAgIG5vcm1hbC5jaGVjayA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBub3JtYWwuY2hlY2tTZWxmKHZhbHVlKSAmJiAoKG5vcm1hbC5jaGVja2Vycy5sZW5ndGggPT09IDApIHx8IG5vcm1hbC5jaGVja2Vycy5zb21lKGZ1bmN0aW9uKGNoZWNrZXIpIHtcbiAgICAgICAgICByZXR1cm4gY2hlY2tlcih2YWx1ZSk7XG4gICAgICAgIH0pKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gb3B0aW9ucyA9IG5vcm1hbDtcbiAgICB9KSgpO1xuICAgIHJlYWRFcnJvciA9IGtvLm9ic2VydmFibGUoKTtcbiAgICB3cml0ZUVycm9yID0ga28ub2JzZXJ2YWJsZSgpO1xuICAgIHJlc3VsdCA9IGtvLmNvbXB1dGVkKHtcbiAgICAgIHB1cmU6IG9wdGlvbnMucHVyZSxcbiAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZSxcbiAgICAgIHJlYWQ6IHdyYXBSZWFkKG9wdGlvbnMsIHRhcmdldCwgcmVhZEVycm9yLCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGJhc2UxLCBleHRUeXBlTmFtZSwgZXh0VHlwZU5hbWVzLCBleHRUeXBlT3B0aW9ucywgZXh0ZXJuYWxWYWx1ZSwgaSwgaW50VHlwZU5hbWUsIGludFR5cGVOYW1lcywgaW50VHlwZU9wdGlvbnMsIGludGVybmFsVmFsdWUsIGosIGssIGxlbiwgbGVuMSwgbGVuMiwgcmVmLCByZWYxLCByZWYyLCByZWYzLCB0cnlSZWFkO1xuICAgICAgICBpbnRlcm5hbFZhbHVlID0gdGFyZ2V0KCk7XG4gICAgICAgIGV4dGVybmFsVmFsdWUgPSB2b2lkIDA7XG4gICAgICAgIHRyeVJlYWQgPSBmdW5jdGlvbihyZWFkLCByZWFkT3B0aW9ucykge1xuICAgICAgICAgIHZhciBlcnJvciwgZXg7XG4gICAgICAgICAgaWYgKHJlYWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgZXh0ZXJuYWxWYWx1ZSA9IHJlYWQoaW50ZXJuYWxWYWx1ZSwgcmVhZE9wdGlvbnMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZXggPSBlcnJvcjtcbiAgICAgICAgICAgICAgaWYgKCEoZXggaW5zdGFuY2VvZiBUeXBlRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmNoZWNrKGV4dGVybmFsVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBleHRUeXBlTmFtZXMgPSBvcHRpb25zLnR5cGVzO1xuICAgICAgICBpZiAoZXh0VHlwZU5hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGV4dFR5cGVOYW1lcyA9IFtpc0FuKGludGVybmFsVmFsdWUpXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBleHRUeXBlTmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBleHRUeXBlTmFtZSA9IGV4dFR5cGVOYW1lc1tpXTtcbiAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IChyZWYgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZiA6IHt9O1xuICAgICAgICAgIGludFR5cGVOYW1lcyA9IChyZWYxID0gZXh0VHlwZU9wdGlvbnMudHlwZXMpICE9IG51bGwgPyByZWYxIDogW107XG4gICAgICAgICAgaWYgKGludFR5cGVOYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmlzVHlwZWQpIHtcbiAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gdGFyZ2V0LnR5cGVOYW1lcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IFtpc0FuKGludGVybmFsVmFsdWUpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChqID0gMCwgbGVuMSA9IGludFR5cGVOYW1lcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICAgIGludFR5cGVOYW1lID0gaW50VHlwZU5hbWVzW2pdO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXNUeXBlZCAmJiAhKHR5cGVvZiAoYmFzZTEgPSB0YXJnZXQudHlwZUNoZWNrcylbaW50VHlwZU5hbWVdID09PSBcImZ1bmN0aW9uXCIgPyBiYXNlMVtpbnRUeXBlTmFtZV0oaW50ZXJuYWxWYWx1ZSkgOiB2b2lkIDApKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW50VHlwZU9wdGlvbnMgPSAocmVmMiA9IGV4dFR5cGVPcHRpb25zW2ludFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZjIgOiB7fTtcbiAgICAgICAgICAgIGlmIChpbnRUeXBlT3B0aW9ucy5yZWFkICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgaWYgKHRyeVJlYWQoaW50VHlwZU9wdGlvbnMucmVhZCwgaW50VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW50VHlwZU5hbWUgPT09IGV4dFR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgIGlmICgoZXh0VHlwZU9wdGlvbnMucmVhZCA9PSBudWxsKSAmJiAob3B0aW9ucy5yZWFkID09IG51bGwpICYmIHRyeVJlYWQoZm5JZGVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy5pZ25vcmVEZWZhdWx0Q29udmVydGVycykge1xuICAgICAgICAgICAgICBpZiAodHJ5UmVhZChrby50eXBlZC5nZXRDb252ZXJ0ZXIoaW50VHlwZU5hbWUsIGV4dFR5cGVOYW1lKSwgaW50VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChrID0gMCwgbGVuMiA9IGV4dFR5cGVOYW1lcy5sZW5ndGg7IGsgPCBsZW4yOyBrKyspIHtcbiAgICAgICAgICBleHRUeXBlTmFtZSA9IGV4dFR5cGVOYW1lc1trXTtcbiAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IChyZWYzID0gb3B0aW9uc1tleHRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYzIDoge307XG4gICAgICAgICAgaWYgKHRyeVJlYWQoZXh0VHlwZU9wdGlvbnMucmVhZCwgZXh0VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyeVJlYWQob3B0aW9ucy5yZWFkLCBvcHRpb25zLnJlYWRPcHRpb25zKSkge1xuICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnR5cGUgIT0gbnVsbCkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIGludGVybmFsIHR5cGUgXCIgKyAoaXNBbihpbnRlcm5hbFZhbHVlKSkgKyBcIiB0byBleHRlcm5hbCB0eXBlIFwiICsgb3B0aW9ucy50eXBlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBpbnRlcm5hbCB0eXBlIFwiICsgKGlzQW4oaW50ZXJuYWxWYWx1ZSkpKTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICB3cml0ZTogd3JhcFdyaXRlKG9wdGlvbnMsIHRhcmdldCwgd3JpdGVFcnJvciwgZnVuY3Rpb24oZXh0ZXJuYWxWYWx1ZSkge1xuICAgICAgICB2YXIgZXh0VHlwZU5hbWUsIGV4dFR5cGVOYW1lcywgZXh0VHlwZU9wdGlvbnMsIGksIGludFR5cGVOYW1lLCBpbnRUeXBlTmFtZXMsIGludFR5cGVPcHRpb25zLCBqLCBrLCBsZW4sIGxlbjEsIGxlbjIsIHJlZiwgcmVmMSwgcmVmMiwgcmVmMywgdHJ5V3JpdGU7XG4gICAgICAgIHRyeVdyaXRlID0gZnVuY3Rpb24od3JpdGUsIHdyaXRlT3B0aW9ucykge1xuICAgICAgICAgIHZhciBlcnJvciwgZXgsIGludGVybmFsVmFsdWU7XG4gICAgICAgICAgaWYgKHdyaXRlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGludGVybmFsVmFsdWUgPSB3cml0ZShleHRlcm5hbFZhbHVlLCB3cml0ZU9wdGlvbnMpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgZXggPSBlcnJvcjtcbiAgICAgICAgICAgICAgaWYgKCEoZXggaW5zdGFuY2VvZiBUeXBlRXJyb3IpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHRhcmdldChpbnRlcm5hbFZhbHVlKTtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKChvcHRpb25zLmNoZWNrU2VsZiA9PSBudWxsKSB8fCBvcHRpb25zLmNoZWNrU2VsZihleHRlcm5hbFZhbHVlKSkge1xuICAgICAgICAgIGV4dFR5cGVOYW1lcyA9IG9wdGlvbnMudHlwZXM7XG4gICAgICAgICAgaWYgKGV4dFR5cGVOYW1lcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGV4dFR5cGVOYW1lcyA9IFtpc0FuKGV4dGVybmFsVmFsdWUpXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gZXh0VHlwZU5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBleHRUeXBlTmFtZSA9IGV4dFR5cGVOYW1lc1tpXTtcbiAgICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gKHJlZiA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmIDoge307XG4gICAgICAgICAgICBpZiAoKChleHRUeXBlT3B0aW9ucy5jaGVja1NlbGYgIT0gbnVsbCkgJiYgIWV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZihleHRlcm5hbFZhbHVlKSkgfHwgKChleHRUeXBlT3B0aW9ucy5jaGVja1NlbGYgPT0gbnVsbCkgJiYgIWlzQW4oZXh0ZXJuYWxWYWx1ZSwgZXh0VHlwZU5hbWUpKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IChyZWYxID0gZXh0VHlwZU9wdGlvbnMudHlwZXMpICE9IG51bGwgPyByZWYxIDogW107XG4gICAgICAgICAgICBpZiAoaW50VHlwZU5hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICBpZiAob3B0aW9ucy5pc1R5cGVkKSB7XG4gICAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gdGFyZ2V0LnR5cGVOYW1lcztcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBbaXNBbihleHRlcm5hbFZhbHVlKV07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGxlbjEgPSBpbnRUeXBlTmFtZXMubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgICAgICAgIGludFR5cGVOYW1lID0gaW50VHlwZU5hbWVzW2pdO1xuICAgICAgICAgICAgICBpbnRUeXBlT3B0aW9ucyA9IChyZWYyID0gZXh0VHlwZU9wdGlvbnNbaW50VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmMiA6IHt9O1xuICAgICAgICAgICAgICBpZiAoaW50VHlwZU9wdGlvbnMud3JpdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmICh0cnlXcml0ZShpbnRUeXBlT3B0aW9ucy53cml0ZSwgaW50VHlwZU9wdGlvbnMud3JpdGVPcHRpb25zKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChleHRUeXBlTmFtZSA9PT0gaW50VHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoKGV4dFR5cGVPcHRpb25zLndyaXRlID09IG51bGwpICYmIChvcHRpb25zLndyaXRlID09IG51bGwpICYmICghb3B0aW9ucy5pc1R5cGVkIHx8IHRhcmdldC50eXBlQ2hlY2tzW2V4dFR5cGVOYW1lXShleHRlcm5hbFZhbHVlKSkgJiYgdHJ5V3JpdGUoZm5JZGVudGl0eSkpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoIW9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHJ5V3JpdGUoa28udHlwZWQuZ2V0Q29udmVydGVyKGV4dFR5cGVOYW1lLCBpbnRUeXBlTmFtZSksIGludFR5cGVPcHRpb25zLndyaXRlT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChrID0gMCwgbGVuMiA9IGV4dFR5cGVOYW1lcy5sZW5ndGg7IGsgPCBsZW4yOyBrKyspIHtcbiAgICAgICAgICAgIGV4dFR5cGVOYW1lID0gZXh0VHlwZU5hbWVzW2tdO1xuICAgICAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSAocmVmMyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmMyA6IHt9O1xuICAgICAgICAgICAgaWYgKCgoZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmICE9IG51bGwpICYmICFleHRUeXBlT3B0aW9ucy5jaGVja1NlbGYoZXh0ZXJuYWxWYWx1ZSkpIHx8ICgoZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmID09IG51bGwpICYmICFpc0FuKGV4dGVybmFsVmFsdWUsIGV4dFR5cGVOYW1lKSkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHJ5V3JpdGUoZXh0VHlwZU9wdGlvbnMud3JpdGUsIGV4dFR5cGVPcHRpb25zLndyaXRlT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHJ5V3JpdGUob3B0aW9ucy53cml0ZSwgb3B0aW9ucy53cml0ZU9wdGlvbnMpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLmlzVHlwZWQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBleHRlcm5hbCB0eXBlIFwiICsgKGlzQW4oZXh0ZXJuYWxWYWx1ZSkpICsgXCIgdG8gaW50ZXJuYWwgdHlwZSBcIiArIHRhcmdldC50eXBlTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gZXh0ZXJuYWwgdHlwZSBcIiArIChpc0FuKGV4dGVybmFsVmFsdWUpKSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgfSk7XG4gICAgcmVzdWx0LnR5cGVOYW1lID0gb3B0aW9ucy50eXBlO1xuICAgIHJlc3VsdC50eXBlTmFtZXMgPSBvcHRpb25zLnR5cGVzO1xuICAgIHJlc3VsdC50eXBlQ2hlY2sgPSBvcHRpb25zLmNoZWNrO1xuICAgIHJlc3VsdC50eXBlQ2hlY2tzID0gb3B0aW9ucy5jaGVja3M7XG4gICAgcmVzdWx0LnJlYWRFcnJvciA9IHJlYWRFcnJvcjtcbiAgICByZXN1bHQud3JpdGVFcnJvciA9IHdyaXRlRXJyb3I7XG4gICAgdmFsaWRhdGUodGFyZ2V0LCByZXN1bHQsIG9wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucy5kZWZlckV2YWx1YXRpb24pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdC5wZWVrKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleCA9IGVycm9yO1xuICAgICAgICByZXN1bHQuZGlzcG9zZSgpO1xuICAgICAgICB0aHJvdyBleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucyA9IHt9O1xuICAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnZlcnRlcnM7XG4gICAga28udHlwZWQuX2NvbnZlcnRlcnMgPSBjb252ZXJ0ZXJzID0ge307XG4gICAga28udHlwZWQuYWRkQ29udmVydGVyID0gZnVuY3Rpb24oZnJvbVR5cGVOYW1lLCB0b1R5cGVOYW1lLCBjb252ZXJ0ZXIsIGRlZmF1bHRPcHRpb25zLCBkZWZhdWx0T3B0aW9uKSB7XG4gICAgICB2YXIgd3JhcHBlcjtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5hc3NlcnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGlzVmFsaWRUeXBlTmFtZShmcm9tVHlwZU5hbWUpLCBcIkludmFsaWQgdHlwZU5hbWUgXCIgKyBmcm9tVHlwZU5hbWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29uc29sZSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUuYXNzZXJ0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBjb25zb2xlLmFzc2VydChpc1ZhbGlkVHlwZU5hbWUodG9UeXBlTmFtZSksIFwiSW52YWxpZCB0eXBlTmFtZSBcIiArIGZyb21UeXBlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChkZWZhdWx0T3B0aW9ucyAhPSBudWxsKSB7XG4gICAgICAgIGlmIChkZWZhdWx0T3B0aW9uICE9IG51bGwpIHtcbiAgICAgICAgICB3cmFwcGVyID0gZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgIWlzQW4uT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgIG8gPSB7fTtcbiAgICAgICAgICAgICAgb1tkZWZhdWx0T3B0aW9uXSA9IG9wdGlvbnM7XG4gICAgICAgICAgICAgIG9wdGlvbnMgPSBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRlcih2YWx1ZSwga28udXRpbHMuZXh0ZW5kKGtvLnV0aWxzLmV4dGVuZCh7fSwgd3JhcHBlci5vcHRpb25zKSwgb3B0aW9ucykpO1xuICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlLCBrby51dGlscy5leHRlbmQoa28udXRpbHMuZXh0ZW5kKHt9LCB3cmFwcGVyLm9wdGlvbnMpLCBvcHRpb25zKSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JhcHBlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIGNvbnZlcnRlcih2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICB3cmFwcGVyLm9wdGlvbnMgPSBkZWZhdWx0T3B0aW9ucztcbiAgICAgIGlmIChjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0gPT0gbnVsbCkge1xuICAgICAgICBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0gPSB7fTtcbiAgICAgIH1cbiAgICAgIGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXVt0b1R5cGVOYW1lXSA9IHdyYXBwZXI7XG4gICAgICByZXR1cm4ga28udHlwZWQ7XG4gICAgfTtcbiAgICBrby50eXBlZC5nZXRDb252ZXJ0ZXIgPSBmdW5jdGlvbihmcm9tVHlwZU5hbWUsIHRvVHlwZU5hbWUpIHtcbiAgICAgIHZhciByZWY7XG4gICAgICByZXR1cm4gKHJlZiA9IGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZlt0b1R5cGVOYW1lXSA6IHZvaWQgMDtcbiAgICB9O1xuICAgIGtvLnR5cGVkLnJlbW92ZUNvbnZlcnRlciA9IGZ1bmN0aW9uKGZyb21UeXBlTmFtZSwgdG9UeXBlTmFtZSkge1xuICAgICAgdmFyIHJlZiwgcmVmMTtcbiAgICAgIGlmICgoKHJlZiA9IGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZlt0b1R5cGVOYW1lXSA6IHZvaWQgMCkgIT0gbnVsbCkge1xuICAgICAgICBpZiAoKHJlZjEgPSBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0pICE9IG51bGwpIHtcbiAgICAgICAgICBkZWxldGUgcmVmMVt0b1R5cGVOYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGtvLnR5cGVkO1xuICAgIH07XG4gIH0pKCk7XG4gIChmdW5jdGlvbigpIHtcbiAgICB2YXIgZGVjaW1hbEFkanVzdDtcbiAgICBkZWNpbWFsQWRqdXN0ID0gZnVuY3Rpb24odHlwZSwgdmFsdWUsIGV4cCkge1xuICAgICAgaWYgKChleHAgPT0gbnVsbCkgfHwgK2V4cCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gdHlwZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICB2YWx1ZSA9ICt2YWx1ZTtcbiAgICAgIGV4cCA9ICtleHA7XG4gICAgICBpZiAoaXNOYU4odmFsdWUpIHx8ICEodHlwZW9mIGV4cCA9PT0gJ251bWJlcicgJiYgZXhwICUgMSA9PT0gMCkpIHtcbiAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKS5zcGxpdCgnZScpO1xuICAgICAgdmFsdWUgPSB0eXBlKCsodmFsdWVbMF0gKyAnZScgKyAodmFsdWVbMV0gPyArdmFsdWVbMV0gLSBleHAgOiAtZXhwKSkpO1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KCdlJyk7XG4gICAgICByZXR1cm4gKyh2YWx1ZVswXSArICdlJyArICh2YWx1ZVsxXSA/ICt2YWx1ZVsxXSArIGV4cCA6IGV4cCkpO1xuICAgIH07XG5cbiAgICAvKiAhcHJhZ21hIGNvdmVyYWdlLXNraXAtbmV4dCAqL1xuICAgIGlmIChNYXRoLnJvdW5kMTAgPT0gbnVsbCkge1xuICAgICAgTWF0aC5yb3VuZDEwID0gZnVuY3Rpb24odmFsdWUsIGV4cCkge1xuICAgICAgICByZXR1cm4gZGVjaW1hbEFkanVzdChNYXRoLnJvdW5kLCB2YWx1ZSwgZXhwKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyogIXByYWdtYSBjb3ZlcmFnZS1za2lwLW5leHQgKi9cbiAgICBpZiAoTWF0aC5mbG9vcjEwID09IG51bGwpIHtcbiAgICAgIE1hdGguZmxvb3IxMCA9IGZ1bmN0aW9uKHZhbHVlLCBleHApIHtcbiAgICAgICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoTWF0aC5mbG9vciwgdmFsdWUsIGV4cCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qICFwcmFnbWEgY292ZXJhZ2Utc2tpcC1uZXh0ICovXG4gICAgaWYgKE1hdGguY2VpbDEwID09IG51bGwpIHtcbiAgICAgIE1hdGguY2VpbDEwID0gZnVuY3Rpb24odmFsdWUsIGV4cCkge1xuICAgICAgICByZXR1cm4gZGVjaW1hbEFkanVzdChNYXRoLmNlaWwsIHZhbHVlLCBleHApO1xuICAgICAgfTtcbiAgICB9XG4gIH0pKCk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignQm9vbGVhbicsICdOdW1iZXIuSW50ZWdlcicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy50cnV0aHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmZhbHNleTtcbiAgICB9XG4gIH0sIHtcbiAgICB0cnV0aHk6IDEsXG4gICAgZmFsc2V5OiAwXG4gIH0sICd0cnV0aHknKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdCb29sZWFuJywgJ051bWJlcicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy50cnV0aHk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmZhbHNleTtcbiAgICB9XG4gIH0sIHtcbiAgICB0cnV0aHk6IDEsXG4gICAgZmFsc2V5OiAwXG4gIH0sICd0cnV0aHknKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdCb29sZWFuJywgJ1N0cmluZycsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFsdWUgPSB2YWx1ZSA/IG9wdGlvbnMudHJ1dGh5IDogb3B0aW9ucy5mYWxzZXk7XG4gICAgaWYgKG9wdGlvbnMudXBwZXJDYXNlKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSwge1xuICAgIHVwcGVyQ2FzZTogZmFsc2UsXG4gICAgdHJ1dGh5OiAndHJ1ZScsXG4gICAgZmFsc2V5OiAnZmFsc2UnXG4gIH0sICd1cHBlckNhc2UnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdEYXRlJywgJ01vbWVudCcsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgbW9tZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIG1vbWVudCAhPT0gbnVsbCA/IG1vbWVudCA6IHJlcXVpcmUoJ21vbWVudCcpKSh2YWx1ZSk7XG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ0RhdGUnLCAnU3RyaW5nJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgbWV0aG9kO1xuICAgIGlmIChpc05hTih2YWx1ZS52YWx1ZU9mKCkpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIG1ldGhvZCA9IG9wdGlvbnMuZm9ybWF0c1tvcHRpb25zLmZvcm1hdF07XG4gICAgcmV0dXJuIHZhbHVlW21ldGhvZF0uYXBwbHkodmFsdWUsIG9wdGlvbnMucGFyYW1zKTtcbiAgfSwge1xuICAgIGZvcm1hdHM6IHtcbiAgICAgIGRhdGU6ICd0b0RhdGVTdHJpbmcnLFxuICAgICAgaXNvOiAndG9JU09TdHJpbmcnLFxuICAgICAganNvbjogJ3RvSlNPTicsXG4gICAgICBsb2NhbGVEYXRlOiAndG9Mb2NhbGVEYXRlU3RyaW5nJyxcbiAgICAgIGxvY2FsZVRpbWU6ICd0b0xvY2FsZVRpbWVTdHJpbmcnLFxuICAgICAgbG9jYWxlOiAndG9Mb2NhbGVTdHJpbmcnLFxuICAgICAgdGltZTogJ3RvVGltZVN0cmluZycsXG4gICAgICB1dGM6ICd0b1VUQ1N0cmluZycsXG4gICAgICBcImRlZmF1bHRcIjogJ3RvU3RyaW5nJ1xuICAgIH0sXG4gICAgZm9ybWF0OiAnZGVmYXVsdCcsXG4gICAgcGFyYW1zOiBbXVxuICB9LCAnZm9ybWF0Jyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignRGF0ZScsICdVbmRlZmluZWQnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghaXNOYU4odmFsdWUudmFsdWVPZigpKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSB2YWxpZCBEYXRlIHRvIFVuZGVmaW5lZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdNb21lbnQnLCAnRGF0ZScsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHZhbHVlLnRvRGF0ZSgpO1xuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdNb21lbnQnLCAnU3RyaW5nJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIXZhbHVlLmlzVmFsaWQoKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWUubG9jYWxlKG9wdGlvbnMubG9jYWxlKS5mb3JtYXQob3B0aW9ucy5mb3JtYXQpO1xuICB9LCB7XG4gICAgbG9jYWxlOiAnZW4nLFxuICAgIGZvcm1hdDogJ0wnXG4gIH0sICdmb3JtYXQnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdNb21lbnQnLCAnVW5kZWZpbmVkJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAodmFsdWUuaXNWYWxpZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIHZhbGlkIE1vbWVudCB0byBVbmRlZmluZWQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTnVtYmVyJywgJ0Jvb2xlYW4nLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICgob3B0aW9ucy5mYWxzZXkgIT0gbnVsbCkgJiYgdmFsdWUgPT09IG9wdGlvbnMuZmFsc2V5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmICgob3B0aW9ucy50cnV0aHkgIT0gbnVsbCkgJiYgdmFsdWUgPT09IG9wdGlvbnMudHJ1dGh5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZmFsc2V5ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMudHJ1dGh5ID09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZnJvbSBcIiArIHZhbHVlICsgXCIgdG8gQm9vbGVhblwiKTtcbiAgfSwge1xuICAgIHRydXRoeTogdm9pZCAwLFxuICAgIGZhbHNleTogMFxuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdOdW1iZXInLCAnTnVtYmVyLkludGVnZXInLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhciBtb2RlO1xuICAgIGlmIChvcHRpb25zLm1vZGUgPT0gbnVsbCkge1xuICAgICAgaWYgKCFpc0FuLk51bWJlci5JbnRlZ2VyKHZhbHVlKSkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCBmcm9tIE51bWJlciB0byBOdW1iZXIuSW50ZWdlci4gTnVtYmVyIGlzIG5vdCBhbiBpbnRlZ2VyJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucy5tb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgbW9kZSA9IE1hdGhbb3B0aW9ucy5tb2RlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbW9kZSA9IG9wdGlvbnMubW9kZTtcbiAgICB9XG4gICAgcmV0dXJuIG1vZGUodmFsdWUpO1xuICB9LCB7XG4gICAgbW9kZTogdm9pZCAwXG4gIH0sICdtb2RlJyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTnVtYmVyJywgJ1N0cmluZycsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuZGVjaW1hbHMgIT0gbnVsbCkge1xuICAgICAgdmFsdWUgPSBNYXRoLnJvdW5kMTAodmFsdWUsIC1vcHRpb25zLmRlY2ltYWxzKTtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9GaXhlZChvcHRpb25zLmRlY2ltYWxzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sIHtcbiAgICBkZWNpbWFsczogdm9pZCAwXG4gIH0sICdkZWNpbWFscycpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ051bWJlci5JbnRlZ2VyJywgJ0Jvb2xlYW4nLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICgob3B0aW9ucy5mYWxzZXkgIT0gbnVsbCkgJiYgdmFsdWUgPT09IG9wdGlvbnMuZmFsc2V5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmICgob3B0aW9ucy50cnV0aHkgIT0gbnVsbCkgJiYgdmFsdWUgPT09IG9wdGlvbnMudHJ1dGh5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZmFsc2V5ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMudHJ1dGh5ID09IG51bGwpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZnJvbSBcIiArIHZhbHVlICsgXCIgdG8gQm9vbGVhblwiKTtcbiAgfSwge1xuICAgIHRydXRoeTogdm9pZCAwLFxuICAgIGZhbHNleTogMFxuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdOdW1iZXIuSW50ZWdlcicsICdOdW1iZXInLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTnVtYmVyLkludGVnZXInLCAnU3RyaW5nJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKG9wdGlvbnMuYmFzZSk7XG4gICAgaWYgKG9wdGlvbnMudXBwZXJDYXNlKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSwge1xuICAgIGJhc2U6IDEwLFxuICAgIHVwcGVyQ2FzZTogZmFsc2VcbiAgfSwgJ2Jhc2UnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdTdHJpbmcnLCAnQm9vbGVhbicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFyIGZhbHNleSwgaSwgaiwgbGVuLCBsZW4xLCByZWYsIHJlZjEsIHRydXRoeTtcbiAgICBpZiAob3B0aW9ucy50cmltKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaWdub3JlQ2FzZSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gb3B0aW9ucy50cnV0aHlbMF0pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBvcHRpb25zLmZhbHNleVswXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlZiA9IG9wdGlvbnMudHJ1dGh5O1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHRydXRoeSA9IHJlZltpXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnV0aHkpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmVmMSA9IG9wdGlvbnMuZmFsc2V5O1xuICAgICAgZm9yIChqID0gMCwgbGVuMSA9IHJlZjEubGVuZ3RoOyBqIDwgbGVuMTsgaisrKSB7XG4gICAgICAgIGZhbHNleSA9IHJlZjFbal07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gZmFsc2V5KSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBmcm9tIFwiICsgdmFsdWUgKyBcIiB0byBCb29sZWFuXCIpO1xuICB9LCB7XG4gICAgaWdub3JlQ2FzZTogdHJ1ZSxcbiAgICBzdHJpY3Q6IGZhbHNlLFxuICAgIHRydXRoeTogWyd0cnVlJywgJ3QnLCAnMScsICctMScsICd5ZXMnLCAneSddLFxuICAgIGZhbHNleTogWydmYWxzZScsICdmJywgJzAnLCAnbm8nLCAnbiddLFxuICAgIHRyaW06IGZhbHNlXG4gIH0sICdzdHJpY3QnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdTdHJpbmcnLCAnRGF0ZScsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFyIGRhdGUsIG1hdGNoLCBudW0sIHRpbWUsIHR6O1xuICAgIGlmIChvcHRpb25zLnRyaW0pIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgIG1hdGNoID0gdmFsdWUubWF0Y2gob3B0aW9ucy5mb3JtYXQpO1xuICAgICAgaWYgKG1hdGNoID09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIFN0cmluZyB0byBEYXRlJyk7XG4gICAgICB9XG4gICAgICBudW0gPSBmdW5jdGlvbih2YWx1ZSwgZGVmKSB7XG4gICAgICAgIGlmICgodmFsdWUgIT0gbnVsbCkgJiYgdmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBkZWY7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB0eiA9IHZvaWQgMDtcbiAgICAgIGlmICgobWF0Y2hbN10gIT0gbnVsbCkgJiYgbWF0Y2hbN10gIT09ICcnKSB7XG4gICAgICAgIHR6ID0gKG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QudHpIb3Vyc10pICogNjAgKyBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6TWludXRlc10pKSAqIDYwICogMTAwMDtcbiAgICAgICAgaWYgKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC50elNpZ25dID09PSAnLScpIHtcbiAgICAgICAgICB0eiAqPSAtMTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudXRjIHx8ICh0eiAhPSBudWxsKSkge1xuICAgICAgICB0aW1lID0gRGF0ZS5VVEMobnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC55ZWFyXSwgMCksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubW9udGhdLCAxKSAtIDEsIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuZGF5XSwgMSksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuaG91cnNdLCAwKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5taW51dGVzXSwgMCksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3Quc2Vjb25kc10sIDApKTtcbiAgICAgICAgaWYgKHR6ICE9IG51bGwpIHtcbiAgICAgICAgICB0aW1lICs9IHR6O1xuICAgICAgICB9XG4gICAgICAgIGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGUgPSBuZXcgRGF0ZShudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnllYXJdLCAwKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5tb250aF0sIDEpIC0gMSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5kYXldLCAxKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5ob3Vyc10sIDApLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1pbnV0ZXNdLCAwKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5zZWNvbmRzXSwgMCkpO1xuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MCAqIDEwMDApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlID0gbmV3IERhdGUodmFsdWUpO1xuICAgIH1cbiAgICBpZiAoaXNOYU4oZGF0ZS52YWx1ZU9mKCkpKSB7XG4gICAgICB0aHJvdyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gU3RyaW5nIHRvIERhdGUnKTtcbiAgICB9XG4gICAgcmV0dXJuIGRhdGU7XG4gIH0sIHtcbiAgICBmb3JtYXQ6IC9eKFswLTldezR9KS0oWzAtOV17Mn0pLShbMC05XXsyfSkoPzooPzpUfFxccykoWzAtOV17Mn0pOihbMC05XXsyfSkoPzo6KFswLTldezJ9KD86LlswLTldKyk/KSk/KD86KFxcK3xcXC0pKFswLTldezJ9KTooWzAtOV17Mn0pKT8pPyQvLFxuICAgIGZvcm1hdERpY3Q6IHtcbiAgICAgIHllYXI6IDEsXG4gICAgICBtb250aDogMixcbiAgICAgIGRheTogMyxcbiAgICAgIGhvdXJzOiA0LFxuICAgICAgbWludXRlczogNSxcbiAgICAgIHNlY29uZHM6IDYsXG4gICAgICB0elNpZ246IDcsXG4gICAgICB0ekhvdXJzOiA4LFxuICAgICAgdHpNaW51dGVzOiA5XG4gICAgfSxcbiAgICB1dGM6IGZhbHNlLFxuICAgIHN0cmljdDogdHJ1ZSxcbiAgICB0cmltOiBmYWxzZVxuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdTdHJpbmcnLCAnTW9tZW50JywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgcmVzdWx0O1xuICAgIGlmIChvcHRpb25zLnRyaW0pIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICByZXN1bHQgPSAodHlwZW9mIG1vbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb21lbnQgIT09IG51bGwgPyBtb21lbnQgOiByZXF1aXJlKCdtb21lbnQnKSkodmFsdWUsIG9wdGlvbnMuZm9ybWF0LCBvcHRpb25zLmxhbmd1YWdlLCBvcHRpb25zLnN0cmljdCk7XG4gICAgaWYgKCFyZXN1bHQuaXNWYWxpZCgpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIFN0cmluZyB0byBNb21lbnQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwge1xuICAgIHN0cmljdDogZmFsc2UsXG4gICAgbGFuZ3VhZ2U6ICdlbicsXG4gICAgZm9ybWF0OiAnTCcsXG4gICAgdHJpbTogZmFsc2VcbiAgfSwgJ2Zvcm1hdCcpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1N0cmluZycsICdOdW1iZXIuSW50ZWdlcicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFyIGNoYXJzLCBlcnJvciwgZXgsIHJlZjtcbiAgICBpZiAob3B0aW9ucy50cmltKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuYmFzZSA9PT0gMTAgJiYgIW9wdGlvbnMuc3RyaWN0KSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4ga28udHlwZWQuZ2V0Q29udmVydGVyKCdTdHJpbmcnLCAnTnVtYmVyJykodmFsdWUsIDApO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgZXggPSBlcnJvcjtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gXCIgKyB2YWx1ZSArIFwiIHRvIE51bWJlci5JbnRlZ2VyXCIpO1xuICAgICAgfVxuICAgIH1cbiAgICBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonO1xuICAgIGlmICghUmVnRXhwKFwiXihcXFxcLXxcXFxcKyk/W1wiICsgKGNoYXJzLnNsaWNlKDAsIChyZWYgPSBvcHRpb25zLmJhc2UpICE9IG51bGwgPyByZWYgOiAxMCkpICsgXCJdKyRcIiwgIW9wdGlvbnMuc3RyaWN0ID8gJ2knIDogdm9pZCAwKS50ZXN0KHZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gXCIgKyB2YWx1ZSArIFwiIHRvIE51bWJlci5JbnRlZ2VyXCIpO1xuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodmFsdWUsIG9wdGlvbnMuYmFzZSk7XG4gIH0sIHtcbiAgICBiYXNlOiAxMCxcbiAgICBzdHJpY3Q6IGZhbHNlLFxuICAgIHRyaW06IGZhbHNlXG4gIH0sICdiYXNlJyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignU3RyaW5nJywgJ051bWJlcicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMudHJpbSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgfVxuICAgIGlmICghL14oXFwrfFxcLSk/WzAtOV0rKFxcLj8pWzAtOV0qJC8udGVzdCh2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIFwiICsgdmFsdWUgKyBcIiB0byBOdW1iZXJcIik7XG4gICAgfVxuICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSwgb3B0aW9ucy5iYXNlKTtcbiAgICBpZiAob3B0aW9ucy5kZWNpbWFscyAhPSBudWxsKSB7XG4gICAgICB2YWx1ZSA9IE1hdGgucm91bmQxMCh2YWx1ZSwgLW9wdGlvbnMuZGVjaW1hbHMpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sIHtcbiAgICBkZWNpbWFsczogdm9pZCAwLFxuICAgIHRyaW06IGZhbHNlXG4gIH0sICdkZWNpbWFscycpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1N0cmluZycsICdVbmRlZmluZWQnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLnRyaW0pIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICBpZiAodmFsdWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBcIiArIHZhbHVlICsgXCIgdG8gVW5kZWZpbmVkXCIpO1xuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9LCB7XG4gICAgdHJpbTogZmFsc2VcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignVW5kZWZpbmVkJywgJ0RhdGUnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdVbmRlZmluZWQnLCAnTW9tZW50JywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gcmVxdWlyZSgnbW9tZW50JykuaW52YWxpZCgpO1xuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdVbmRlZmluZWQnLCAnU3RyaW5nJywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH0pO1xuICByZXR1cm4ga287XG59O1xuXG5hcHBseUtvdHIoa28pO1xuXHJcbnJldHVybiBrbztcclxufSkpO1xyXG4iLCJhcHBseUtvdHIgPSAoa28pIC0+XHJcbiAga28udHlwZWQgPSB7fVxyXG5cclxuICBmblRydWUgPSAoKSAtPiB0cnVlXHJcbiAgZm5GYWxzZSA9ICgpIC0+IGZhbHNlXHJcbiAgZm5JZGVudGl0eSA9ICh4KSAtPiB4XHJcblxyXG4gIHR5cGVOYW1lVG9TdHJpbmcgPSAodmFsdWUpIC0+XHJcbiAgICBpZiBub3QgdmFsdWU/IG9yIHZhbHVlLmxlbmd0aCA9PSAwXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgIGVsc2UgaWYgaXNBbi5TdHJpbmcuTGl0ZXJhbCh2YWx1ZSlcclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICBlbHNlXHJcbiAgICAgIHJldHVybiB2YWx1ZS5qb2luKCd8JylcclxuXHJcbiAgdHlwZU5hbWVUb0FycmF5ID0gKHZhbHVlKSAtPlxyXG4gICAgdmFsdWUgPSB0eXBlTmFtZVRvU3RyaW5nKHZhbHVlKVxyXG4gICAgaWYgaXNBbi5TdHJpbmcuTGl0ZXJhbCh2YWx1ZSlcclxuICAgICAgcmV0dXJuIHZhbHVlLnNwbGl0KCd8JylcclxuICAgIGVsc2VcclxuICAgICAgcmV0dXJuIFtdXHJcblxyXG4gIHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5ID0gKHZhbHVlKSAtPlxyXG4gICAgdmFsdWUgPSB0eXBlTmFtZVRvQXJyYXkodmFsdWUpXHJcblxyXG4gICAgcmVzdWx0ID0gW11cclxuICAgIGZvciB0eXBlTmFtZSBpbiB2YWx1ZVxyXG4gICAgICBpZiByZXN1bHQuaW5kZXhPZih0eXBlTmFtZSkgPT0gLTFcclxuICAgICAgICByZXN1bHQucHVzaCh0eXBlTmFtZSlcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gIGlzVmFsaWRUeXBlTmFtZSA9ICh2YWx1ZSkgLT5cclxuICAgIHJldHVybiAvXltBLVpdLy50ZXN0KHZhbHVlKVxyXG5cclxuICBpc1R5cGVkID0gKHZhbHVlKSAtPlxyXG4gICAgcmV0dXJuIGlzQW4uRnVuY3Rpb24odmFsdWUpIGFuZCB2YWx1ZS50eXBlTmFtZT8gYW5kIHZhbHVlLnR5cGVOYW1lcz8gYW5kIHZhbHVlLnR5cGVDaGVjaz8gYW5kIHZhbHVlLnR5cGVDaGVja3M/XHJcblxyXG4gIGtvLnR5cGVkLm9wdGlvbnMgPSB7XHJcbiAgICAjIHZhbGlkYXRpb24gb3B0aW9uc1xyXG4gICAgdmFsaWRhdGlvbjoge1xyXG4gICAgICAjIHR1cm4gdmFsaWRhdGlvbiBvbi9vZmZcclxuICAgICAgZW5hYmxlOiBmYWxzZVxyXG5cclxuICAgICAgIyB2YWxpZGF0ZSBvbiByZWFkXHJcbiAgICAgIHJlYWQ6IHRydWVcclxuXHJcbiAgICAgICMgdmFsaWRhdGUgb24gd3JpdGVcclxuICAgICAgd3JpdGU6IHRydWVcclxuXHJcbiAgICAgICMgdmFsaWRhdGUgdGhlIHVuZGVybHlpbmcgb2JzZXJ2YWJsZVxyXG4gICAgICB0YXJnZXQ6IGZhbHNlXHJcblxyXG4gICAgICAjIHZhbGlkYXRlIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZVxyXG4gICAgICByZXN1bHQ6IHRydWVcclxuXHJcbiAgICAgICMgdGhlIG1lc3NhZ2UgdG8gdXNlIChkZWZhdWx0cyB0byB0aGUgbWVzc2FnZSBmcm9tIHRoZSB0aHJvd24gZXhjZXB0aW9uKVxyXG4gICAgICBtZXNzYWdlOiB1bmRlZmluZWRcclxuICAgIH1cclxuXHJcbiAgICBleFJlYWQ6IHtcclxuICAgICAgIyBDYXRjaCBleGNlcHRpb25zLiBNYXkgYWxzbyBiZSBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZXhjZXB0aW9uIHNob3VsZCBiZSBjYXVnaHRcclxuICAgICAgY2F0Y2g6IHRydWVcclxuXHJcbiAgICAgICMgZGVmYXVsdCBjYXRjaCBmdW5jdGlvbiB0byB1c2Ugd2hlbiBjYXRjaCBpcyB0cnVlL2ZhbHNlXHJcbiAgICAgIGNhdGNoVHJ1ZTogKGV4KSAtPiBleCBpbnN0YW5jZW9mIFR5cGVFcnJvclxyXG4gICAgICBjYXRjaEZhbHNlOiBmbkZhbHNlXHJcblxyXG4gICAgICAjIERvIG5vdCB0aHJvdyBleGNlcHRpb25zIHdoZW4gcmVhZGluZy4gVXNlIGRlZmF1bHQgdmFsdWUvZnVuYyBpbnN0ZWFkXHJcbiAgICAgIHVzZURlZmF1bHQ6IGZhbHNlXHJcblxyXG4gICAgICAjIERlZmF1bHQgdmFsdWUgdG8gdXNlIHdoZW4gYW4gZXhjZXB0aW9uIGlzIGNhdWdodFxyXG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZFxyXG5cclxuICAgICAgIyBDb21wdXRlIGEgZGVmYXVsdCB2YWx1ZSB3aGVuIGFuIGV4Y2VwdGlvbiBpcyBjYXVnaHQuIE92ZXJyaWRlcyBkZWZhdWx0VmFsdWVcclxuICAgICAgZGVmYXVsdEZ1bmM6IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgZXhXcml0ZToge1xyXG4gICAgICAjIENhdGNoIGV4Y2VwdGlvbnMuIE1heSBhbHNvIGJlIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBleGNlcHRpb24gc2hvdWxkIGJlIGNhdWdodFxyXG4gICAgICBjYXRjaDogdHJ1ZVxyXG5cclxuICAgICAgIyBkZWZhdWx0IGNhdGNoIGZ1bmN0aW9uIHRvIHVzZSB3aGVuIGNhdGNoIGlzIHRydWUvZmFsc2VcclxuICAgICAgY2F0Y2hUcnVlOiAoZXgpIC0+IGV4IGluc3RhbmNlb2YgVHlwZUVycm9yXHJcbiAgICAgIGNhdGNoRmFsc2U6IGZuRmFsc2VcclxuXHJcbiAgICAgICMgRG8gbm90IHRocm93IGV4Y2VwdGlvbnMgd2hlbiB3cml0aW5nXHJcbiAgICAgIG5vVGhyb3c6IGZhbHNlXHJcblxyXG4gICAgICAjIERvIG5vdCBsZWF2ZSB0YXJnZXQgdW5zZXQuIFNldCB0aGUgdGFyZ2V0IHRvIHRoaXMgdmFsdWUgb24gZXJyb3JcclxuICAgICAgdXNlRGVmYXVsdDogZmFsc2VcclxuXHJcbiAgICAgICMgRGVmYXVsdCB2YWx1ZSB0byB1c2Ugd2hlbiBhbiBleGNlcHRpb24gaXMgY2F1Z2h0XHJcbiAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkXHJcblxyXG4gICAgICAjIENvbXB1dGUgYSBkZWZhdWx0IHZhbHVlIHdoZW4gYW4gZXhjZXB0aW9uIGlzIGNhdWdodC4gT3ZlcnJpZGVzIGRlZmF1bHRWYWx1ZVxyXG4gICAgICBkZWZhdWx0RnVuYzogdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgIyB1c2UgcHVyZSBjb21wdXRlZCBvYnNlcnZhYmxlc1xyXG4gICAgcHVyZTogdHJ1ZVxyXG5cclxuICAgICMgZG8gbm90IGF0dGVtcHQgdG8gcmVhZCB0aGUgdmFsdWUgaW1tZWRpYXRlbHlcclxuICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZVxyXG4gIH1cclxuXHJcbiAgZXh0ZW5kID0gKHJvb3QsIG9iamVjdHMuLi4pIC0+XHJcbiAgICBmb3Igb2JqZWN0IGluIG9iamVjdHNcclxuICAgICAgcm9vdCA9IGtvLnV0aWxzLmV4dGVuZChyb290LCBvYmplY3QpXHJcbiAgICByZXR1cm4gcm9vdFxyXG5cclxuICBub3JtYWxpemVFeCA9IChuYW1lLCByb290LCBvYmplY3RzLi4uKSAtPlxyXG4gICAgcm9vdFtuYW1lXSA9IG9wdCA9IGV4dGVuZCh7fSwgKG9iamVjdD9bbmFtZV0gZm9yIG93biBrZXksIG9iamVjdCBvZiBvYmplY3RzKS4uLilcclxuXHJcbiAgICAjIGZvcmNlIGNhdGNoIHRvIGJlIGEgZnVuY3Rpb25cclxuICAgIGlmIG9wdC5jYXRjaCA9PSB0cnVlXHJcbiAgICAgIG9wdC5jYXRjaCA9IG9wdC5jYXRjaFRydWVcclxuICAgIGVsc2UgaWYgb3B0LmNhdGNoID09IGZhbHNlXHJcbiAgICAgIG9wdC5jYXRjaCA9IG9wdC5jYXRjaEZhbHNlXHJcblxyXG4gICAgIyBmb3JjZSBkZWZhdWx0RnVuY1xyXG4gICAgaWYgb3B0LnVzZURlZmF1bHQgYW5kIG5vdCBvcHQuZGVmYXVsdEZ1bmM/XHJcbiAgICAgIG9wdC5kZWZhdWx0RnVuYyA9ICgpIC0+IG9wdC5kZWZhdWx0VmFsdWVcclxuXHJcbiAgICByZXR1cm4gb3B0XHJcblxyXG4gIG5vcm1hbGl6ZUV4UmVhZCA9IChyb290LCBvYmplY3RzLi4uKSAtPlxyXG4gICAgbm9ybWFsaXplRXgoJ2V4UmVhZCcsIHJvb3QsIG9iamVjdHMuLi4pXHJcblxyXG4gIG5vcm1hbGl6ZUV4V3JpdGUgPSAocm9vdCwgb2JqZWN0cy4uLikgLT5cclxuICAgIG5vcm1hbGl6ZUV4KCdleFdyaXRlJywgcm9vdCwgb2JqZWN0cy4uLilcclxuXHJcbiAgbm9ybWFsaXplVmFsaWRhdGlvbiA9IChyb290LCBvYmplY3RzLi4uKSAtPlxyXG4gICAgbm9ybSA9ICh2KSAtPlxyXG4gICAgICBpZiB2ID09IHRydWVcclxuICAgICAgICByZXR1cm4geyBlbmFibGU6IHRydWUgfVxyXG4gICAgICBlbHNlIGlmIHYgPT0gZmFsc2VcclxuICAgICAgICByZXR1cm4geyBlbmFibGU6IGZhbHNlIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJldHVybiB2XHJcblxyXG4gICAgcm9vdFsndmFsaWRhdGlvbiddID0gb3B0ID0gZXh0ZW5kKHt9LCAobm9ybShvYmplY3Q/Wyd2YWxpZGF0aW9uJ10pIGZvciBvd24ga2V5LCBvYmplY3Qgb2Ygb2JqZWN0cykuLi4pXHJcblxyXG4gICAgcmV0dXJuIG9wdFxyXG5cclxuICB3cmFwUmVhZCA9IChvcHRpb25zLCB0YXJnZXQsIHJlYWRFcnJvciwgcmVhZCkgLT5cclxuICAgIHJldHVybiAoKSAtPlxyXG4gICAgICB0cnlcclxuICAgICAgICByZXR1cm4gcmVhZCgpXHJcbiAgICAgIGNhdGNoIGV4XHJcbiAgICAgICAgaWYgb3B0aW9ucy5leFJlYWQuY2F0Y2goZXgpXHJcbiAgICAgICAgICByZWFkRXJyb3IoZXgpXHJcblxyXG4gICAgICAgICAgaWYgb3B0aW9ucy5leFJlYWQudXNlRGVmYXVsdFxyXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5leFJlYWQuZGVmYXVsdEZ1bmMoKVxyXG5cclxuICAgICAgICB0aHJvdyBleFxyXG4gICAgICBmaW5hbGx5XHJcbiAgICAgICAgaWYgbm90IGV4P1xyXG4gICAgICAgICAgcmVhZEVycm9yKHVuZGVmaW5lZClcclxuXHJcbiAgd3JhcFdyaXRlID0gKG9wdGlvbnMsIHRhcmdldCwgd3JpdGVFcnJvciwgd3JpdGUpIC0+XHJcbiAgICByZXR1cm4gKHZhbHVlKSAtPlxyXG4gICAgICB0cnlcclxuICAgICAgICB3cml0ZSh2YWx1ZSlcclxuICAgICAgY2F0Y2ggZXhcclxuICAgICAgICBpZiBvcHRpb25zLmV4V3JpdGUuY2F0Y2goZXgpXHJcbiAgICAgICAgICB3cml0ZUVycm9yKGV4KVxyXG5cclxuICAgICAgICAgIGlmIG9wdGlvbnMuZXhXcml0ZS51c2VEZWZhdWx0XHJcbiAgICAgICAgICAgIHRhcmdldChvcHRpb25zLmV4V3JpdGUuZGVmYXVsdEZ1bmMoKSlcclxuXHJcbiAgICAgICAgaWYgbm90IG9wdGlvbnMuZXhXcml0ZS5ub1Rocm93XHJcbiAgICAgICAgICB0aHJvdyBleFxyXG4gICAgICBmaW5hbGx5XHJcbiAgICAgICAgaWYgbm90IGV4P1xyXG4gICAgICAgICAgd3JpdGVFcnJvcih1bmRlZmluZWQpXHJcblxyXG4gIHZhbGlkYXRlID0gKHRhcmdldCwgcmVzdWx0LCBvcHRpb25zKSAtPlxyXG4gICAgaWYgbm90IG9wdGlvbnMudmFsaWRhdGlvbi5lbmFibGVcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgdmFsaWRhdGlvbiA9IG9wdGlvbnMudmFsaWRhdGlvblxyXG5cclxuICAgIGlmIChub3QgdmFsaWRhdGlvbi50YXJnZXQgYW5kIG5vdCB2YWxpZGF0aW9uLnJlc3VsdCkgb3IgKG5vdCB2YWxpZGF0aW9uLnJlYWQgYW5kIG5vdCB2YWxpZGF0aW9uLndyaXRlKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBpZiBrby52YWxpZGF0aW9uP1xyXG4gICAgICAjIyNcclxuICAgICAgTm90ZSB0aGF0IHVzaW5nIGtvIHZhbGlkYXRpb24gd2lsbCBmb3JjZSBhbiBpbW1lZGlhdGUgZXZhbHVhdGlvbiBvZiB0aGUgdGFyZ2V0dGVkIG9ic2VydmFibGVzXHJcbiAgICAgICMjI1xyXG4gICAgICBpZiBvcHRpb25zLnZhbGlkYXRpb24ucmVhZCBhbmQgb3B0aW9ucy52YWxpZGF0aW9uLndyaXRlXHJcbiAgICAgICAgbWVzc2FnZSA9ICgpIC0+IHJlc3VsdC53cml0ZUVycm9yKCk/Lm1lc3NhZ2UgPyByZXN1bHQucmVhZEVycm9yKCk/Lm1lc3NhZ2VcclxuICAgICAgZWxzZSBpZiBvcHRpb25zLnZhbGlkYXRpb24ucmVhZFxyXG4gICAgICAgIG1lc3NhZ2UgPSAoKSAtPiByZXN1bHQucmVhZEVycm9yKCk/Lm1lc3NhZ2VcclxuICAgICAgZWxzZSAjaWYgb3B0aW9ucy52YWxpZGF0aW9uLndyaXRlXHJcbiAgICAgICAgbWVzc2FnZSA9ICgpIC0+IHJlc3VsdC53cml0ZUVycm9yKCk/Lm1lc3NhZ2VcclxuXHJcbiAgICAgIGFwcGx5VmFsaWRhdGlvbiA9IChiYXNlKSAtPlxyXG4gICAgICAgIGJhc2UuZXh0ZW5kKHsgdmFsaWRhdGFibGU6IHsgZW5hYmxlOiB0cnVlIH0gfSlcclxuXHJcbiAgICAgICAgcnVsZSA9IHtcclxuICAgICAgICAgIG1lc3NhZ2U6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgdmFsaWRhdG9yOiAoKSAtPlxyXG4gICAgICAgICAgICBtID0gbWVzc2FnZSgpXHJcbiAgICAgICAgICAgIGlmIG5vdCBtP1xyXG4gICAgICAgICAgICAgIHJ1bGUubWVzc2FnZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICBydWxlLm1lc3NhZ2UgPSB2YWxpZGF0aW9uLm1lc3NhZ2UgPyBtXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBrby52YWxpZGF0aW9uLmFkZEFub255bW91c1J1bGUoYmFzZSwgcnVsZSlcclxuXHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICBpZiB2YWxpZGF0aW9uLnRhcmdldFxyXG4gICAgICAgIGFwcGx5VmFsaWRhdGlvbih0YXJnZXQpXHJcblxyXG4gICAgICBpZiB2YWxpZGF0aW9uLnJlc3VsdFxyXG4gICAgICAgIGFwcGx5VmFsaWRhdGlvbihyZXN1bHQpXHJcblxyXG4gICAgcmV0dXJuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAga28uZXh0ZW5kZXJzLnR5cGUgPSAodGFyZ2V0LCBvcHRpb25zKSAtPlxyXG4gICAgIyBSZXF1aXJlc1xyXG4gICAgIyB0eXBlTmFtZSA6IFN0cmluZ1xyXG4gICAgIyB0eXBlTmFtZXMgOiBBcnJheSBvZiBTdHJpbmdcclxuICAgICMgdHlwZUNoZWNrIDogZnVuY3Rpb24gKHZhbHVlKSB7IC4uLiB9XHJcbiAgICAjIHR5cGVDaGVja3MgOiB7IHR5cGVOYW1lOiBmdW5jdGlvbiBpc1R5cGUodmFsdWUpIHsgLi4uIH0sIC4uLiB9XHJcblxyXG4gICAgaWYgaXNBbi5TdHJpbmcuTGl0ZXJhbChvcHRpb25zKSBvciBpc0FuLkFycmF5KG9wdGlvbnMpXHJcbiAgICAgICMgLmV4dGVuZCh7IHR5cGU6ICdUeXBlTmFtZXxUeXBlTmFtZXxUeXBlTmFtZScgfSlcclxuICAgICAgIyAuZXh0ZW5kKHsgdHlwZTogWydUeXBlTmFtZScsJ1R5cGVOYW1lJywuLi5dIH0pXHJcbiAgICAgIG9wdGlvbnMgPSB7IHR5cGU6IG9wdGlvbnMgfVxyXG4gICAgZWxzZSBpZiBpc0FuLkZ1bmN0aW9uKG9wdGlvbnMpXHJcbiAgICAgICMgLmV4dGVuZCh7IHR5cGU6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHJ1ZXxmYWxzZTsgfSB9KVxyXG4gICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgIHR5cGU6IG9wdGlvbnMudHlwZU5hbWVcclxuICAgICAgICBjaGVjazogb3B0aW9uc1xyXG4gICAgICB9XHJcblxyXG4gICAgbm9ybWFsID0gZXh0ZW5kKHt9LCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgbm9ybWFsaXplRXhSZWFkKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucylcclxuICAgIG5vcm1hbGl6ZUV4V3JpdGUobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgbm9ybWFsaXplVmFsaWRhdGlvbihub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICBvcHRpb25zID0gbm9ybWFsXHJcblxyXG4gICAgIyBHYXRoZXIgdHlwZSBuYW1lc1xyXG4gICAgdHlwZU5hbWVzID0gdHlwZU5hbWVUb0FycmF5KG9wdGlvbnMudHlwZSlcclxuICAgIHR5cGVOYW1lcy5wdXNoKChuYW1lIGZvciBvd24gbmFtZSBvZiBvcHRpb25zIHdoZW4gaXNWYWxpZFR5cGVOYW1lKG5hbWUpKS4uLilcclxuICAgIHR5cGVOYW1lcyA9IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KHR5cGVOYW1lcylcclxuICAgIHR5cGVOYW1lID0gdHlwZU5hbWVUb1N0cmluZyh0eXBlTmFtZXMpXHJcblxyXG4gICAgIyBzaW1wbGUgY2hlY2tzXHJcbiAgICB0eXBlQ2hlY2tzU2ltcGxlID0ge31cclxuICAgIGRvIC0+XHJcbiAgICAgIGZvciBuYW1lIGluIHR5cGVOYW1lc1xyXG4gICAgICAgIHR5cGVDaGVja3NTaW1wbGVbbmFtZV0gPSBvcHRpb25zW25hbWVdID8gaXNBbihuYW1lLCB7IHJldHVybkNoZWNrZXI6IHRydWUgfSlcclxuXHJcbiAgICAjIHNpbXBsZSBjaGVja1xyXG4gICAgdHlwZUNoZWNrU2ltcGxlID0gb3B0aW9ucy5jaGVjayA/ICgoKSAtPiB0cnVlKVxyXG5cclxuICAgICMgY2hlY2tzXHJcbiAgICB0eXBlQ2hlY2tzID0ge31cclxuICAgIGRvIC0+XHJcbiAgICAgIGZvciBuYW1lLCBjaGVjayBvZiB0eXBlQ2hlY2tzU2ltcGxlXHJcbiAgICAgICAgZG8gKGNoZWNrKSAtPlxyXG4gICAgICAgICAgdHlwZUNoZWNrc1tuYW1lXSA9ICh2YWx1ZSkgLT5cclxuICAgICAgICAgICAgY2hlY2sodmFsdWUpIGFuZCB0eXBlQ2hlY2tTaW1wbGUodmFsdWUpXHJcblxyXG4gICAgIyBjaGVja1xyXG4gICAgdHlwZUNoZWNrID0gZG8gLT5cclxuICAgICAgcmV0dXJuICh2YWx1ZSkgLT5cclxuICAgICAgICB0eXBlQ2hlY2tTaW1wbGUodmFsdWUpIGFuZCAoKHR5cGVOYW1lcy5sZW5ndGggPT0gMCkgb3IgKHR5cGVOYW1lcy5zb21lKChuYW1lKSAtPiB0eXBlQ2hlY2tzU2ltcGxlW25hbWVdKHZhbHVlKSkpKVxyXG5cclxuICAgIHJlYWRFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG4gICAgd3JpdGVFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG5cclxuICAgIHJlc3VsdCA9IGtvLmNvbXB1dGVkKHtcclxuICAgICAgcHVyZTogb3B0aW9ucy5wdXJlXHJcbiAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZVxyXG5cclxuICAgICAgcmVhZDogd3JhcFJlYWQoXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgcmVhZEVycm9yLFxyXG4gICAgICAgICgpIC0+XHJcbiAgICAgICAgICBpbnRlcm5hbFZhbHVlID0gdGFyZ2V0KClcclxuXHJcbiAgICAgICAgICBpZiBub3QgdHlwZUNoZWNrKGludGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmV4cGVjdGVkIGludGVybmFsIHR5cGUuIEV4cGVjdGVkICN7dHlwZU5hbWV9LCBnb3QgI3tpc0FuKGludGVybmFsVmFsdWUpfVwiKVxyXG5cclxuICAgICAgICAgIHJldHVybiBpbnRlcm5hbFZhbHVlXHJcbiAgICAgIClcclxuICAgICAgd3JpdGU6IHdyYXBXcml0ZShcclxuICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgIHRhcmdldCxcclxuICAgICAgICB3cml0ZUVycm9yLFxyXG4gICAgICAgIChleHRlcm5hbFZhbHVlKSAtPlxyXG4gICAgICAgICAgaWYgdHlwZUNoZWNrKGV4dGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgIHRhcmdldChleHRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5leHBlY3RlZCBleHRlcm5hbCB0eXBlLiBFeHBlY3RlZCAje3R5cGVOYW1lfSwgcmVjZWl2ZWQgI3tpc0FuKGV4dGVybmFsVmFsdWUpfVwiKVxyXG5cclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHJlc3VsdC50eXBlTmFtZSA9IHR5cGVOYW1lXHJcbiAgICByZXN1bHQudHlwZU5hbWVzID0gdHlwZU5hbWVzXHJcbiAgICByZXN1bHQudHlwZUNoZWNrID0gdHlwZUNoZWNrXHJcbiAgICByZXN1bHQudHlwZUNoZWNrcyA9IHR5cGVDaGVja3NcclxuXHJcbiAgICByZXN1bHQucmVhZEVycm9yID0gcmVhZEVycm9yXHJcbiAgICByZXN1bHQud3JpdGVFcnJvciA9IHdyaXRlRXJyb3JcclxuXHJcbiAgICB2YWxpZGF0ZSh0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucylcclxuXHJcbiAgICBpZiBub3Qgb3B0aW9ucy5kZWZlckV2YWx1YXRpb25cclxuICAgICAgdHJ5XHJcbiAgICAgICAgcmVzdWx0LnBlZWsoKVxyXG4gICAgICBjYXRjaCBleFxyXG4gICAgICAgIHJlc3VsdC5kaXNwb3NlKClcclxuICAgICAgICB0aHJvdyBleFxyXG5cclxuICAgIHJldHVybiByZXN1bHRcclxuXHJcbiAga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucyA9IHtcclxuICB9XHJcblxyXG5cclxuICBrby5leHRlbmRlcnMuY29udmVydCA9ICh0YXJnZXQsIG9wdGlvbnMpIC0+XHJcbiAgICBpZiBvcHRpb25zID09IGZhbHNlXHJcbiAgICAgIHJldHVybiB0YXJnZXRcclxuXHJcbiAgICAjIG5vcm1hbGl6ZSBvcHRpb25zXHJcbiAgICBkbyAtPlxyXG4gICAgICBpZiBpc0FuLlN0cmluZyhvcHRpb25zKSBvciBpc0FuLkFycmF5KG9wdGlvbnMpXHJcbiAgICAgICAgb3B0aW9ucyA9IHsgdHlwZTogb3B0aW9ucyB9XHJcbiAgICAgIGVsc2UgaWYgb3B0aW9ucyA9PSB0cnVlXHJcbiAgICAgICAgb3B0aW9ucyA9IHt9XHJcblxyXG4gICAgICAjIG1lcmdlIG9wdGlvbnNcclxuICAgICAgb3B0aW9ucyA9IGV4dGVuZCh7fSwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucylcclxuXHJcbiAgICAgIG5vcm1hbCA9IHtcclxuICAgICAgICBjaGVja1NlbGY6IG9wdGlvbnMuY2hlY2sgPyBmblRydWVcclxuICAgICAgICByZWFkOiBvcHRpb25zLnJlYWRcclxuICAgICAgICB3cml0ZTogb3B0aW9ucy53cml0ZVxyXG4gICAgICAgIGNoZWNrczoge31cclxuICAgICAgICBjaGVja2VyczogW11cclxuICAgICAgICBpc1R5cGVkOiBpc1R5cGVkKHRhcmdldClcclxuICAgICAgICBpZ25vcmVEZWZhdWx0Q29udmVydGVyczogb3B0aW9ucy5pZ25vcmVEZWZhdWx0Q29udmVydGVyc1xyXG4gICAgICAgIHB1cmU6IG9wdGlvbnMucHVyZVxyXG4gICAgICAgIGRlZmVyRXZhbHVhdGlvbjogb3B0aW9ucy5kZWZlckV2YWx1YXRpb25cclxuICAgICAgICB0eXBlczogdHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXkob3B0aW9ucy50eXBlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBub3JtYWxpemVFeFJlYWQobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgICBub3JtYWxpemVFeFdyaXRlKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucylcclxuICAgICAgbm9ybWFsaXplVmFsaWRhdGlvbihub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpXHJcblxyXG4gICAgICAjIEV4cGFuZCBlYWNoIEV4dGVybmFsIFR5cGVcclxuICAgICAgZm9yIG93biBleHRUeXBlTmFtZSwgZXh0VHlwZU9wdGlvbnMgb2Ygb3B0aW9uc1xyXG4gICAgICAgIGlmIG5vdCBpc1ZhbGlkVHlwZU5hbWUoZXh0VHlwZU5hbWUpXHJcbiAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICBleHRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgbm9ybWFsW2V4dFR5cGVOYW1lXSA9IHtcclxuICAgICAgICAgIGNoZWNrU2VsZjogZXh0VHlwZU9wdGlvbnMuY2hlY2tcclxuICAgICAgICAgIHJlYWQ6IGV4dFR5cGVPcHRpb25zLnJlYWRcclxuICAgICAgICAgIHdyaXRlOiBleHRUeXBlT3B0aW9ucy53cml0ZVxyXG4gICAgICAgICAgdHlwZXM6IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KGV4dFR5cGVPcHRpb25zLnR5cGUpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjIEV4cGFuZCBhbGwgaW50ZXJuYWwgdHlwZXNcclxuICAgICAgICBmb3Igb3duIGludFR5cGVOYW1lIG9mIGV4dFR5cGVPcHRpb25zXHJcbiAgICAgICAgICBpZiBub3QgaXNWYWxpZFR5cGVOYW1lKGludFR5cGVOYW1lKVxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgIGludFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV0/W2ludFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgbm9ybWFsW2V4dFR5cGVOYW1lXVtpbnRUeXBlTmFtZV0gPSB7XHJcbiAgICAgICAgICAgIHJlYWQ6IGludFR5cGVPcHRpb25zLnJlYWRcclxuICAgICAgICAgICAgd3JpdGU6IGludFR5cGVPcHRpb25zLndyaXRlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICBub3JtYWwudHlwZSA9IHR5cGVOYW1lVG9TdHJpbmcobm9ybWFsLnR5cGVzKVxyXG5cclxuICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIG5vcm1hbC50eXBlc1xyXG4gICAgICAgIGNoZWNrZXIgPSBub3JtYWxbZXh0VHlwZU5hbWVdPy5jaGVja1NlbGYgPyBpc0FuKGV4dFR5cGVOYW1lLCB7IHJldHVybkNoZWNrZXI6IHRydWUgfSkgPyBmblRydWVcclxuICAgICAgICBub3JtYWwuY2hlY2tzW2V4dFR5cGVOYW1lXSA9IGRvIChjaGVja2VyKSAtPlxyXG4gICAgICAgICAgKHZhbHVlKSAtPiBub3JtYWwuY2hlY2tTZWxmKHZhbHVlKSBhbmQgY2hlY2tlcih2YWx1ZSlcclxuICAgICAgICBub3JtYWwuY2hlY2tlcnMucHVzaChub3JtYWwuY2hlY2tzW2V4dFR5cGVOYW1lXSlcclxuXHJcbiAgICAgIG5vcm1hbC5jaGVjayA9ICh2YWx1ZSkgLT5cclxuICAgICAgICBub3JtYWwuY2hlY2tTZWxmKHZhbHVlKSBhbmQgKChub3JtYWwuY2hlY2tlcnMubGVuZ3RoID09IDApIG9yIG5vcm1hbC5jaGVja2Vycy5zb21lKChjaGVja2VyKSAtPiBjaGVja2VyKHZhbHVlKSkpXHJcblxyXG4gICAgICBvcHRpb25zID0gbm9ybWFsXHJcblxyXG5cclxuICAgIHJlYWRFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG4gICAgd3JpdGVFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG5cclxuICAgIHJlc3VsdCA9IGtvLmNvbXB1dGVkKHtcclxuICAgICAgcHVyZTogb3B0aW9ucy5wdXJlXHJcbiAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZVxyXG5cclxuICAgICAgcmVhZDogd3JhcFJlYWQoXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgcmVhZEVycm9yLFxyXG4gICAgICAgICgpIC0+XHJcbiAgICAgICAgICBpbnRlcm5hbFZhbHVlID0gdGFyZ2V0KClcclxuICAgICAgICAgIGV4dGVybmFsVmFsdWUgPSB1bmRlZmluZWRcclxuXHJcbiAgICAgICAgICAjIFRyeSBleGFjdCBpbnRlcm5hbCB0eXBlIG1hdGNoXHJcbiAgICAgICAgICB0cnlSZWFkID0gKHJlYWQsIHJlYWRPcHRpb25zKSAtPlxyXG4gICAgICAgICAgICBpZiByZWFkP1xyXG4gICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxWYWx1ZSA9IHJlYWQoaW50ZXJuYWxWYWx1ZSwgcmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgY2F0Y2ggZXhcclxuICAgICAgICAgICAgICAgIGlmIGV4IG5vdCBpbnN0YW5jZW9mIFR5cGVFcnJvclxyXG4gICAgICAgICAgICAgICAgICB0aHJvdyBleFxyXG5cclxuICAgICAgICAgICAgICBpZiBub3QgZXg/XHJcbiAgICAgICAgICAgICAgICBpZiBvcHRpb25zLmNoZWNrKGV4dGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgICAgICAgICBleHRUeXBlTmFtZXMgPSBvcHRpb25zLnR5cGVzXHJcbiAgICAgICAgICBpZiBleHRUeXBlTmFtZXMubGVuZ3RoID09IDBcclxuICAgICAgICAgICAgZXh0VHlwZU5hbWVzID0gW2lzQW4oaW50ZXJuYWxWYWx1ZSldXHJcblxyXG4gICAgICAgICAgIyBMb29rIGZvciBzcGVjaWZpYyBjb252ZXJzaW9uXHJcbiAgICAgICAgICBmb3IgZXh0VHlwZU5hbWUgaW4gZXh0VHlwZU5hbWVzXHJcbiAgICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV0gPyB7fVxyXG5cclxuICAgICAgICAgICAgIyBpbnRlcm5hbCB0eXBlc1xyXG4gICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBleHRUeXBlT3B0aW9ucy50eXBlcyA/IFtdXHJcbiAgICAgICAgICAgIGlmIGludFR5cGVOYW1lcy5sZW5ndGggPT0gMFxyXG4gICAgICAgICAgICAgIGlmIG9wdGlvbnMuaXNUeXBlZFxyXG4gICAgICAgICAgICAgICAgIyBnbyBieSB0YXJnZXQgb3JkZXJcclxuICAgICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IHRhcmdldC50eXBlTmFtZXNcclxuICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAjIGdvIGJ5IGluZmVycmVkIG9yZGVyXHJcbiAgICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBbaXNBbihpbnRlcm5hbFZhbHVlKV1cclxuXHJcbiAgICAgICAgICAgIGZvciBpbnRUeXBlTmFtZSBpbiBpbnRUeXBlTmFtZXNcclxuICAgICAgICAgICAgICAjIGNoZWNrIGludGVybmFsIHR5cGVcclxuICAgICAgICAgICAgICBpZiBvcHRpb25zLmlzVHlwZWQgYW5kIG5vdCB0YXJnZXQudHlwZUNoZWNrc1tpbnRUeXBlTmFtZV0/KGludGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAjIGdldCB0aGUgb3B0aW9uc1xyXG4gICAgICAgICAgICAgIGludFR5cGVPcHRpb25zID0gZXh0VHlwZU9wdGlvbnNbaW50VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgICAgICAgIyB0cnkgY3VzdG9tIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICBpZiBpbnRUeXBlT3B0aW9ucy5yZWFkP1xyXG4gICAgICAgICAgICAgICAgaWYgdHJ5UmVhZChpbnRUeXBlT3B0aW9ucy5yZWFkLCBpbnRUeXBlT3B0aW9ucy5yZWFkT3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWVcclxuICAgICAgICAgICAgICAjIHRyeSBubyBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgZWxzZSBpZiBpbnRUeXBlTmFtZSA9PSBleHRUeXBlTmFtZVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGV4dFR5cGVPcHRpb25zLnJlYWQ/IGFuZCBub3Qgb3B0aW9ucy5yZWFkPyBhbmQgdHJ5UmVhZChmbklkZW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnNcclxuICAgICAgICAgICAgICAgICMgdHJ5IGRlZmF1bHQgY29udmVyc2lvblxyXG4gICAgICAgICAgICAgICAgaWYgdHJ5UmVhZChrby50eXBlZC5nZXRDb252ZXJ0ZXIoaW50VHlwZU5hbWUsIGV4dFR5cGVOYW1lKSwgaW50VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlXHJcblxyXG4gICAgICAgICAgIyBMb29rIGZvciBvbmUtc2lkZWQgY29udmVyc2lvblxyXG4gICAgICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIGV4dFR5cGVOYW1lc1xyXG4gICAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgICAgICMgdHJ5IGN1c3RvbSBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgIGlmIHRyeVJlYWQoZXh0VHlwZU9wdGlvbnMucmVhZCwgZXh0VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWVcclxuXHJcbiAgICAgICAgICAjIExvb2sgZm9yIGdlbmVyaWMgY29udmVyc2lvblxyXG4gICAgICAgICAgaWYgdHJ5UmVhZChvcHRpb25zLnJlYWQsIG9wdGlvbnMucmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlXHJcblxyXG4gICAgICAgICAgaWYgb3B0aW9ucy50eXBlP1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBpbnRlcm5hbCB0eXBlICN7aXNBbihpbnRlcm5hbFZhbHVlKX0gdG8gZXh0ZXJuYWwgdHlwZSAje29wdGlvbnMudHlwZX1cIilcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gaW50ZXJuYWwgdHlwZSAje2lzQW4oaW50ZXJuYWxWYWx1ZSl9XCIpXHJcbiAgICAgIClcclxuXHJcbiAgICAgIHdyaXRlOiB3cmFwV3JpdGUoXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgd3JpdGVFcnJvcixcclxuICAgICAgICAoZXh0ZXJuYWxWYWx1ZSkgLT5cclxuICAgICAgICAgIHRyeVdyaXRlID0gKHdyaXRlLCB3cml0ZU9wdGlvbnMpIC0+XHJcbiAgICAgICAgICAgIGlmIHdyaXRlP1xyXG4gICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IHdyaXRlKGV4dGVybmFsVmFsdWUsIHdyaXRlT3B0aW9ucylcclxuICAgICAgICAgICAgICBjYXRjaCBleFxyXG4gICAgICAgICAgICAgICAgaWYgZXggbm90IGluc3RhbmNlb2YgVHlwZUVycm9yXHJcbiAgICAgICAgICAgICAgICAgIHRocm93IGV4XHJcblxyXG4gICAgICAgICAgICAgIGlmIG5vdCBleD9cclxuICAgICAgICAgICAgICAgIHRhcmdldChpbnRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgICAgIGlmIG5vdCBvcHRpb25zLmNoZWNrU2VsZj8gb3Igb3B0aW9ucy5jaGVja1NlbGYoZXh0ZXJuYWxWYWx1ZSlcclxuICAgICAgICAgICAgZXh0VHlwZU5hbWVzID0gb3B0aW9ucy50eXBlc1xyXG4gICAgICAgICAgICBpZiBleHRUeXBlTmFtZXMubGVuZ3RoID09IDBcclxuICAgICAgICAgICAgICBleHRUeXBlTmFtZXMgPSBbaXNBbihleHRlcm5hbFZhbHVlKV1cclxuXHJcbiAgICAgICAgICAgICMgTG9vayBmb3Igc3BlY2lmaWMgY29udmVyc2lvblxyXG4gICAgICAgICAgICBmb3IgZXh0VHlwZU5hbWUgaW4gZXh0VHlwZU5hbWVzXHJcbiAgICAgICAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChleHRUeXBlT3B0aW9ucy5jaGVja1NlbGY/IGFuZCBub3QgZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmKGV4dGVybmFsVmFsdWUpKSBvciAobm90IGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZj8gYW5kIG5vdCBpc0FuKGV4dGVybmFsVmFsdWUsIGV4dFR5cGVOYW1lKSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICAgICMgaW50ZXJuYWwgdHlwZXNcclxuICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBleHRUeXBlT3B0aW9ucy50eXBlcyA/IFtdXHJcbiAgICAgICAgICAgICAgaWYgaW50VHlwZU5hbWVzLmxlbmd0aCA9PSAwXHJcbiAgICAgICAgICAgICAgICBpZiBvcHRpb25zLmlzVHlwZWRcclxuICAgICAgICAgICAgICAgICAgIyBnbyBieSB0YXJnZXQgb3JkZXJcclxuICAgICAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gdGFyZ2V0LnR5cGVOYW1lc1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAjIGdvIGJ5IGluZmVycmVkIG9yZGVyXHJcbiAgICAgICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IFtpc0FuKGV4dGVybmFsVmFsdWUpXVxyXG5cclxuICAgICAgICAgICAgICBmb3IgaW50VHlwZU5hbWUgaW4gaW50VHlwZU5hbWVzXHJcbiAgICAgICAgICAgICAgICBpbnRUeXBlT3B0aW9ucyA9IGV4dFR5cGVPcHRpb25zW2ludFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgICAgICAgIyB0cnkgY3VzdG9tIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgIGlmIGludFR5cGVPcHRpb25zLndyaXRlP1xyXG4gICAgICAgICAgICAgICAgICBpZiB0cnlXcml0ZShpbnRUeXBlT3B0aW9ucy53cml0ZSwgaW50VHlwZU9wdGlvbnMud3JpdGVPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgIyB0cnkgbm8gY29udmVyc2lvblxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiBleHRUeXBlTmFtZSA9PSBpbnRUeXBlTmFtZVxyXG4gICAgICAgICAgICAgICAgICBpZiBub3QgZXh0VHlwZU9wdGlvbnMud3JpdGU/IGFuZCBub3Qgb3B0aW9ucy53cml0ZT8gYW5kIChub3Qgb3B0aW9ucy5pc1R5cGVkIG9yIHRhcmdldC50eXBlQ2hlY2tzW2V4dFR5cGVOYW1lXShleHRlcm5hbFZhbHVlKSkgYW5kIHRyeVdyaXRlKGZuSWRlbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAjIHRyeSBkZWZhdWx0IGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnNcclxuICAgICAgICAgICAgICAgICAgaWYgdHJ5V3JpdGUoa28udHlwZWQuZ2V0Q29udmVydGVyKGV4dFR5cGVOYW1lLCBpbnRUeXBlTmFtZSksIGludFR5cGVPcHRpb25zLndyaXRlT3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICMgTG9vayBmb3Igb25lLXNpZGVkIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIGV4dFR5cGVOYW1lc1xyXG4gICAgICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV0gPyB7fVxyXG5cclxuICAgICAgICAgICAgICBpZiAoZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmPyBhbmQgbm90IGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZihleHRlcm5hbFZhbHVlKSkgb3IgKG5vdCBleHRUeXBlT3B0aW9ucy5jaGVja1NlbGY/IGFuZCBub3QgaXNBbihleHRlcm5hbFZhbHVlLCBleHRUeXBlTmFtZSkpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAjIHRyeSBjdXN0b20gY29udmVyc2lvblxyXG4gICAgICAgICAgICAgIGlmIHRyeVdyaXRlKGV4dFR5cGVPcHRpb25zLndyaXRlLCBleHRUeXBlT3B0aW9ucy53cml0ZU9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICMgTG9vayBmb3IgZ2VuZXJpYyBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgIGlmIHRyeVdyaXRlKG9wdGlvbnMud3JpdGUsIG9wdGlvbnMud3JpdGVPcHRpb25zKVxyXG4gICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgIGlmIG9wdGlvbnMuaXNUeXBlZFxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBleHRlcm5hbCB0eXBlICN7aXNBbihleHRlcm5hbFZhbHVlKX0gdG8gaW50ZXJuYWwgdHlwZSAje3RhcmdldC50eXBlTmFtZX1cIilcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gZXh0ZXJuYWwgdHlwZSAje2lzQW4oZXh0ZXJuYWxWYWx1ZSl9XCIpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgcmVzdWx0LnR5cGVOYW1lID0gb3B0aW9ucy50eXBlXHJcbiAgICByZXN1bHQudHlwZU5hbWVzID0gb3B0aW9ucy50eXBlc1xyXG4gICAgcmVzdWx0LnR5cGVDaGVjayA9IG9wdGlvbnMuY2hlY2tcclxuICAgIHJlc3VsdC50eXBlQ2hlY2tzID0gb3B0aW9ucy5jaGVja3NcclxuXHJcbiAgICByZXN1bHQucmVhZEVycm9yID0gcmVhZEVycm9yXHJcbiAgICByZXN1bHQud3JpdGVFcnJvciA9IHdyaXRlRXJyb3JcclxuXHJcbiAgICB2YWxpZGF0ZSh0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucylcclxuXHJcbiAgICBpZiBub3Qgb3B0aW9ucy5kZWZlckV2YWx1YXRpb25cclxuICAgICAgdHJ5XHJcbiAgICAgICAgcmVzdWx0LnBlZWsoKVxyXG4gICAgICBjYXRjaCBleFxyXG4gICAgICAgIHJlc3VsdC5kaXNwb3NlKClcclxuICAgICAgICB0aHJvdyBleFxyXG5cclxuICAgIHJldHVybiByZXN1bHRcclxuXHJcbiAga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucyA9IHtcclxuICB9XHJcblxyXG5cclxuICBkbyAtPlxyXG4gICAga28udHlwZWQuX2NvbnZlcnRlcnMgPSBjb252ZXJ0ZXJzID0ge31cclxuXHJcbiAgICBrby50eXBlZC5hZGRDb252ZXJ0ZXIgPSAoZnJvbVR5cGVOYW1lLCB0b1R5cGVOYW1lLCBjb252ZXJ0ZXIsIGRlZmF1bHRPcHRpb25zLCBkZWZhdWx0T3B0aW9uKSAtPlxyXG4gICAgICBjb25zb2xlPy5hc3NlcnQ/KGlzVmFsaWRUeXBlTmFtZShmcm9tVHlwZU5hbWUpLCBcIkludmFsaWQgdHlwZU5hbWUgI3tmcm9tVHlwZU5hbWV9XCIpXHJcbiAgICAgIGNvbnNvbGU/LmFzc2VydD8oaXNWYWxpZFR5cGVOYW1lKHRvVHlwZU5hbWUpLCBcIkludmFsaWQgdHlwZU5hbWUgI3tmcm9tVHlwZU5hbWV9XCIpXHJcblxyXG4gICAgICBpZiBkZWZhdWx0T3B0aW9ucz9cclxuICAgICAgICBpZiBkZWZhdWx0T3B0aW9uP1xyXG4gICAgICAgICAgd3JhcHBlciA9ICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAyIGFuZCBub3QgaXNBbi5PYmplY3Qob3B0aW9ucylcclxuICAgICAgICAgICAgICBvID0ge31cclxuICAgICAgICAgICAgICBvW2RlZmF1bHRPcHRpb25dID0gb3B0aW9uc1xyXG4gICAgICAgICAgICAgIG9wdGlvbnMgPSBvXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlLCBrby51dGlscy5leHRlbmQoa28udXRpbHMuZXh0ZW5kKHt9LCB3cmFwcGVyLm9wdGlvbnMpLCBvcHRpb25zKSlcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICB3cmFwcGVyID0gKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlLCBrby51dGlscy5leHRlbmQoa28udXRpbHMuZXh0ZW5kKHt9LCB3cmFwcGVyLm9wdGlvbnMpLCBvcHRpb25zKSlcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHdyYXBwZXIgPSAodmFsdWUpIC0+XHJcbiAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlKVxyXG5cclxuICAgICAgd3JhcHBlci5vcHRpb25zID0gZGVmYXVsdE9wdGlvbnNcclxuXHJcbiAgICAgIGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXSA/PSB7fVxyXG4gICAgICBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV1bdG9UeXBlTmFtZV0gPSB3cmFwcGVyXHJcblxyXG4gICAgICByZXR1cm4ga28udHlwZWRcclxuXHJcbiAgICBrby50eXBlZC5nZXRDb252ZXJ0ZXIgPSAoZnJvbVR5cGVOYW1lLCB0b1R5cGVOYW1lKSAtPlxyXG4gICAgICBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0/W3RvVHlwZU5hbWVdXHJcblxyXG4gICAga28udHlwZWQucmVtb3ZlQ29udmVydGVyID0gKGZyb21UeXBlTmFtZSwgdG9UeXBlTmFtZSkgLT5cclxuICAgICAgaWYgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdP1t0b1R5cGVOYW1lXT9cclxuICAgICAgICBkZWxldGUgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdP1t0b1R5cGVOYW1lXVxyXG5cclxuICAgICAgcmV0dXJuIGtvLnR5cGVkXHJcblxyXG4gICAgcmV0dXJuXHJcblxyXG5cclxuICBkbyAtPlxyXG4gICAgIyMgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTWF0aC9yb3VuZFxyXG4gICAgZGVjaW1hbEFkanVzdCA9ICh0eXBlLCB2YWx1ZSwgZXhwKSAtPlxyXG4gICAgICAjIGlmIGV4cCBpcyB1bmRlZmluZWQgb3IgemVyb1xyXG4gICAgICBpZiBub3QgZXhwPyBvciArZXhwID09IDBcclxuICAgICAgICByZXR1cm4gdHlwZSh2YWx1ZSlcclxuXHJcbiAgICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICAgIGV4cCA9ICtleHBcclxuXHJcbiAgICAgICMgSWYgdGhlIHZhbHVlIGl0IG5vdCBhIG51bWJlciBvZiB0aGUgZXhwIGlzIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgIGlmIChpc05hTih2YWx1ZSkgb3Igbm90ICh0eXBlb2YgZXhwID09ICdudW1iZXInIGFuZCBleHAgJSAxID09IDApKVxyXG4gICAgICAgIHJldHVybiBOYU5cclxuXHJcbiAgICAgICMgU2hpZnRcclxuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KCdlJylcclxuICAgICAgdmFsdWUgPSB0eXBlKCsodmFsdWVbMF0gKyAnZScgKyAoaWYgdmFsdWVbMV0gdGhlbiAoK3ZhbHVlWzFdIC0gZXhwKSBlbHNlIC1leHApKSlcclxuXHJcbiAgICAgICMgU2hpZnQgYmFja1xyXG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJ2UnKVxyXG4gICAgICByZXR1cm4gKCsodmFsdWVbMF0gKyAnZScgKyAoaWYgdmFsdWVbMV0gdGhlbiAoK3ZhbHVlWzFdICsgZXhwKSBlbHNlIGV4cCkpKVxyXG5cclxuICAgICMjIyAhcHJhZ21hIGNvdmVyYWdlLXNraXAtbmV4dCAjIyNcclxuICAgIGlmIG5vdCBNYXRoLnJvdW5kMTA/XHJcbiAgICAgIE1hdGgucm91bmQxMCA9ICh2YWx1ZSwgZXhwKSAtPlxyXG4gICAgICAgIHJldHVybiBkZWNpbWFsQWRqdXN0KE1hdGgucm91bmQsIHZhbHVlLCBleHApXHJcblxyXG4gICAgIyMjICFwcmFnbWEgY292ZXJhZ2Utc2tpcC1uZXh0ICMjI1xyXG4gICAgaWYgbm90IE1hdGguZmxvb3IxMD9cclxuICAgICAgTWF0aC5mbG9vcjEwID0gKHZhbHVlLCBleHApIC0+XHJcbiAgICAgICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoTWF0aC5mbG9vciwgdmFsdWUsIGV4cClcclxuXHJcbiAgICAjIyMgIXByYWdtYSBjb3ZlcmFnZS1za2lwLW5leHQgIyMjXHJcbiAgICBpZiBub3QgTWF0aC5jZWlsMTA/XHJcbiAgICAgIE1hdGguY2VpbDEwID0gKHZhbHVlLCBleHApIC0+XHJcbiAgICAgICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoTWF0aC5jZWlsLCB2YWx1ZSwgZXhwKVxyXG5cclxuICAgIHJldHVyblxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnQm9vbGVhbidcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgcmV0dXJuIGlmIHZhbHVlIHRoZW4gb3B0aW9ucy50cnV0aHkgZWxzZSBvcHRpb25zLmZhbHNleVxyXG4gICAge1xyXG4gICAgICB0cnV0aHk6IDFcclxuICAgICAgZmFsc2V5OiAwXHJcbiAgICB9XHJcbiAgICAndHJ1dGh5J1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0Jvb2xlYW4nXHJcbiAgICAnTnVtYmVyJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICByZXR1cm4gaWYgdmFsdWUgdGhlbiBvcHRpb25zLnRydXRoeSBlbHNlIG9wdGlvbnMuZmFsc2V5XHJcbiAgICB7XHJcbiAgICAgIHRydXRoeTogMVxyXG4gICAgICBmYWxzZXk6IDBcclxuICAgIH1cclxuICAgICd0cnV0aHknXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnQm9vbGVhbidcclxuICAgICdTdHJpbmcnXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIHZhbHVlID0gaWYgdmFsdWUgdGhlbiBvcHRpb25zLnRydXRoeSBlbHNlIG9wdGlvbnMuZmFsc2V5XHJcblxyXG4gICAgICBpZiBvcHRpb25zLnVwcGVyQ2FzZVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9VcHBlckNhc2UoKVxyXG5cclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB7XHJcbiAgICAgIHVwcGVyQ2FzZTogZmFsc2VcclxuICAgICAgdHJ1dGh5OiAndHJ1ZSdcclxuICAgICAgZmFsc2V5OiAnZmFsc2UnXHJcbiAgICB9XHJcbiAgICAndXBwZXJDYXNlJ1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0RhdGUnXHJcbiAgICAnTW9tZW50J1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICAobW9tZW50ID8gcmVxdWlyZSgnbW9tZW50JykpKHZhbHVlKVxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0RhdGUnXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBpc05hTih2YWx1ZS52YWx1ZU9mKCkpXHJcbiAgICAgICAgcmV0dXJuICcnXHJcblxyXG4gICAgICBtZXRob2QgPSBvcHRpb25zLmZvcm1hdHNbb3B0aW9ucy5mb3JtYXRdXHJcbiAgICAgIHJldHVybiB2YWx1ZVttZXRob2RdLmFwcGx5KHZhbHVlLCBvcHRpb25zLnBhcmFtcylcclxuXHJcbiAgICB7XHJcbiAgICAgIGZvcm1hdHM6IHtcclxuICAgICAgICBkYXRlOiAndG9EYXRlU3RyaW5nJ1xyXG4gICAgICAgIGlzbzogJ3RvSVNPU3RyaW5nJ1xyXG4gICAgICAgIGpzb246ICd0b0pTT04nXHJcbiAgICAgICAgbG9jYWxlRGF0ZTogJ3RvTG9jYWxlRGF0ZVN0cmluZydcclxuICAgICAgICBsb2NhbGVUaW1lOiAndG9Mb2NhbGVUaW1lU3RyaW5nJ1xyXG4gICAgICAgIGxvY2FsZTogJ3RvTG9jYWxlU3RyaW5nJ1xyXG4gICAgICAgIHRpbWU6ICd0b1RpbWVTdHJpbmcnXHJcbiAgICAgICAgdXRjOiAndG9VVENTdHJpbmcnXHJcbiAgICAgICAgZGVmYXVsdDogJ3RvU3RyaW5nJ1xyXG4gICAgICB9XHJcbiAgICAgIGZvcm1hdDogJ2RlZmF1bHQnXHJcbiAgICAgIHBhcmFtczogW11cclxuICAgIH1cclxuICAgICdmb3JtYXQnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnRGF0ZScsXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgbm90IGlzTmFOKHZhbHVlLnZhbHVlT2YoKSlcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIHZhbGlkIERhdGUgdG8gVW5kZWZpbmVkJylcclxuXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdNb21lbnQnXHJcbiAgICAnRGF0ZSdcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgdmFsdWUudG9EYXRlKClcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdNb21lbnQnXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBub3QgdmFsdWUuaXNWYWxpZCgpXHJcbiAgICAgICAgcmV0dXJuICcnXHJcblxyXG4gICAgICByZXR1cm4gdmFsdWUubG9jYWxlKG9wdGlvbnMubG9jYWxlKS5mb3JtYXQob3B0aW9ucy5mb3JtYXQpXHJcbiAgICB7XHJcbiAgICAgIGxvY2FsZTogJ2VuJ1xyXG4gICAgICBmb3JtYXQ6ICdMJ1xyXG4gICAgfVxyXG4gICAgJ2Zvcm1hdCdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdNb21lbnQnLFxyXG4gICAgJ1VuZGVmaW5lZCcsXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIHZhbHVlLmlzVmFsaWQoKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gdmFsaWQgTW9tZW50IHRvIFVuZGVmaW5lZCcpXHJcblxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTnVtYmVyJ1xyXG4gICAgJ0Jvb2xlYW4nXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMuZmFsc2V5PyBhbmQgdmFsdWUgPT0gb3B0aW9ucy5mYWxzZXlcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgZWxzZSBpZiBvcHRpb25zLnRydXRoeT8gYW5kIHZhbHVlID09IG9wdGlvbnMudHJ1dGh5XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgZWxzZSBpZiBub3Qgb3B0aW9ucy5mYWxzZXk/XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMudHJ1dGh5P1xyXG4gICAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBCb29sZWFuXCIpXHJcbiAgICB7XHJcbiAgICAgIHRydXRoeTogdW5kZWZpbmVkXHJcbiAgICAgIGZhbHNleTogMFxyXG4gICAgfVxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ051bWJlcidcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgbm90IG9wdGlvbnMubW9kZT9cclxuICAgICAgICBpZiBub3QgaXNBbi5OdW1iZXIuSW50ZWdlcih2YWx1ZSlcclxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGZyb20gTnVtYmVyIHRvIE51bWJlci5JbnRlZ2VyLiBOdW1iZXIgaXMgbm90IGFuIGludGVnZXInKVxyXG4gICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICBlbHNlIGlmIHR5cGVvZiBvcHRpb25zLm1vZGUgPT0gJ3N0cmluZydcclxuICAgICAgICBtb2RlID0gTWF0aFtvcHRpb25zLm1vZGVdXHJcbiAgICAgIGVsc2VcclxuICAgICAgICBtb2RlID0gb3B0aW9ucy5tb2RlXHJcblxyXG4gICAgICByZXR1cm4gbW9kZSh2YWx1ZSlcclxuICAgIHtcclxuICAgICAgbW9kZTogdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICAnbW9kZSdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXInXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLmRlY2ltYWxzP1xyXG4gICAgICAgIHZhbHVlID0gTWF0aC5yb3VuZDEwKHZhbHVlLCAtb3B0aW9ucy5kZWNpbWFscylcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvRml4ZWQob3B0aW9ucy5kZWNpbWFscylcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKVxyXG5cclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB7XHJcbiAgICAgIGRlY2ltYWxzOiB1bmRlZmluZWRcclxuICAgIH1cclxuICAgICdkZWNpbWFscydcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICdCb29sZWFuJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLmZhbHNleT8gYW5kIHZhbHVlID09IG9wdGlvbnMuZmFsc2V5XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIGVsc2UgaWYgb3B0aW9ucy50cnV0aHk/IGFuZCB2YWx1ZSA9PSBvcHRpb25zLnRydXRoeVxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMuZmFsc2V5P1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICBlbHNlIGlmIG5vdCBvcHRpb25zLnRydXRoeT9cclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IGZyb20gI3t2YWx1ZX0gdG8gQm9vbGVhblwiKVxyXG4gICAge1xyXG4gICAgICB0cnV0aHk6IHVuZGVmaW5lZFxyXG4gICAgICBmYWxzZXk6IDBcclxuICAgIH1cclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICdOdW1iZXInLFxyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICdTdHJpbmcnLFxyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKG9wdGlvbnMuYmFzZSlcclxuICAgICAgaWYgb3B0aW9ucy51cHBlckNhc2VcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKClcclxuXHJcbiAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAge1xyXG4gICAgICBiYXNlOiAxMFxyXG4gICAgICB1cHBlckNhc2U6IGZhbHNlXHJcbiAgICB9XHJcbiAgICAnYmFzZSdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdTdHJpbmcnLFxyXG4gICAgJ0Jvb2xlYW4nLFxyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLnRyaW1cclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKVxyXG5cclxuICAgICAgaWYgb3B0aW9ucy5pZ25vcmVDYXNlXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpXHJcblxyXG4gICAgICBpZiBvcHRpb25zLnN0cmljdFxyXG4gICAgICAgIGlmIHZhbHVlID09IG9wdGlvbnMudHJ1dGh5WzBdXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIGVsc2UgaWYgdmFsdWUgPT0gb3B0aW9ucy5mYWxzZXlbMF1cclxuICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgZm9yIHRydXRoeSBpbiBvcHRpb25zLnRydXRoeVxyXG4gICAgICAgICAgaWYgdmFsdWUgPT0gdHJ1dGh5XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gICAgICAgIGZvciBmYWxzZXkgaW4gb3B0aW9ucy5mYWxzZXlcclxuICAgICAgICAgIGlmIHZhbHVlID09IGZhbHNleVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBmcm9tICN7dmFsdWV9IHRvIEJvb2xlYW5cIilcclxuICAgIHtcclxuICAgICAgaWdub3JlQ2FzZTogdHJ1ZVxyXG4gICAgICBzdHJpY3Q6IGZhbHNlXHJcbiAgICAgIHRydXRoeTogW1xyXG4gICAgICAgICd0cnVlJ1xyXG4gICAgICAgICd0J1xyXG4gICAgICAgICcxJ1xyXG4gICAgICAgICctMSdcclxuICAgICAgICAneWVzJ1xyXG4gICAgICAgICd5J1xyXG4gICAgICBdXHJcbiAgICAgIGZhbHNleTogW1xyXG4gICAgICAgICdmYWxzZSdcclxuICAgICAgICAnZidcclxuICAgICAgICAnMCdcclxuICAgICAgICAnbm8nXHJcbiAgICAgICAgJ24nXHJcbiAgICAgIF1cclxuICAgICAgdHJpbTogZmFsc2VcclxuICAgIH1cclxuICAgICdzdHJpY3QnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgJ0RhdGUnXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICBpZiBvcHRpb25zLnN0cmljdFxyXG4gICAgICAgIG1hdGNoID0gdmFsdWUubWF0Y2gob3B0aW9ucy5mb3JtYXQpXHJcbiAgICAgICAgaWYgbm90IG1hdGNoP1xyXG4gICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIFN0cmluZyB0byBEYXRlJylcclxuXHJcbiAgICAgICAgbnVtID0gKHZhbHVlLCBkZWYpIC0+XHJcbiAgICAgICAgICBpZiAodmFsdWU/IGFuZCB2YWx1ZSAhPSAnJykgdGhlbiBwYXJzZUZsb2F0KHZhbHVlKSBlbHNlIGRlZlxyXG5cclxuICAgICAgICB0eiA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGlmIG1hdGNoWzddPyBhbmQgbWF0Y2hbN10gIT0gJydcclxuICAgICAgICAgIHR6ID0gKG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QudHpIb3Vyc10pICogNjAgKyBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6TWludXRlc10pKSAqIDYwICogMTAwMFxyXG4gICAgICAgICAgaWYgbWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6U2lnbl0gPT0gJy0nXHJcbiAgICAgICAgICAgIHR6ICo9IC0xXHJcblxyXG4gICAgICAgIGlmIG9wdGlvbnMudXRjIG9yIHR6P1xyXG4gICAgICAgICAgdGltZSA9IERhdGUuVVRDKFxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnllYXJdLCAwKVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1vbnRoXSwgMSkgLSAxXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuZGF5XSwgMSlcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5ob3Vyc10sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubWludXRlc10sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3Quc2Vjb25kc10sIDApXHJcbiAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgaWYgdHo/XHJcbiAgICAgICAgICAgIHRpbWUgKz0gdHpcclxuXHJcbiAgICAgICAgICBkYXRlID0gbmV3IERhdGUodGltZSlcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QueWVhcl0sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubW9udGhdLCAxKSAtIDFcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5kYXldLCAxKVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LmhvdXJzXSwgMClcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5taW51dGVzXSwgMClcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5zZWNvbmRzXSwgMClcclxuICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MCAqIDEwMDApXHJcbiAgICAgIGVsc2VcclxuICAgICAgICBkYXRlID0gbmV3IERhdGUodmFsdWUpXHJcblxyXG4gICAgICBpZiBpc05hTihkYXRlLnZhbHVlT2YoKSlcclxuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gU3RyaW5nIHRvIERhdGUnKVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGVcclxuICAgIHtcclxuICAgICAgIyBodHRwczovL3d3dy5kZWJ1Z2dleC5jb20vci9GbkRmOTBocW5HdWwxWll1LzBcclxuICAgICAgZm9ybWF0OiAvXihbMC05XXs0fSktKFswLTldezJ9KS0oWzAtOV17Mn0pKD86KD86VHxcXHMpKFswLTldezJ9KTooWzAtOV17Mn0pKD86OihbMC05XXsyfSg/Oi5bMC05XSspPykpPyg/OihcXCt8XFwtKShbMC05XXsyfSk6KFswLTldezJ9KSk/KT8kL1xyXG4gICAgICBmb3JtYXREaWN0OiB7XHJcbiAgICAgICAgeWVhcjogMVxyXG4gICAgICAgIG1vbnRoOiAyXHJcbiAgICAgICAgZGF5OiAzXHJcbiAgICAgICAgaG91cnM6IDRcclxuICAgICAgICBtaW51dGVzOiA1XHJcbiAgICAgICAgc2Vjb25kczogNlxyXG4gICAgICAgIHR6U2lnbjogN1xyXG4gICAgICAgIHR6SG91cnM6IDhcclxuICAgICAgICB0ek1pbnV0ZXM6IDlcclxuICAgICAgfVxyXG4gICAgICB1dGM6IGZhbHNlXHJcbiAgICAgIHN0cmljdDogdHJ1ZVxyXG4gICAgICB0cmltOiBmYWxzZVxyXG4gICAgfVxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1N0cmluZydcclxuICAgICdNb21lbnQnXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICByZXN1bHQgPSAobW9tZW50ID8gcmVxdWlyZSgnbW9tZW50JykpKHZhbHVlLCBvcHRpb25zLmZvcm1hdCwgb3B0aW9ucy5sYW5ndWFnZSwgb3B0aW9ucy5zdHJpY3QpXHJcbiAgICAgIGlmIG5vdCByZXN1bHQuaXNWYWxpZCgpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBTdHJpbmcgdG8gTW9tZW50JylcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHRcclxuICAgIHtcclxuICAgICAgc3RyaWN0OiBmYWxzZVxyXG4gICAgICBsYW5ndWFnZTogJ2VuJ1xyXG4gICAgICBmb3JtYXQ6ICdMJ1xyXG4gICAgICB0cmltOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgJ2Zvcm1hdCdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdTdHJpbmcnLFxyXG4gICAgJ051bWJlci5JbnRlZ2VyJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgb3B0aW9ucy50cmltXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKClcclxuXHJcbiAgICAgIGlmIG9wdGlvbnMuYmFzZSA9PSAxMCBhbmQgbm90IG9wdGlvbnMuc3RyaWN0XHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAgICByZXR1cm4ga28udHlwZWQuZ2V0Q29udmVydGVyKCdTdHJpbmcnLCAnTnVtYmVyJykodmFsdWUsIDApXHJcbiAgICAgICAgY2F0Y2ggZXhcclxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tICN7dmFsdWV9IHRvIE51bWJlci5JbnRlZ2VyXCIpXHJcblxyXG4gICAgICBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonXHJcbiAgICAgIGlmIG5vdCBSZWdFeHAoXCJeKFxcXFwtfFxcXFwrKT9bI3tjaGFycy5zbGljZSgwLCBvcHRpb25zLmJhc2UgPyAxMCl9XSskXCIsIGlmIG5vdCBvcHRpb25zLnN0cmljdCB0aGVuICdpJykudGVzdCh2YWx1ZSlcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBOdW1iZXIuSW50ZWdlclwiKVxyXG5cclxuICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCBvcHRpb25zLmJhc2UpXHJcbiAgICB7XHJcbiAgICAgIGJhc2U6IDEwXHJcbiAgICAgIHN0cmljdDogZmFsc2VcclxuICAgICAgdHJpbTogZmFsc2VcclxuICAgIH1cclxuICAgICdiYXNlJ1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1N0cmluZydcclxuICAgICdOdW1iZXInXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICBpZiBub3QgL14oXFwrfFxcLSk/WzAtOV0rKFxcLj8pWzAtOV0qJC8udGVzdCh2YWx1ZSlcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBOdW1iZXJcIilcclxuXHJcbiAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSwgb3B0aW9ucy5iYXNlKVxyXG5cclxuICAgICAgaWYgb3B0aW9ucy5kZWNpbWFscz9cclxuICAgICAgICB2YWx1ZSA9IE1hdGgucm91bmQxMCh2YWx1ZSwgLW9wdGlvbnMuZGVjaW1hbHMpXHJcblxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuICAgIHtcclxuICAgICAgZGVjaW1hbHM6IHVuZGVmaW5lZFxyXG4gICAgICB0cmltOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgJ2RlY2ltYWxzJ1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1N0cmluZycsXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgb3B0aW9ucy50cmltXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKClcclxuXHJcbiAgICAgIGlmIHZhbHVlLmxlbmd0aCAhPSAwXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gI3t2YWx1ZX0gdG8gVW5kZWZpbmVkXCIpXHJcblxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB7XHJcbiAgICAgIHRyaW06IGZhbHNlXHJcbiAgICB9XHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICdEYXRlJyxcclxuICAgICh2YWx1ZSkgLT5cclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTilcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdVbmRlZmluZWQnLFxyXG4gICAgJ01vbWVudCcsXHJcbiAgICAodmFsdWUpIC0+XHJcbiAgICAgIHJldHVybiByZXF1aXJlKCdtb21lbnQnKS5pbnZhbGlkKClcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdVbmRlZmluZWQnLFxyXG4gICAgJ1N0cmluZycsXHJcbiAgICAodmFsdWUpIC0+XHJcbiAgICAgIHJldHVybiAnJ1xyXG4gIClcclxuXHJcbiAgcmV0dXJuIGtvXHJcblxyXG5hcHBseUtvdHIoa28pXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
