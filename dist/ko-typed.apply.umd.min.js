!function(e,t){"function"==typeof define&&define.amd?define(["is-an"],t):"object"==typeof exports?module.exports=t(require("is-an")):e.applyKotr=t(e.isAn)}(this,function(e){var t,r=[].slice,n={}.hasOwnProperty;return t=function(t){var o,a,i,u,l,c,f,d,s,p,y,m,v,h,g,w;return t.typed={},u=function(){return!0},a=function(){return!1},i=function(e){return e},v=function(t){return null==t||0===t.length?void 0:e.String.Literal(t)?t:t.join("|")},y=function(t){return t=v(t),e.String.Literal(t)?t.split("|"):[]},m=function(e){var t,r,n,o;for(e=y(e),n=[],t=0,r=e.length;r>t;t++)o=e[t],-1===n.indexOf(o)&&n.push(o);return n},c=function(e){return/^[A-Z]/.test(e)},l=function(t){return e.Function(t)&&null!=t.typeName&&null!=t.typeNames&&null!=t.typeCheck&&null!=t.typeChecks},t.typed.options={validation:{enable:!1,read:!0,write:!0,target:!1,result:!0,message:void 0},exRead:{"catch":!0,catchTrue:function(e){return e instanceof TypeError},catchFalse:a,useDefault:!1,defaultValue:void 0,defaultFunc:void 0},exWrite:{"catch":!0,catchTrue:function(e){return e instanceof TypeError},catchFalse:a,noThrow:!1,useDefault:!1,defaultValue:void 0,defaultFunc:void 0},pure:!0,deferEvaluation:!0},o=function(){var e,n,o,a,i;for(i=arguments[0],a=2<=arguments.length?r.call(arguments,1):[],e=0,n=a.length;n>e;e++)o=a[e],i=t.utils.extend(i,o);return i},f=function(){var e,t,a,i,u,l;return t=arguments[0],l=arguments[1],i=3<=arguments.length?r.call(arguments,2):[],l[t]=u=o.apply(null,[{}].concat(r.call(function(){var r;r=[];for(e in i)n.call(i,e)&&(a=i[e],r.push(null!=a?a[t]:void 0));return r}()))),u["catch"]===!0?u["catch"]=u.catchTrue:u["catch"]===!1&&(u["catch"]=u.catchFalse),u.useDefault&&null==u.defaultFunc&&(u.defaultFunc=function(){return u.defaultValue}),u},d=function(){var e,t;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],f.apply(null,["exRead",t].concat(r.call(e)))},s=function(){var e,t;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],f.apply(null,["exWrite",t].concat(r.call(e)))},p=function(){var e,t,a,i,u,l;return l=arguments[0],i=2<=arguments.length?r.call(arguments,1):[],t=function(e){return e===!0?{enable:!0}:e===!1?{enable:!1}:e},l.validation=u=o.apply(null,[{}].concat(r.call(function(){var r;r=[];for(e in i)n.call(i,e)&&(a=i[e],r.push(t(null!=a?a.validation:void 0)));return r}()))),u},g=function(e,t,r,n){return function(){var t,o;try{return n()}catch(t){if(o=t,e.exRead["catch"](o)&&(r(o),e.exRead.useDefault))return e.exRead.defaultFunc();throw o}finally{null==o&&r(void 0)}}},w=function(e,t,r,n){return function(o){var a,i;try{return n(o)}catch(a){if(i=a,e.exWrite["catch"](i)&&(r(i),e.exWrite.useDefault&&t(e.exWrite.defaultFunc())),!e.exWrite.noThrow)throw i}finally{null==i&&r(void 0)}}},h=function(e,r,n){var o,a,i;n.validation.enable&&(i=n.validation,(i.target||i.result)&&(i.read||i.write)&&null!=t.validation&&(a=n.validation.read&&n.validation.write?function(){var e,t,n;return null!=(e=null!=(t=r.writeError())?t.message:void 0)?e:null!=(n=r.readError())?n.message:void 0}:n.validation.read?function(){var e;return null!=(e=r.readError())?e.message:void 0}:function(){var e;return null!=(e=r.writeError())?e.message:void 0},o=function(e){var r;e.extend({validatable:{enable:!0}}),r={message:void 0,validator:function(){var e,t;return e=a(),null==e?(r.message=void 0,!0):(r.message=null!=(t=i.message)?t:e,!1)}},t.validation.addAnonymousRule(e,r)},i.target&&o(e),i.result&&o(r)))},t.extenders.type=function(r,a){var i,u,l,f,b,C,S,N,x,D,T,k,E,U;if(e.String.Literal(a)||e.Array(a)?a={type:a}:e.Function(a)&&(a={type:a.typeName,check:a}),f=o({},t.typed.options,t.extenders.type.options,a),d(f,t.typed.options,t.extenders.type.options,a),s(f,t.typed.options,t.extenders.type.options,a),p(f,t.typed.options,t.extenders.type.options,a),a=f,E=y(a.type),E.push.apply(E,function(){var e;e=[];for(l in a)n.call(a,l)&&c(l)&&e.push(l);return e}()),E=m(E),k=v(E),T={},function(){var t,r,n,o;for(o=[],t=0,r=E.length;r>t;t++)l=E[t],o.push(T[l]=null!=(n=a[l])?n:e(l,{returnChecker:!0}));return o}(),x=null!=(C=a.check)?C:function(){return!0},D={},function(){var e,t;t=[];for(l in T)e=T[l],t.push(function(e){return D[l]=function(t){return e(t)&&x(t)}}(e));return t}(),N=function(){return function(e){return x(e)&&(0===E.length||E.some(function(t){return T[t](e)}))}}(),b=t.observable(),U=t.observable(),S=t.computed({pure:a.pure,deferEvaluation:!0,read:g(a,r,b,function(){var t;if(t=r(),!N(t))throw new TypeError("Unexpected internal type. Expected "+k+", got "+e(t));return t}),write:w(a,r,U,function(t){if(!N(t))throw new TypeError("Unexpected external type. Expected "+k+", received "+e(t));r(t)})}),S.typeName=k,S.typeNames=E,S.typeCheck=N,S.typeChecks=D,S.readError=b,S.writeError=U,h(r,S,a),!a.deferEvaluation)try{S.peek()}catch(i){throw u=i,S.dispose(),u}return S},t.extenders.type.options={},t.extenders.convert=function(r,a){var f,y,b,C,S;if(a===!1)return r;if(function(){var i,f,y,h,g,w,b,C,S,N,x,D,T,k,E,U;e.String(a)||e.Array(a)?a={type:a}:a===!0&&(a={}),a=o({},t.typed.options,t.extenders.convert.options,a),C={checkSelf:null!=(S=a.check)?S:u,read:a.read,write:a.write,checks:{},checkers:[],isTyped:l(r),ignoreDefaultConverters:a.ignoreDefaultConverters,pure:a.pure,deferEvaluation:a.deferEvaluation,types:m(a.type)},d(C,t.typed.options,t.extenders.convert.options,a),s(C,t.typed.options,t.extenders.convert.options,a),p(C,t.typed.options,t.extenders.convert.options,a);for(f in a)if(n.call(a,f)&&(y=a[f],c(f))){y=null!=(N=a[f])?N:{},C[f]={checkSelf:y.check,read:y.read,write:y.write,types:m(y.type)};for(g in y)n.call(y,g)&&c(g)&&(w=null!=(x=null!=(D=a[f])?D[g]:void 0)?x:{},C[f][g]={read:w.read,write:w.write})}for(C.type=v(C.types),T=C.types,h=0,b=T.length;b>h;h++)f=T[h],i=null!=(k=null!=(E=null!=(U=C[f])?U.checkSelf:void 0)?E:e(f,{returnChecker:!0}))?k:u,C.checks[f]=function(e){return function(t){return C.checkSelf(t)&&e(t)}}(i),C.checkers.push(C.checks[f]);return C.check=function(e){return C.checkSelf(e)&&(0===C.checkers.length||C.checkers.some(function(t){return t(e)}))},a=C}(),b=t.observable(),S=t.observable(),C=t.computed({pure:a.pure,deferEvaluation:!0,read:g(a,r,b,function(){var n,o,u,l,c,f,d,s,p,y,m,v,h,g,w,b,C,S,N,x;for(y=r(),c=void 0,x=function(e,t){var r,n;if(null!=e){try{c=e(y,t)}catch(r){if(n=r,!(n instanceof TypeError))throw n}if(null==n&&a.check(c))return!0}return!1},u=a.types,0===u.length&&(u=[e(y)]),f=0,h=u.length;h>f;f++)for(o=u[f],l=null!=(b=a[o])?b:{},s=null!=(C=l.types)?C:[],0===s.length&&(s=a.isTyped?r.typeNames:[e(y)]),m=0,g=s.length;g>m;m++)if(d=s[m],!a.isTyped||("function"==typeof(n=r.typeChecks)[d]?n[d](y):void 0))if(p=null!=(S=l[d])?S:{},null!=p.read){if(x(p.read,p.readOptions))return c}else if(d===o){if(null==l.read&&null==a.read&&x(i))return c}else if(!a.ignoreDefaultConverters&&x(t.typed.getConverter(d,o),p.readOptions))return c;for(v=0,w=u.length;w>v;v++)if(o=u[v],l=null!=(N=a[o])?N:{},x(l.read,l.readOptions))return c;if(x(a.read,a.readOptions))return c;throw null!=a.type?new TypeError("Unable to convert from internal type "+e(y)+" to external type "+a.type):new TypeError("Unable to convert from internal type "+e(y))}),write:w(a,r,S,function(n){var o,u,l,c,f,d,s,p,y,m,v,h,g,w,b,C,S;if(S=function(e,t){var o,a,i;if(null!=e){try{i=e(n,t)}catch(o){if(a=o,!(a instanceof TypeError))throw a}if(null==a)return r(i),!0}return!1},null==a.checkSelf||a.checkSelf(n)){for(u=a.types,0===u.length&&(u=[e(n)]),c=0,m=u.length;m>c;c++)if(o=u[c],l=null!=(g=a[o])?g:{},(null==l.checkSelf||l.checkSelf(n))&&(null!=l.checkSelf||e(n,o)))for(d=null!=(w=l.types)?w:[],0===d.length&&(d=a.isTyped?r.typeNames:[e(n)]),p=0,v=d.length;v>p;p++)if(f=d[p],s=null!=(b=l[f])?b:{},null!=s.write){if(S(s.write,s.writeOptions))return}else if(o===f){if(null==l.write&&null==a.write&&(!a.isTyped||r.typeChecks[o](n))&&S(i))return}else if(!a.ignoreDefaultConverters&&S(t.typed.getConverter(o,f),s.writeOptions))return;for(y=0,h=u.length;h>y;y++)if(o=u[y],l=null!=(C=a[o])?C:{},(null==l.checkSelf||l.checkSelf(n))&&(null!=l.checkSelf||e(n,o))&&S(l.write,l.writeOptions))return;if(S(a.write,a.writeOptions))return}throw a.isTyped?new TypeError("Unable to convert from external type "+e(n)+" to internal type "+r.typeName):new TypeError("Unable to convert from external type "+e(n))})}),C.typeName=a.type,C.typeNames=a.types,C.typeCheck=a.check,C.typeChecks=a.checks,C.readError=b,C.writeError=S,h(r,C,a),!a.deferEvaluation)try{C.peek()}catch(f){throw y=f,C.dispose(),y}return C},t.extenders.convert.options={},function(){var r;t.typed._converters=r={},t.typed.addConverter=function(n,o,a,i,u){var l;return"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(c(n),"Invalid typeName "+n),"undefined"!=typeof console&&null!==console&&"function"==typeof console.assert&&console.assert(c(o),"Invalid typeName "+n),l=null!=i?null!=u?function(r,n){var o;return 2!==arguments.length||e.Object(n)||(o={},o[u]=n,n=o),a(r,t.utils.extend(t.utils.extend({},l.options),n))}:function(e,r){return a(e,t.utils.extend(t.utils.extend({},l.options),r))}:function(e){return a(e)},l.options=i,null==r[n]&&(r[n]={}),r[n][o]=l,t.typed},t.typed.getConverter=function(e,t){var n;return null!=(n=r[e])?n[t]:void 0},t.typed.removeConverter=function(e,n){var o,a;return null!=(null!=(o=r[e])?o[n]:void 0)&&null!=(a=r[e])&&delete a[n],t.typed}}(),function(){var e;e=function(e,t,r){return null==r||0===+r?e(t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!==0?NaN:(t=t.toString().split("e"),t=e(+(t[0]+"e"+(t[1]?+t[1]-r:-r))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+r:r))))},null==Math.round10&&(Math.round10=function(t,r){return e(Math.round,t,r)}),null==Math.floor10&&(Math.floor10=function(t,r){return e(Math.floor,t,r)}),null==Math.ceil10&&(Math.ceil10=function(t,r){return e(Math.ceil,t,r)})}(),t.typed.addConverter("Boolean","Number.Integer",function(e,t){return e?t.truthy:t.falsey},{truthy:1,falsey:0},"truthy"),t.typed.addConverter("Boolean","Number",function(e,t){return e?t.truthy:t.falsey},{truthy:1,falsey:0},"truthy"),t.typed.addConverter("Boolean","String",function(e,t){return e=e?t.truthy:t.falsey,t.upperCase&&(e=e.toUpperCase()),e},{upperCase:!1,truthy:"true",falsey:"false"},"upperCase"),t.typed.addConverter("Date","Moment",function(e,t){return("undefined"!=typeof moment&&null!==moment?moment:require("moment"))(e)}),t.typed.addConverter("Date","String",function(e,t){var r;return isNaN(e.valueOf())?"":(r=t.formats[t.format],e[r].apply(e,t.params))},{formats:{date:"toDateString",iso:"toISOString",json:"toJSON",localeDate:"toLocaleDateString",localeTime:"toLocaleTimeString",locale:"toLocaleString",time:"toTimeString",utc:"toUTCString","default":"toString"},format:"default",params:[]},"format"),t.typed.addConverter("Date","Undefined",function(e,t){if(!isNaN(e.valueOf()))throw new TypeError("Unable to convert from valid Date to Undefined")}),t.typed.addConverter("Moment","Date",function(e,t){return e.toDate()}),t.typed.addConverter("Moment","String",function(e,t){return e.isValid()?e.locale(t.locale).format(t.format):""},{locale:"en",format:"L"},"format"),t.typed.addConverter("Moment","Undefined",function(e,t){if(e.isValid())throw new TypeError("Unable to convert from valid Moment to Undefined")}),t.typed.addConverter("Number","Boolean",function(e,t){if(null!=t.falsey&&e===t.falsey)return!1;if(null!=t.truthy&&e===t.truthy)return!0;if(null==t.falsey)return!1;if(null==t.truthy)return!0;throw new TypeError("Cannot convert from "+e+" to Boolean")},{truthy:void 0,falsey:0}),t.typed.addConverter("Number","Number.Integer",function(t,r){var n;if(null==r.mode){if(!e.Number.Integer(t))throw new TypeError("Cannot convert from Number to Number.Integer. Number is not an integer");return t}return(n="string"==typeof r.mode?Math[r.mode]:r.mode)(t)},{mode:void 0},"mode"),t.typed.addConverter("Number","String",function(e,t){return null!=t.decimals?(e=Math.round10(e,-t.decimals),e=e.toFixed(t.decimals)):e=e.toString(),e},{decimals:void 0},"decimals"),t.typed.addConverter("Number.Integer","Boolean",function(e,t){if(null!=t.falsey&&e===t.falsey)return!1;if(null!=t.truthy&&e===t.truthy)return!0;if(null==t.falsey)return!1;if(null==t.truthy)return!0;throw new TypeError("Cannot convert from "+e+" to Boolean")},{truthy:void 0,falsey:0}),t.typed.addConverter("Number.Integer","Number",function(e,t){return e}),t.typed.addConverter("Number.Integer","String",function(e,t){return e=e.toString(t.base),t.upperCase&&(e=e.toUpperCase()),e},{base:10,upperCase:!1},"base"),t.typed.addConverter("String","Boolean",function(e,t){var r,n,o,a,i,u,l,c;if(t.trim&&(e=e.trim()),t.ignoreCase&&(e=e.toLowerCase()),t.strict){if(e===t.truthy[0])return!0;if(e===t.falsey[0])return!1}else{for(u=t.truthy,n=0,a=u.length;a>n;n++)if(c=u[n],e===c)return!0;for(l=t.falsey,o=0,i=l.length;i>o;o++)if(r=l[o],e===r)return!1}throw new TypeError("Cannot convert from "+e+" to Boolean")},{ignoreCase:!0,strict:!1,truthy:["true","t","1","-1","yes","y"],falsey:["false","f","0","no","n"],trim:!1},"strict"),t.typed.addConverter("String","Date",function(e,t){var r,n,o,a,i;if(t.trim&&(e=e.trim()),t.strict){if(n=e.match(t.format),null==n)throw TypeError("Unable to convert from String to Date");o=function(e,t){return null!=e&&""!==e?parseFloat(e):t},i=void 0,null!=n[7]&&""!==n[7]&&(i=60*(60*o(n[t.formatDict.tzHours])+o(n[t.formatDict.tzMinutes]))*1e3,"-"===n[t.formatDict.tzSign]&&(i*=-1)),t.utc||null!=i?(a=Date.UTC(o(n[t.formatDict.year],0),o(n[t.formatDict.month],1)-1,o(n[t.formatDict.day],1),o(n[t.formatDict.hours],0),o(n[t.formatDict.minutes],0),o(n[t.formatDict.seconds],0)),null!=i&&(a+=i),r=new Date(a)):(r=new Date(o(n[t.formatDict.year],0),o(n[t.formatDict.month],1)-1,o(n[t.formatDict.day],1),o(n[t.formatDict.hours],0),o(n[t.formatDict.minutes],0),o(n[t.formatDict.seconds],0)),r.setTime(r.getTime()-60*r.getTimezoneOffset()*1e3))}else r=new Date(e);if(isNaN(r.valueOf()))throw TypeError("Unable to convert from String to Date");return r},{format:/^([0-9]{4})-([0-9]{2})-([0-9]{2})(?:(?:T|\s)([0-9]{2}):([0-9]{2})(?::([0-9]{2}(?:.[0-9]+)?))?(?:(\+|\-)([0-9]{2}):([0-9]{2}))?)?$/,formatDict:{year:1,month:2,day:3,hours:4,minutes:5,seconds:6,tzSign:7,tzHours:8,tzMinutes:9},utc:!1,strict:!0,trim:!1}),t.typed.addConverter("String","Moment",function(e,t){var r;if(t.trim&&(e=e.trim()),r=("undefined"!=typeof moment&&null!==moment?moment:require("moment"))(e,t.format,t.language,t.strict),!r.isValid())throw new TypeError("Unable to convert from String to Moment");return r},{strict:!1,language:"en",format:"L",trim:!1},"format"),t.typed.addConverter("String","Number.Integer",function(e,r){var n,o,a,i;if(r.trim&&(e=e.trim()),10===r.base&&!r.strict)try{return t.typed.getConverter("String","Number")(e,0)}catch(o){throw a=o,new TypeError("Unable to convert from "+e+" to Number.Integer")}if(n="0123456789abcdefghijklmnopqrstuvwxyz",!RegExp("^(\\-|\\+)?["+n.slice(0,null!=(i=r.base)?i:10)+"]+$",r.strict?void 0:"i").test(e))throw new TypeError("Unable to convert from "+e+" to Number.Integer");return parseInt(e,r.base)},{base:10,strict:!1,trim:!1},"base"),t.typed.addConverter("String","Number",function(e,t){if(t.trim&&(e=e.trim()),!/^(\+|\-)?[0-9]+(\.?)[0-9]*$/.test(e))throw new TypeError("Unable to convert from "+e+" to Number");return e=parseFloat(e,t.base),null!=t.decimals&&(e=Math.round10(e,-t.decimals)),e},{decimals:void 0,trim:!1},"decimals"),t.typed.addConverter("String","Undefined",function(e,t){if(t.trim&&(e=e.trim()),0!==e.length)throw new TypeError("Unable to convert from "+e+" to Undefined")},{trim:!1}),t.typed.addConverter("Undefined","Date",function(e){return new Date(NaN)}),t.typed.addConverter("Undefined","Moment",function(e){return require("moment").invalid()}),t.typed.addConverter("Undefined","String",function(e){return""}),t}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtvLXR5cGVkLmFwcGx5LnVtZC5qcyIsImtvLXR5cGVkLmFwcGx5LmNvZmZlZSJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiYXBwbHlLb3RyIiwiaXNBbiIsInRoaXMiLCJzbGljZSIsImhhc1Byb3AiLCJoYXNPd25Qcm9wZXJ0eSIsImtvIiwiZXh0ZW5kIiwiZm5GYWxzZSIsImZuSWRlbnRpdHkiLCJmblRydWUiLCJpc1R5cGVkIiwiaXNWYWxpZFR5cGVOYW1lIiwibm9ybWFsaXplRXgiLCJub3JtYWxpemVFeFJlYWQiLCJub3JtYWxpemVFeFdyaXRlIiwibm9ybWFsaXplVmFsaWRhdGlvbiIsInR5cGVOYW1lVG9BcnJheSIsInR5cGVOYW1lVG9EaXN0aW5jdEFycmF5IiwidHlwZU5hbWVUb1N0cmluZyIsInZhbGlkYXRlIiwid3JhcFJlYWQiLCJ3cmFwV3JpdGUiLCJ0eXBlZCIsIngiLCJ2YWx1ZSIsImxlbmd0aCIsIlN0cmluZyIsIkxpdGVyYWwiLCJqb2luIiwic3BsaXQiLCJpIiwibGVuIiwicmVzdWx0IiwidHlwZU5hbWUiLCJpbmRleE9mIiwicHVzaCIsInRlc3QiLCJGdW5jdGlvbiIsInR5cGVOYW1lcyIsInR5cGVDaGVjayIsInR5cGVDaGVja3MiLCJvcHRpb25zIiwidmFsaWRhdGlvbiIsImVuYWJsZSIsInJlYWQiLCJ3cml0ZSIsInRhcmdldCIsIm1lc3NhZ2UiLCJleFJlYWQiLCJjYXRjaCIsImNhdGNoVHJ1ZSIsImV4IiwiVHlwZUVycm9yIiwiY2F0Y2hGYWxzZSIsInVzZURlZmF1bHQiLCJkZWZhdWx0VmFsdWUiLCJkZWZhdWx0RnVuYyIsImV4V3JpdGUiLCJub1Rocm93IiwicHVyZSIsImRlZmVyRXZhbHVhdGlvbiIsIm9iamVjdCIsIm9iamVjdHMiLCJhcmd1bWVudHMiLCJjYWxsIiwidXRpbHMiLCJrZXkiLCJuYW1lIiwib3B0IiwiYXBwbHkiLCJjb25jYXQiLCJyZXN1bHRzIiwibm9ybSIsInYiLCJyZWFkRXJyb3IiLCJlcnJvciIsIndyaXRlRXJyb3IiLCJhcHBseVZhbGlkYXRpb24iLCJyZWYiLCJyZWYxIiwicmVmMiIsImJhc2UiLCJydWxlIiwidmFsaWRhdGFibGUiLCJ2YWxpZGF0b3IiLCJtIiwiYWRkQW5vbnltb3VzUnVsZSIsImV4dGVuZGVycyIsInR5cGUiLCJub3JtYWwiLCJ0eXBlQ2hlY2tTaW1wbGUiLCJ0eXBlQ2hlY2tzU2ltcGxlIiwiQXJyYXkiLCJjaGVjayIsInJldHVybkNoZWNrZXIiLCJzb21lIiwib2JzZXJ2YWJsZSIsImNvbXB1dGVkIiwiaW50ZXJuYWxWYWx1ZSIsImV4dGVybmFsVmFsdWUiLCJwZWVrIiwiZGlzcG9zZSIsImNvbnZlcnQiLCJjaGVja2VyIiwiZXh0VHlwZU5hbWUiLCJleHRUeXBlT3B0aW9ucyIsImludFR5cGVOYW1lIiwiaW50VHlwZU9wdGlvbnMiLCJyZWYzIiwicmVmNCIsInJlZjUiLCJyZWY2IiwicmVmNyIsImNoZWNrU2VsZiIsImNoZWNrcyIsImNoZWNrZXJzIiwiaWdub3JlRGVmYXVsdENvbnZlcnRlcnMiLCJ0eXBlcyIsImJhc2UxIiwiZXh0VHlwZU5hbWVzIiwiaW50VHlwZU5hbWVzIiwiaiIsImsiLCJsZW4xIiwibGVuMiIsInRyeVJlYWQiLCJyZWFkT3B0aW9ucyIsImdldENvbnZlcnRlciIsInRyeVdyaXRlIiwid3JpdGVPcHRpb25zIiwiY29udmVydGVycyIsIl9jb252ZXJ0ZXJzIiwiYWRkQ29udmVydGVyIiwiZnJvbVR5cGVOYW1lIiwidG9UeXBlTmFtZSIsImNvbnZlcnRlciIsImRlZmF1bHRPcHRpb25zIiwiZGVmYXVsdE9wdGlvbiIsIndyYXBwZXIiLCJjb25zb2xlIiwiYXNzZXJ0IiwibyIsIk9iamVjdCIsInJlbW92ZUNvbnZlcnRlciIsImRlY2ltYWxBZGp1c3QiLCJleHAiLCJpc05hTiIsIk5hTiIsInRvU3RyaW5nIiwiTWF0aCIsInJvdW5kMTAiLCJyb3VuZCIsImZsb29yMTAiLCJmbG9vciIsImNlaWwxMCIsImNlaWwiLCJ0cnV0aHkiLCJmYWxzZXkiLCJ1cHBlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsIm1vbWVudCIsIm1ldGhvZCIsInZhbHVlT2YiLCJmb3JtYXRzIiwiZm9ybWF0IiwicGFyYW1zIiwiZGF0ZSIsImlzbyIsImpzb24iLCJsb2NhbGVEYXRlIiwibG9jYWxlVGltZSIsImxvY2FsZSIsInRpbWUiLCJ1dGMiLCJkZWZhdWx0IiwidG9EYXRlIiwiaXNWYWxpZCIsIm1vZGUiLCJOdW1iZXIiLCJJbnRlZ2VyIiwiZGVjaW1hbHMiLCJ0b0ZpeGVkIiwidHJpbSIsImlnbm9yZUNhc2UiLCJ0b0xvd2VyQ2FzZSIsInN0cmljdCIsIm1hdGNoIiwibnVtIiwidHoiLCJkZWYiLCJwYXJzZUZsb2F0IiwiZm9ybWF0RGljdCIsInR6SG91cnMiLCJ0ek1pbnV0ZXMiLCJ0elNpZ24iLCJEYXRlIiwiVVRDIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91cnMiLCJtaW51dGVzIiwic2Vjb25kcyIsInNldFRpbWUiLCJnZXRUaW1lIiwiZ2V0VGltZXpvbmVPZmZzZXQiLCJsYW5ndWFnZSIsImNoYXJzIiwiUmVnRXhwIiwicGFyc2VJbnQiLCJpbnZhbGlkIl0sIm1hcHBpbmdzIjoiQ0FBRSxTQUFTQSxFQUFNQyxHQUNPLGtCQUFYQyxTQUF5QkEsT0FBT0MsSUFDekNELFFBQVEsU0FBVUQsR0FDVSxnQkFBWkcsU0FDaEJDLE9BQU9ELFFBQVVILEVBQVFLLFFBQVEsVUFFakNOLEVBQUtPLFVBQVlOLEVBQVFELEVBQUtRLE9BRWhDQyxLQUFNLFNBQVNELEdBQ2pCLEdBQUlELEdDVEpHLEtBQUFBLE1EV0VDLEtBQWFDLGNBOGdDZixPQ3poQ0FMLEdBQVksU0FBQ00sR0FDWCxHQUFBQyxHQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxDQW9tQ0EsT0FwbUNBaEIsR0FBR2lCLFNB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LEdBQ3hHLEtBQVUsSUFBQTRCLFdBQVUsMEJBQTBCNUIsRUFBTSxxQkFFdEQsT0FBT3lMLFVBQVN6TCxFQUFPaUIsRUFBUXdDLFFBRS9CQSxLQUFNLEdBQ053RyxRQUFRLEVBQ1JILE1BQU0sR0FFUixRQUdGakwsRUFBR2lCLE1BQU04RyxhQUNQLFNBQ0EsU0FDQSxTQUFDNUcsRUFBT2lCLEdBSU4sR0FIR0EsRUFBUTZJLE9BQ1Q5SixFQUFRQSxFQUFNOEosU0FFVCw4QkFBOEJsSixLQUFLWixHQUN4QyxLQUFVLElBQUE0QixXQUFVLDBCQUEwQjVCLEVBQU0sYUFPdEQsT0FMQUEsR0FBUXNLLFdBQVd0SyxFQUFPaUIsRUFBUXdDLE1BRS9CLE1BQUF4QyxFQUFBMkksV0FDRDVKLEVBQVE2SCxLQUFLQyxRQUFROUgsR0FBUWlCLEVBQVEySSxXQUVoQzVKLElBRVA0SixTQUFVLE9BQ1ZFLE1BQU0sR0FFUixZQUdGakwsRUFBR2lCLE1BQU04RyxhQUNQLFNBQ0EsWUFDQSxTQUFDNUcsRUFBT2lCLEdBSU4sR0FIR0EsRUFBUTZJLE9BQ1Q5SixFQUFRQSxFQUFNOEosUUFFRyxJQUFoQjlKLEVBQU1DLE9BQ1AsS0FBVSxJQUFBMkIsV0FBVSwwQkFBMEI1QixFQUFNLG1CQUl0RDhKLE1BQU0sSUFJVmpMLEVBQUdpQixNQUFNOEcsYUFDUCxZQUNBLE9BQ0EsU0FBQzVHLEdBQ0MsTUFBVyxJQUFBMkssTUFBS2hELE9BR3BCOUksRUFBR2lCLE1BQU04RyxhQUNQLFlBQ0EsU0FDQSxTQUFDNUcsR0FDQyxNQUFPMUIsU0FBUSxVQUFVb04sWUFHN0I3TSxFQUFHaUIsTUFBTThHLGFBQ1AsWUFDQSxTQUNBLFNBQUM1RyxHQUNDLE1BQU8sS0FHSm5CIiwiZmlsZSI6ImtvLXR5cGVkLmFwcGx5LnVtZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcclxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICBkZWZpbmUoWydpcy1hbiddLCBmYWN0b3J5KTtcclxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xyXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2lzLWFuJykpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByb290LmFwcGx5S290ciA9IGZhY3Rvcnkocm9vdC5pc0FuKTtcclxuICB9XHJcbn0odGhpcywgZnVuY3Rpb24oaXNBbikge1xyXG52YXIgYXBwbHlLb3RyLFxuICBzbGljZSA9IFtdLnNsaWNlLFxuICBoYXNQcm9wID0ge30uaGFzT3duUHJvcGVydHk7XG5cbmFwcGx5S290ciA9IGZ1bmN0aW9uKGtvKSB7XG4gIHZhciBleHRlbmQsIGZuRmFsc2UsIGZuSWRlbnRpdHksIGZuVHJ1ZSwgaXNUeXBlZCwgaXNWYWxpZFR5cGVOYW1lLCBub3JtYWxpemVFeCwgbm9ybWFsaXplRXhSZWFkLCBub3JtYWxpemVFeFdyaXRlLCBub3JtYWxpemVWYWxpZGF0aW9uLCB0eXBlTmFtZVRvQXJyYXksIHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5LCB0eXBlTmFtZVRvU3RyaW5nLCB2YWxpZGF0ZSwgd3JhcFJlYWQsIHdyYXBXcml0ZTtcbiAga28udHlwZWQgPSB7fTtcbiAgZm5UcnVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG4gIGZuRmFsc2UgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG4gIGZuSWRlbnRpdHkgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHg7XG4gIH07XG4gIHR5cGVOYW1lVG9TdHJpbmcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIGlmICgodmFsdWUgPT0gbnVsbCkgfHwgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdm9pZCAwO1xuICAgIH0gZWxzZSBpZiAoaXNBbi5TdHJpbmcuTGl0ZXJhbCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHZhbHVlLmpvaW4oJ3wnKTtcbiAgICB9XG4gIH07XG4gIHR5cGVOYW1lVG9BcnJheSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFsdWUgPSB0eXBlTmFtZVRvU3RyaW5nKHZhbHVlKTtcbiAgICBpZiAoaXNBbi5TdHJpbmcuTGl0ZXJhbCh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5zcGxpdCgnfCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9O1xuICB0eXBlTmFtZVRvRGlzdGluY3RBcnJheSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIGksIGxlbiwgcmVzdWx0LCB0eXBlTmFtZTtcbiAgICB2YWx1ZSA9IHR5cGVOYW1lVG9BcnJheSh2YWx1ZSk7XG4gICAgcmVzdWx0ID0gW107XG4gICAgZm9yIChpID0gMCwgbGVuID0gdmFsdWUubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHR5cGVOYW1lID0gdmFsdWVbaV07XG4gICAgICBpZiAocmVzdWx0LmluZGV4T2YodHlwZU5hbWUpID09PSAtMSkge1xuICAgICAgICByZXN1bHQucHVzaCh0eXBlTmFtZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG4gIGlzVmFsaWRUeXBlTmFtZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIC9eW0EtWl0vLnRlc3QodmFsdWUpO1xuICB9O1xuICBpc1R5cGVkID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gaXNBbi5GdW5jdGlvbih2YWx1ZSkgJiYgKHZhbHVlLnR5cGVOYW1lICE9IG51bGwpICYmICh2YWx1ZS50eXBlTmFtZXMgIT0gbnVsbCkgJiYgKHZhbHVlLnR5cGVDaGVjayAhPSBudWxsKSAmJiAodmFsdWUudHlwZUNoZWNrcyAhPSBudWxsKTtcbiAgfTtcbiAga28udHlwZWQub3B0aW9ucyA9IHtcbiAgICB2YWxpZGF0aW9uOiB7XG4gICAgICBlbmFibGU6IGZhbHNlLFxuICAgICAgcmVhZDogdHJ1ZSxcbiAgICAgIHdyaXRlOiB0cnVlLFxuICAgICAgdGFyZ2V0OiBmYWxzZSxcbiAgICAgIHJlc3VsdDogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IHZvaWQgMFxuICAgIH0sXG4gICAgZXhSZWFkOiB7XG4gICAgICBcImNhdGNoXCI6IHRydWUsXG4gICAgICBjYXRjaFRydWU6IGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgIHJldHVybiBleCBpbnN0YW5jZW9mIFR5cGVFcnJvcjtcbiAgICAgIH0sXG4gICAgICBjYXRjaEZhbHNlOiBmbkZhbHNlLFxuICAgICAgdXNlRGVmYXVsdDogZmFsc2UsXG4gICAgICBkZWZhdWx0VmFsdWU6IHZvaWQgMCxcbiAgICAgIGRlZmF1bHRGdW5jOiB2b2lkIDBcbiAgICB9LFxuICAgIGV4V3JpdGU6IHtcbiAgICAgIFwiY2F0Y2hcIjogdHJ1ZSxcbiAgICAgIGNhdGNoVHJ1ZTogZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgcmV0dXJuIGV4IGluc3RhbmNlb2YgVHlwZUVycm9yO1xuICAgICAgfSxcbiAgICAgIGNhdGNoRmFsc2U6IGZuRmFsc2UsXG4gICAgICBub1Rocm93OiBmYWxzZSxcbiAgICAgIHVzZURlZmF1bHQ6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiB2b2lkIDAsXG4gICAgICBkZWZhdWx0RnVuYzogdm9pZCAwXG4gICAgfSxcbiAgICBwdXJlOiB0cnVlLFxuICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZVxuICB9O1xuICBleHRlbmQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaSwgbGVuLCBvYmplY3QsIG9iamVjdHMsIHJvb3Q7XG4gICAgcm9vdCA9IGFyZ3VtZW50c1swXSwgb2JqZWN0cyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIGZvciAoaSA9IDAsIGxlbiA9IG9iamVjdHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIG9iamVjdCA9IG9iamVjdHNbaV07XG4gICAgICByb290ID0ga28udXRpbHMuZXh0ZW5kKHJvb3QsIG9iamVjdCk7XG4gICAgfVxuICAgIHJldHVybiByb290O1xuICB9O1xuICBub3JtYWxpemVFeCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBrZXksIG5hbWUsIG9iamVjdCwgb2JqZWN0cywgb3B0LCByb290O1xuICAgIG5hbWUgPSBhcmd1bWVudHNbMF0sIHJvb3QgPSBhcmd1bWVudHNbMV0sIG9iamVjdHMgPSAzIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBzbGljZS5jYWxsKGFyZ3VtZW50cywgMikgOiBbXTtcbiAgICByb290W25hbWVdID0gb3B0ID0gZXh0ZW5kLmFwcGx5KG51bGwsIFt7fV0uY29uY2F0KHNsaWNlLmNhbGwoKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKGtleSBpbiBvYmplY3RzKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9iamVjdHMsIGtleSkpIGNvbnRpbnVlO1xuICAgICAgICBvYmplY3QgPSBvYmplY3RzW2tleV07XG4gICAgICAgIHJlc3VsdHMucHVzaChvYmplY3QgIT0gbnVsbCA/IG9iamVjdFtuYW1lXSA6IHZvaWQgMCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KSgpKSkpO1xuICAgIGlmIChvcHRbXCJjYXRjaFwiXSA9PT0gdHJ1ZSkge1xuICAgICAgb3B0W1wiY2F0Y2hcIl0gPSBvcHQuY2F0Y2hUcnVlO1xuICAgIH0gZWxzZSBpZiAob3B0W1wiY2F0Y2hcIl0gPT09IGZhbHNlKSB7XG4gICAgICBvcHRbXCJjYXRjaFwiXSA9IG9wdC5jYXRjaEZhbHNlO1xuICAgIH1cbiAgICBpZiAob3B0LnVzZURlZmF1bHQgJiYgKG9wdC5kZWZhdWx0RnVuYyA9PSBudWxsKSkge1xuICAgICAgb3B0LmRlZmF1bHRGdW5jID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBvcHQuZGVmYXVsdFZhbHVlO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG9wdDtcbiAgfTtcbiAgbm9ybWFsaXplRXhSZWFkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG9iamVjdHMsIHJvb3Q7XG4gICAgcm9vdCA9IGFyZ3VtZW50c1swXSwgb2JqZWN0cyA9IDIgPD0gYXJndW1lbnRzLmxlbmd0aCA/IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSA6IFtdO1xuICAgIHJldHVybiBub3JtYWxpemVFeC5hcHBseShudWxsLCBbJ2V4UmVhZCcsIHJvb3RdLmNvbmNhdChzbGljZS5jYWxsKG9iamVjdHMpKSk7XG4gIH07XG4gIG5vcm1hbGl6ZUV4V3JpdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb2JqZWN0cywgcm9vdDtcbiAgICByb290ID0gYXJndW1lbnRzWzBdLCBvYmplY3RzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgcmV0dXJuIG5vcm1hbGl6ZUV4LmFwcGx5KG51bGwsIFsnZXhXcml0ZScsIHJvb3RdLmNvbmNhdChzbGljZS5jYWxsKG9iamVjdHMpKSk7XG4gIH07XG4gIG5vcm1hbGl6ZVZhbGlkYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICB2YXIga2V5LCBub3JtLCBvYmplY3QsIG9iamVjdHMsIG9wdCwgcm9vdDtcbiAgICByb290ID0gYXJndW1lbnRzWzBdLCBvYmplY3RzID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpIDogW107XG4gICAgbm9ybSA9IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICh2ID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZW5hYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKHYgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgZW5hYmxlOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHY7XG4gICAgICB9XG4gICAgfTtcbiAgICByb290Wyd2YWxpZGF0aW9uJ10gPSBvcHQgPSBleHRlbmQuYXBwbHkobnVsbCwgW3t9XS5jb25jYXQoc2xpY2UuY2FsbCgoZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcmVzdWx0cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoa2V5IGluIG9iamVjdHMpIHtcbiAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwob2JqZWN0cywga2V5KSkgY29udGludWU7XG4gICAgICAgIG9iamVjdCA9IG9iamVjdHNba2V5XTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5vcm0ob2JqZWN0ICE9IG51bGwgPyBvYmplY3RbJ3ZhbGlkYXRpb24nXSA6IHZvaWQgMCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSkoKSkpKTtcbiAgICByZXR1cm4gb3B0O1xuICB9O1xuICB3cmFwUmVhZCA9IGZ1bmN0aW9uKG9wdGlvbnMsIHRhcmdldCwgcmVhZEVycm9yLCByZWFkKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGVycm9yLCBleDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiByZWFkKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleCA9IGVycm9yO1xuICAgICAgICBpZiAob3B0aW9ucy5leFJlYWRbXCJjYXRjaFwiXShleCkpIHtcbiAgICAgICAgICByZWFkRXJyb3IoZXgpO1xuICAgICAgICAgIGlmIChvcHRpb25zLmV4UmVhZC51c2VEZWZhdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5leFJlYWQuZGVmYXVsdEZ1bmMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXg7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZXggPT0gbnVsbCkge1xuICAgICAgICAgIHJlYWRFcnJvcih2b2lkIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgd3JhcFdyaXRlID0gZnVuY3Rpb24ob3B0aW9ucywgdGFyZ2V0LCB3cml0ZUVycm9yLCB3cml0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgdmFyIGVycm9yLCBleDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB3cml0ZSh2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleCA9IGVycm9yO1xuICAgICAgICBpZiAob3B0aW9ucy5leFdyaXRlW1wiY2F0Y2hcIl0oZXgpKSB7XG4gICAgICAgICAgd3JpdGVFcnJvcihleCk7XG4gICAgICAgICAgaWYgKG9wdGlvbnMuZXhXcml0ZS51c2VEZWZhdWx0KSB7XG4gICAgICAgICAgICB0YXJnZXQob3B0aW9ucy5leFdyaXRlLmRlZmF1bHRGdW5jKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9wdGlvbnMuZXhXcml0ZS5ub1Rocm93KSB7XG4gICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChleCA9PSBudWxsKSB7XG4gICAgICAgICAgd3JpdGVFcnJvcih2b2lkIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcbiAgfTtcbiAgdmFsaWRhdGUgPSBmdW5jdGlvbih0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucykge1xuICAgIHZhciBhcHBseVZhbGlkYXRpb24sIG1lc3NhZ2UsIHZhbGlkYXRpb247XG4gICAgaWYgKCFvcHRpb25zLnZhbGlkYXRpb24uZW5hYmxlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhbGlkYXRpb24gPSBvcHRpb25zLnZhbGlkYXRpb247XG4gICAgaWYgKCghdmFsaWRhdGlvbi50YXJnZXQgJiYgIXZhbGlkYXRpb24ucmVzdWx0KSB8fCAoIXZhbGlkYXRpb24ucmVhZCAmJiAhdmFsaWRhdGlvbi53cml0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGtvLnZhbGlkYXRpb24gIT0gbnVsbCkge1xuXG4gICAgICAvKlxuICAgICAgTm90ZSB0aGF0IHVzaW5nIGtvIHZhbGlkYXRpb24gd2lsbCBmb3JjZSBhbiBpbW1lZGlhdGUgZXZhbHVhdGlvbiBvZiB0aGUgdGFyZ2V0dGVkIG9ic2VydmFibGVzXG4gICAgICAgKi9cbiAgICAgIGlmIChvcHRpb25zLnZhbGlkYXRpb24ucmVhZCAmJiBvcHRpb25zLnZhbGlkYXRpb24ud3JpdGUpIHtcbiAgICAgICAgbWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZWYsIHJlZjEsIHJlZjI7XG4gICAgICAgICAgcmV0dXJuIChyZWYgPSAocmVmMSA9IHJlc3VsdC53cml0ZUVycm9yKCkpICE9IG51bGwgPyByZWYxLm1lc3NhZ2UgOiB2b2lkIDApICE9IG51bGwgPyByZWYgOiAocmVmMiA9IHJlc3VsdC5yZWFkRXJyb3IoKSkgIT0gbnVsbCA/IHJlZjIubWVzc2FnZSA6IHZvaWQgMDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy52YWxpZGF0aW9uLnJlYWQpIHtcbiAgICAgICAgbWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciByZWY7XG4gICAgICAgICAgcmV0dXJuIChyZWYgPSByZXN1bHQucmVhZEVycm9yKCkpICE9IG51bGwgPyByZWYubWVzc2FnZSA6IHZvaWQgMDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgcmVmO1xuICAgICAgICAgIHJldHVybiAocmVmID0gcmVzdWx0LndyaXRlRXJyb3IoKSkgIT0gbnVsbCA/IHJlZi5tZXNzYWdlIDogdm9pZCAwO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgYXBwbHlWYWxpZGF0aW9uID0gZnVuY3Rpb24oYmFzZSkge1xuICAgICAgICB2YXIgcnVsZTtcbiAgICAgICAgYmFzZS5leHRlbmQoe1xuICAgICAgICAgIHZhbGlkYXRhYmxlOiB7XG4gICAgICAgICAgICBlbmFibGU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBydWxlID0ge1xuICAgICAgICAgIG1lc3NhZ2U6IHZvaWQgMCxcbiAgICAgICAgICB2YWxpZGF0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIG0sIHJlZjtcbiAgICAgICAgICAgIG0gPSBtZXNzYWdlKCk7XG4gICAgICAgICAgICBpZiAobSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHJ1bGUubWVzc2FnZSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBydWxlLm1lc3NhZ2UgPSAocmVmID0gdmFsaWRhdGlvbi5tZXNzYWdlKSAhPSBudWxsID8gcmVmIDogbTtcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAga28udmFsaWRhdGlvbi5hZGRBbm9ueW1vdXNSdWxlKGJhc2UsIHJ1bGUpO1xuICAgICAgfTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLnRhcmdldCkge1xuICAgICAgICBhcHBseVZhbGlkYXRpb24odGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIGlmICh2YWxpZGF0aW9uLnJlc3VsdCkge1xuICAgICAgICBhcHBseVZhbGlkYXRpb24ocmVzdWx0KTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGtvLmV4dGVuZGVycy50eXBlID0gZnVuY3Rpb24odGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgdmFyIGVycm9yLCBleCwgbmFtZSwgbm9ybWFsLCByZWFkRXJyb3IsIHJlZiwgcmVzdWx0LCB0eXBlQ2hlY2ssIHR5cGVDaGVja1NpbXBsZSwgdHlwZUNoZWNrcywgdHlwZUNoZWNrc1NpbXBsZSwgdHlwZU5hbWUsIHR5cGVOYW1lcywgd3JpdGVFcnJvcjtcbiAgICBpZiAoaXNBbi5TdHJpbmcuTGl0ZXJhbChvcHRpb25zKSB8fCBpc0FuLkFycmF5KG9wdGlvbnMpKSB7XG4gICAgICBvcHRpb25zID0ge1xuICAgICAgICB0eXBlOiBvcHRpb25zXG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoaXNBbi5GdW5jdGlvbihvcHRpb25zKSkge1xuICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgdHlwZTogb3B0aW9ucy50eXBlTmFtZSxcbiAgICAgICAgY2hlY2s6IG9wdGlvbnNcbiAgICAgIH07XG4gICAgfVxuICAgIG5vcm1hbCA9IGV4dGVuZCh7fSwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgbm9ybWFsaXplRXhSZWFkKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgbm9ybWFsaXplRXhXcml0ZShub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIG5vcm1hbGl6ZVZhbGlkYXRpb24obm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKTtcbiAgICBvcHRpb25zID0gbm9ybWFsO1xuICAgIHR5cGVOYW1lcyA9IHR5cGVOYW1lVG9BcnJheShvcHRpb25zLnR5cGUpO1xuICAgIHR5cGVOYW1lcy5wdXNoLmFwcGx5KHR5cGVOYW1lcywgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHJlc3VsdHM7XG4gICAgICByZXN1bHRzID0gW107XG4gICAgICBmb3IgKG5hbWUgaW4gb3B0aW9ucykge1xuICAgICAgICBpZiAoIWhhc1Byb3AuY2FsbChvcHRpb25zLCBuYW1lKSkgY29udGludWU7XG4gICAgICAgIGlmIChpc1ZhbGlkVHlwZU5hbWUobmFtZSkpIHtcbiAgICAgICAgICByZXN1bHRzLnB1c2gobmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pKCkpO1xuICAgIHR5cGVOYW1lcyA9IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KHR5cGVOYW1lcyk7XG4gICAgdHlwZU5hbWUgPSB0eXBlTmFtZVRvU3RyaW5nKHR5cGVOYW1lcyk7XG4gICAgdHlwZUNoZWNrc1NpbXBsZSA9IHt9O1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpLCBsZW4sIHJlZiwgcmVzdWx0cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbiA9IHR5cGVOYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBuYW1lID0gdHlwZU5hbWVzW2ldO1xuICAgICAgICByZXN1bHRzLnB1c2godHlwZUNoZWNrc1NpbXBsZVtuYW1lXSA9IChyZWYgPSBvcHRpb25zW25hbWVdKSAhPSBudWxsID8gcmVmIDogaXNBbihuYW1lLCB7XG4gICAgICAgICAgcmV0dXJuQ2hlY2tlcjogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KSgpO1xuICAgIHR5cGVDaGVja1NpbXBsZSA9IChyZWYgPSBvcHRpb25zLmNoZWNrKSAhPSBudWxsID8gcmVmIDogKGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgdHlwZUNoZWNrcyA9IHt9O1xuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHZhciBjaGVjaywgcmVzdWx0cztcbiAgICAgIHJlc3VsdHMgPSBbXTtcbiAgICAgIGZvciAobmFtZSBpbiB0eXBlQ2hlY2tzU2ltcGxlKSB7XG4gICAgICAgIGNoZWNrID0gdHlwZUNoZWNrc1NpbXBsZVtuYW1lXTtcbiAgICAgICAgcmVzdWx0cy5wdXNoKChmdW5jdGlvbihjaGVjaykge1xuICAgICAgICAgIHJldHVybiB0eXBlQ2hlY2tzW25hbWVdID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBjaGVjayh2YWx1ZSkgJiYgdHlwZUNoZWNrU2ltcGxlKHZhbHVlKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KShjaGVjaykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gICAgfSkoKTtcbiAgICB0eXBlQ2hlY2sgPSAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVDaGVja1NpbXBsZSh2YWx1ZSkgJiYgKCh0eXBlTmFtZXMubGVuZ3RoID09PSAwKSB8fCAodHlwZU5hbWVzLnNvbWUoZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgIHJldHVybiB0eXBlQ2hlY2tzU2ltcGxlW25hbWVdKHZhbHVlKTtcbiAgICAgICAgfSkpKTtcbiAgICAgIH07XG4gICAgfSkoKTtcbiAgICByZWFkRXJyb3IgPSBrby5vYnNlcnZhYmxlKCk7XG4gICAgd3JpdGVFcnJvciA9IGtvLm9ic2VydmFibGUoKTtcbiAgICByZXN1bHQgPSBrby5jb21wdXRlZCh7XG4gICAgICBwdXJlOiBvcHRpb25zLnB1cmUsXG4gICAgICBkZWZlckV2YWx1YXRpb246IHRydWUsXG4gICAgICByZWFkOiB3cmFwUmVhZChvcHRpb25zLCB0YXJnZXQsIHJlYWRFcnJvciwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnRlcm5hbFZhbHVlO1xuICAgICAgICBpbnRlcm5hbFZhbHVlID0gdGFyZ2V0KCk7XG4gICAgICAgIGlmICghdHlwZUNoZWNrKGludGVybmFsVmFsdWUpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuZXhwZWN0ZWQgaW50ZXJuYWwgdHlwZS4gRXhwZWN0ZWQgXCIgKyB0eXBlTmFtZSArIFwiLCBnb3QgXCIgKyAoaXNBbihpbnRlcm5hbFZhbHVlKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnRlcm5hbFZhbHVlO1xuICAgICAgfSksXG4gICAgICB3cml0ZTogd3JhcFdyaXRlKG9wdGlvbnMsIHRhcmdldCwgd3JpdGVFcnJvciwgZnVuY3Rpb24oZXh0ZXJuYWxWYWx1ZSkge1xuICAgICAgICBpZiAodHlwZUNoZWNrKGV4dGVybmFsVmFsdWUpKSB7XG4gICAgICAgICAgdGFyZ2V0KGV4dGVybmFsVmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmV4cGVjdGVkIGV4dGVybmFsIHR5cGUuIEV4cGVjdGVkIFwiICsgdHlwZU5hbWUgKyBcIiwgcmVjZWl2ZWQgXCIgKyAoaXNBbihleHRlcm5hbFZhbHVlKSkpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgIH0pO1xuICAgIHJlc3VsdC50eXBlTmFtZSA9IHR5cGVOYW1lO1xuICAgIHJlc3VsdC50eXBlTmFtZXMgPSB0eXBlTmFtZXM7XG4gICAgcmVzdWx0LnR5cGVDaGVjayA9IHR5cGVDaGVjaztcbiAgICByZXN1bHQudHlwZUNoZWNrcyA9IHR5cGVDaGVja3M7XG4gICAgcmVzdWx0LnJlYWRFcnJvciA9IHJlYWRFcnJvcjtcbiAgICByZXN1bHQud3JpdGVFcnJvciA9IHdyaXRlRXJyb3I7XG4gICAgdmFsaWRhdGUodGFyZ2V0LCByZXN1bHQsIG9wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucy5kZWZlckV2YWx1YXRpb24pIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc3VsdC5wZWVrKCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleCA9IGVycm9yO1xuICAgICAgICByZXN1bHQuZGlzcG9zZSgpO1xuICAgICAgICB0aHJvdyBleDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucyA9IHt9O1xuICBrby5leHRlbmRlcnMuY29udmVydCA9IGZ1bmN0aW9uKHRhcmdldCwgb3B0aW9ucykge1xuICAgIHZhciBlcnJvciwgZXgsIHJlYWRFcnJvciwgcmVzdWx0LCB3cml0ZUVycm9yO1xuICAgIGlmIChvcHRpb25zID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9XG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoZWNrZXIsIGV4dFR5cGVOYW1lLCBleHRUeXBlT3B0aW9ucywgaSwgaW50VHlwZU5hbWUsIGludFR5cGVPcHRpb25zLCBsZW4sIG5vcm1hbCwgcmVmLCByZWYxLCByZWYyLCByZWYzLCByZWY0LCByZWY1LCByZWY2LCByZWY3O1xuICAgICAgaWYgKGlzQW4uU3RyaW5nKG9wdGlvbnMpIHx8IGlzQW4uQXJyYXkob3B0aW9ucykpIHtcbiAgICAgICAgb3B0aW9ucyA9IHtcbiAgICAgICAgICB0eXBlOiBvcHRpb25zXG4gICAgICAgIH07XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMgPT09IHRydWUpIHtcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IGV4dGVuZCh7fSwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICBub3JtYWwgPSB7XG4gICAgICAgIGNoZWNrU2VsZjogKHJlZiA9IG9wdGlvbnMuY2hlY2spICE9IG51bGwgPyByZWYgOiBmblRydWUsXG4gICAgICAgIHJlYWQ6IG9wdGlvbnMucmVhZCxcbiAgICAgICAgd3JpdGU6IG9wdGlvbnMud3JpdGUsXG4gICAgICAgIGNoZWNrczoge30sXG4gICAgICAgIGNoZWNrZXJzOiBbXSxcbiAgICAgICAgaXNUeXBlZDogaXNUeXBlZCh0YXJnZXQpLFxuICAgICAgICBpZ25vcmVEZWZhdWx0Q29udmVydGVyczogb3B0aW9ucy5pZ25vcmVEZWZhdWx0Q29udmVydGVycyxcbiAgICAgICAgcHVyZTogb3B0aW9ucy5wdXJlLFxuICAgICAgICBkZWZlckV2YWx1YXRpb246IG9wdGlvbnMuZGVmZXJFdmFsdWF0aW9uLFxuICAgICAgICB0eXBlczogdHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXkob3B0aW9ucy50eXBlKVxuICAgICAgfTtcbiAgICAgIG5vcm1hbGl6ZUV4UmVhZChub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgbm9ybWFsaXplRXhXcml0ZShub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgbm9ybWFsaXplVmFsaWRhdGlvbihub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgZm9yIChleHRUeXBlTmFtZSBpbiBvcHRpb25zKSB7XG4gICAgICAgIGlmICghaGFzUHJvcC5jYWxsKG9wdGlvbnMsIGV4dFR5cGVOYW1lKSkgY29udGludWU7XG4gICAgICAgIGV4dFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV07XG4gICAgICAgIGlmICghaXNWYWxpZFR5cGVOYW1lKGV4dFR5cGVOYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGV4dFR5cGVPcHRpb25zID0gKHJlZjEgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZjEgOiB7fTtcbiAgICAgICAgbm9ybWFsW2V4dFR5cGVOYW1lXSA9IHtcbiAgICAgICAgICBjaGVja1NlbGY6IGV4dFR5cGVPcHRpb25zLmNoZWNrLFxuICAgICAgICAgIHJlYWQ6IGV4dFR5cGVPcHRpb25zLnJlYWQsXG4gICAgICAgICAgd3JpdGU6IGV4dFR5cGVPcHRpb25zLndyaXRlLFxuICAgICAgICAgIHR5cGVzOiB0eXBlTmFtZVRvRGlzdGluY3RBcnJheShleHRUeXBlT3B0aW9ucy50eXBlKVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGludFR5cGVOYW1lIGluIGV4dFR5cGVPcHRpb25zKSB7XG4gICAgICAgICAgaWYgKCFoYXNQcm9wLmNhbGwoZXh0VHlwZU9wdGlvbnMsIGludFR5cGVOYW1lKSkgY29udGludWU7XG4gICAgICAgICAgaWYgKCFpc1ZhbGlkVHlwZU5hbWUoaW50VHlwZU5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW50VHlwZU9wdGlvbnMgPSAocmVmMiA9IChyZWYzID0gb3B0aW9uc1tleHRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYzW2ludFR5cGVOYW1lXSA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjIgOiB7fTtcbiAgICAgICAgICBub3JtYWxbZXh0VHlwZU5hbWVdW2ludFR5cGVOYW1lXSA9IHtcbiAgICAgICAgICAgIHJlYWQ6IGludFR5cGVPcHRpb25zLnJlYWQsXG4gICAgICAgICAgICB3cml0ZTogaW50VHlwZU9wdGlvbnMud3JpdGVcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub3JtYWwudHlwZSA9IHR5cGVOYW1lVG9TdHJpbmcobm9ybWFsLnR5cGVzKTtcbiAgICAgIHJlZjQgPSBub3JtYWwudHlwZXM7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWY0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGV4dFR5cGVOYW1lID0gcmVmNFtpXTtcbiAgICAgICAgY2hlY2tlciA9IChyZWY1ID0gKHJlZjYgPSAocmVmNyA9IG5vcm1hbFtleHRUeXBlTmFtZV0pICE9IG51bGwgPyByZWY3LmNoZWNrU2VsZiA6IHZvaWQgMCkgIT0gbnVsbCA/IHJlZjYgOiBpc0FuKGV4dFR5cGVOYW1lLCB7XG4gICAgICAgICAgcmV0dXJuQ2hlY2tlcjogdHJ1ZVxuICAgICAgICB9KSkgIT0gbnVsbCA/IHJlZjUgOiBmblRydWU7XG4gICAgICAgIG5vcm1hbC5jaGVja3NbZXh0VHlwZU5hbWVdID0gKGZ1bmN0aW9uKGNoZWNrZXIpIHtcbiAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBub3JtYWwuY2hlY2tTZWxmKHZhbHVlKSAmJiBjaGVja2VyKHZhbHVlKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9KShjaGVja2VyKTtcbiAgICAgICAgbm9ybWFsLmNoZWNrZXJzLnB1c2gobm9ybWFsLmNoZWNrc1tleHRUeXBlTmFtZV0pO1xuICAgICAgfVxuICAgICAgbm9ybWFsLmNoZWNrID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5vcm1hbC5jaGVja1NlbGYodmFsdWUpICYmICgobm9ybWFsLmNoZWNrZXJzLmxlbmd0aCA9PT0gMCkgfHwgbm9ybWFsLmNoZWNrZXJzLnNvbWUoZnVuY3Rpb24oY2hlY2tlcikge1xuICAgICAgICAgIHJldHVybiBjaGVja2VyKHZhbHVlKTtcbiAgICAgICAgfSkpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBvcHRpb25zID0gbm9ybWFsO1xuICAgIH0pKCk7XG4gICAgcmVhZEVycm9yID0ga28ub2JzZXJ2YWJsZSgpO1xuICAgIHdyaXRlRXJyb3IgPSBrby5vYnNlcnZhYmxlKCk7XG4gICAgcmVzdWx0ID0ga28uY29tcHV0ZWQoe1xuICAgICAgcHVyZTogb3B0aW9ucy5wdXJlLFxuICAgICAgZGVmZXJFdmFsdWF0aW9uOiB0cnVlLFxuICAgICAgcmVhZDogd3JhcFJlYWQob3B0aW9ucywgdGFyZ2V0LCByZWFkRXJyb3IsIGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYmFzZTEsIGV4dFR5cGVOYW1lLCBleHRUeXBlTmFtZXMsIGV4dFR5cGVPcHRpb25zLCBleHRlcm5hbFZhbHVlLCBpLCBpbnRUeXBlTmFtZSwgaW50VHlwZU5hbWVzLCBpbnRUeXBlT3B0aW9ucywgaW50ZXJuYWxWYWx1ZSwgaiwgaywgbGVuLCBsZW4xLCBsZW4yLCByZWYsIHJlZjEsIHJlZjIsIHJlZjMsIHRyeVJlYWQ7XG4gICAgICAgIGludGVybmFsVmFsdWUgPSB0YXJnZXQoKTtcbiAgICAgICAgZXh0ZXJuYWxWYWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdHJ5UmVhZCA9IGZ1bmN0aW9uKHJlYWQsIHJlYWRPcHRpb25zKSB7XG4gICAgICAgICAgdmFyIGVycm9yLCBleDtcbiAgICAgICAgICBpZiAocmVhZCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBleHRlcm5hbFZhbHVlID0gcmVhZChpbnRlcm5hbFZhbHVlLCByZWFkT3B0aW9ucyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBleCA9IGVycm9yO1xuICAgICAgICAgICAgICBpZiAoIShleCBpbnN0YW5jZW9mIFR5cGVFcnJvcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2hlY2soZXh0ZXJuYWxWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIGV4dFR5cGVOYW1lcyA9IG9wdGlvbnMudHlwZXM7XG4gICAgICAgIGlmIChleHRUeXBlTmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZXh0VHlwZU5hbWVzID0gW2lzQW4oaW50ZXJuYWxWYWx1ZSldO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGV4dFR5cGVOYW1lcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGV4dFR5cGVOYW1lID0gZXh0VHlwZU5hbWVzW2ldO1xuICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gKHJlZiA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmIDoge307XG4gICAgICAgICAgaW50VHlwZU5hbWVzID0gKHJlZjEgPSBleHRUeXBlT3B0aW9ucy50eXBlcykgIT0gbnVsbCA/IHJlZjEgOiBbXTtcbiAgICAgICAgICBpZiAoaW50VHlwZU5hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuaXNUeXBlZCkge1xuICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSB0YXJnZXQudHlwZU5hbWVzO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gW2lzQW4oaW50ZXJuYWxWYWx1ZSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4xID0gaW50VHlwZU5hbWVzLmxlbmd0aDsgaiA8IGxlbjE7IGorKykge1xuICAgICAgICAgICAgaW50VHlwZU5hbWUgPSBpbnRUeXBlTmFtZXNbal07XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5pc1R5cGVkICYmICEodHlwZW9mIChiYXNlMSA9IHRhcmdldC50eXBlQ2hlY2tzKVtpbnRUeXBlTmFtZV0gPT09IFwiZnVuY3Rpb25cIiA/IGJhc2UxW2ludFR5cGVOYW1lXShpbnRlcm5hbFZhbHVlKSA6IHZvaWQgMCkpIHtcbiAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbnRUeXBlT3B0aW9ucyA9IChyZWYyID0gZXh0VHlwZU9wdGlvbnNbaW50VHlwZU5hbWVdKSAhPSBudWxsID8gcmVmMiA6IHt9O1xuICAgICAgICAgICAgaWYgKGludFR5cGVPcHRpb25zLnJlYWQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAodHJ5UmVhZChpbnRUeXBlT3B0aW9ucy5yZWFkLCBpbnRUeXBlT3B0aW9ucy5yZWFkT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChpbnRUeXBlTmFtZSA9PT0gZXh0VHlwZU5hbWUpIHtcbiAgICAgICAgICAgICAgaWYgKChleHRUeXBlT3B0aW9ucy5yZWFkID09IG51bGwpICYmIChvcHRpb25zLnJlYWQgPT0gbnVsbCkgJiYgdHJ5UmVhZChmbklkZW50aXR5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFvcHRpb25zLmlnbm9yZURlZmF1bHRDb252ZXJ0ZXJzKSB7XG4gICAgICAgICAgICAgIGlmICh0cnlSZWFkKGtvLnR5cGVkLmdldENvbnZlcnRlcihpbnRUeXBlTmFtZSwgZXh0VHlwZU5hbWUpLCBpbnRUeXBlT3B0aW9ucy5yZWFkT3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGsgPSAwLCBsZW4yID0gZXh0VHlwZU5hbWVzLmxlbmd0aDsgayA8IGxlbjI7IGsrKykge1xuICAgICAgICAgIGV4dFR5cGVOYW1lID0gZXh0VHlwZU5hbWVzW2tdO1xuICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gKHJlZjMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSkgIT0gbnVsbCA/IHJlZjMgOiB7fTtcbiAgICAgICAgICBpZiAodHJ5UmVhZChleHRUeXBlT3B0aW9ucy5yZWFkLCBleHRUeXBlT3B0aW9ucy5yZWFkT3B0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHJ5UmVhZChvcHRpb25zLnJlYWQsIG9wdGlvbnMucmVhZE9wdGlvbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMudHlwZSAhPSBudWxsKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gaW50ZXJuYWwgdHlwZSBcIiArIChpc0FuKGludGVybmFsVmFsdWUpKSArIFwiIHRvIGV4dGVybmFsIHR5cGUgXCIgKyBvcHRpb25zLnR5cGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIGludGVybmFsIHR5cGUgXCIgKyAoaXNBbihpbnRlcm5hbFZhbHVlKSkpO1xuICAgICAgICB9XG4gICAgICB9KSxcbiAgICAgIHdyaXRlOiB3cmFwV3JpdGUob3B0aW9ucywgdGFyZ2V0LCB3cml0ZUVycm9yLCBmdW5jdGlvbihleHRlcm5hbFZhbHVlKSB7XG4gICAgICAgIHZhciBleHRUeXBlTmFtZSwgZXh0VHlwZU5hbWVzLCBleHRUeXBlT3B0aW9ucywgaSwgaW50VHlwZU5hbWUsIGludFR5cGVOYW1lcywgaW50VHlwZU9wdGlvbnMsIGosIGssIGxlbiwgbGVuMSwgbGVuMiwgcmVmLCByZWYxLCByZWYyLCByZWYzLCB0cnlXcml0ZTtcbiAgICAgICAgdHJ5V3JpdGUgPSBmdW5jdGlvbih3cml0ZSwgd3JpdGVPcHRpb25zKSB7XG4gICAgICAgICAgdmFyIGVycm9yLCBleCwgaW50ZXJuYWxWYWx1ZTtcbiAgICAgICAgICBpZiAod3JpdGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IHdyaXRlKGV4dGVybmFsVmFsdWUsIHdyaXRlT3B0aW9ucyk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBleCA9IGVycm9yO1xuICAgICAgICAgICAgICBpZiAoIShleCBpbnN0YW5jZW9mIFR5cGVFcnJvcikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgdGFyZ2V0KGludGVybmFsVmFsdWUpO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoKG9wdGlvbnMuY2hlY2tTZWxmID09IG51bGwpIHx8IG9wdGlvbnMuY2hlY2tTZWxmKGV4dGVybmFsVmFsdWUpKSB7XG4gICAgICAgICAgZXh0VHlwZU5hbWVzID0gb3B0aW9ucy50eXBlcztcbiAgICAgICAgICBpZiAoZXh0VHlwZU5hbWVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgZXh0VHlwZU5hbWVzID0gW2lzQW4oZXh0ZXJuYWxWYWx1ZSldO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBleHRUeXBlTmFtZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGV4dFR5cGVOYW1lID0gZXh0VHlwZU5hbWVzW2ldO1xuICAgICAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSAocmVmID0gb3B0aW9uc1tleHRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYgOiB7fTtcbiAgICAgICAgICAgIGlmICgoKGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZiAhPSBudWxsKSAmJiAhZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmKGV4dGVybmFsVmFsdWUpKSB8fCAoKGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZiA9PSBudWxsKSAmJiAhaXNBbihleHRlcm5hbFZhbHVlLCBleHRUeXBlTmFtZSkpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gKHJlZjEgPSBleHRUeXBlT3B0aW9ucy50eXBlcykgIT0gbnVsbCA/IHJlZjEgOiBbXTtcbiAgICAgICAgICAgIGlmIChpbnRUeXBlTmFtZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIGlmIChvcHRpb25zLmlzVHlwZWQpIHtcbiAgICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSB0YXJnZXQudHlwZU5hbWVzO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IFtpc0FuKGV4dGVybmFsVmFsdWUpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChqID0gMCwgbGVuMSA9IGludFR5cGVOYW1lcy5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgICAgICAgaW50VHlwZU5hbWUgPSBpbnRUeXBlTmFtZXNbal07XG4gICAgICAgICAgICAgIGludFR5cGVPcHRpb25zID0gKHJlZjIgPSBleHRUeXBlT3B0aW9uc1tpbnRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYyIDoge307XG4gICAgICAgICAgICAgIGlmIChpbnRUeXBlT3B0aW9ucy53cml0ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRyeVdyaXRlKGludFR5cGVPcHRpb25zLndyaXRlLCBpbnRUeXBlT3B0aW9ucy53cml0ZU9wdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV4dFR5cGVOYW1lID09PSBpbnRUeXBlTmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICgoZXh0VHlwZU9wdGlvbnMud3JpdGUgPT0gbnVsbCkgJiYgKG9wdGlvbnMud3JpdGUgPT0gbnVsbCkgJiYgKCFvcHRpb25zLmlzVHlwZWQgfHwgdGFyZ2V0LnR5cGVDaGVja3NbZXh0VHlwZU5hbWVdKGV4dGVybmFsVmFsdWUpKSAmJiB0cnlXcml0ZShmbklkZW50aXR5KSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIGlmICghb3B0aW9ucy5pZ25vcmVEZWZhdWx0Q29udmVydGVycykge1xuICAgICAgICAgICAgICAgIGlmICh0cnlXcml0ZShrby50eXBlZC5nZXRDb252ZXJ0ZXIoZXh0VHlwZU5hbWUsIGludFR5cGVOYW1lKSwgaW50VHlwZU9wdGlvbnMud3JpdGVPcHRpb25zKSkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGsgPSAwLCBsZW4yID0gZXh0VHlwZU5hbWVzLmxlbmd0aDsgayA8IGxlbjI7IGsrKykge1xuICAgICAgICAgICAgZXh0VHlwZU5hbWUgPSBleHRUeXBlTmFtZXNba107XG4gICAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IChyZWYzID0gb3B0aW9uc1tleHRUeXBlTmFtZV0pICE9IG51bGwgPyByZWYzIDoge307XG4gICAgICAgICAgICBpZiAoKChleHRUeXBlT3B0aW9ucy5jaGVja1NlbGYgIT0gbnVsbCkgJiYgIWV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZihleHRlcm5hbFZhbHVlKSkgfHwgKChleHRUeXBlT3B0aW9ucy5jaGVja1NlbGYgPT0gbnVsbCkgJiYgIWlzQW4oZXh0ZXJuYWxWYWx1ZSwgZXh0VHlwZU5hbWUpKSkge1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cnlXcml0ZShleHRUeXBlT3B0aW9ucy53cml0ZSwgZXh0VHlwZU9wdGlvbnMud3JpdGVPcHRpb25zKSkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICh0cnlXcml0ZShvcHRpb25zLndyaXRlLCBvcHRpb25zLndyaXRlT3B0aW9ucykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMuaXNUeXBlZCkge1xuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIGV4dGVybmFsIHR5cGUgXCIgKyAoaXNBbihleHRlcm5hbFZhbHVlKSkgKyBcIiB0byBpbnRlcm5hbCB0eXBlIFwiICsgdGFyZ2V0LnR5cGVOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBleHRlcm5hbCB0eXBlIFwiICsgKGlzQW4oZXh0ZXJuYWxWYWx1ZSkpKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9KTtcbiAgICByZXN1bHQudHlwZU5hbWUgPSBvcHRpb25zLnR5cGU7XG4gICAgcmVzdWx0LnR5cGVOYW1lcyA9IG9wdGlvbnMudHlwZXM7XG4gICAgcmVzdWx0LnR5cGVDaGVjayA9IG9wdGlvbnMuY2hlY2s7XG4gICAgcmVzdWx0LnR5cGVDaGVja3MgPSBvcHRpb25zLmNoZWNrcztcbiAgICByZXN1bHQucmVhZEVycm9yID0gcmVhZEVycm9yO1xuICAgIHJlc3VsdC53cml0ZUVycm9yID0gd3JpdGVFcnJvcjtcbiAgICB2YWxpZGF0ZSh0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucyk7XG4gICAgaWYgKCFvcHRpb25zLmRlZmVyRXZhbHVhdGlvbikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0LnBlZWsoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGV4ID0gZXJyb3I7XG4gICAgICAgIHJlc3VsdC5kaXNwb3NlKCk7XG4gICAgICAgIHRocm93IGV4O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zID0ge307XG4gIChmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udmVydGVycztcbiAgICBrby50eXBlZC5fY29udmVydGVycyA9IGNvbnZlcnRlcnMgPSB7fTtcbiAgICBrby50eXBlZC5hZGRDb252ZXJ0ZXIgPSBmdW5jdGlvbihmcm9tVHlwZU5hbWUsIHRvVHlwZU5hbWUsIGNvbnZlcnRlciwgZGVmYXVsdE9wdGlvbnMsIGRlZmF1bHRPcHRpb24pIHtcbiAgICAgIHZhciB3cmFwcGVyO1xuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlLmFzc2VydCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgY29uc29sZS5hc3NlcnQoaXNWYWxpZFR5cGVOYW1lKGZyb21UeXBlTmFtZSksIFwiSW52YWxpZCB0eXBlTmFtZSBcIiArIGZyb21UeXBlTmFtZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29uc29sZS5hc3NlcnQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGNvbnNvbGUuYXNzZXJ0KGlzVmFsaWRUeXBlTmFtZSh0b1R5cGVOYW1lKSwgXCJJbnZhbGlkIHR5cGVOYW1lIFwiICsgZnJvbVR5cGVOYW1lKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRlZmF1bHRPcHRpb25zICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGRlZmF1bHRPcHRpb24gIT0gbnVsbCkge1xuICAgICAgICAgIHdyYXBwZXIgPSBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiAhaXNBbi5PYmplY3Qob3B0aW9ucykpIHtcbiAgICAgICAgICAgICAgbyA9IHt9O1xuICAgICAgICAgICAgICBvW2RlZmF1bHRPcHRpb25dID0gb3B0aW9ucztcbiAgICAgICAgICAgICAgb3B0aW9ucyA9IG87XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlLCBrby51dGlscy5leHRlbmQoa28udXRpbHMuZXh0ZW5kKHt9LCB3cmFwcGVyLm9wdGlvbnMpLCBvcHRpb25zKSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3cmFwcGVyID0gZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHJldHVybiBjb252ZXJ0ZXIodmFsdWUsIGtvLnV0aWxzLmV4dGVuZChrby51dGlscy5leHRlbmQoe30sIHdyYXBwZXIub3B0aW9ucyksIG9wdGlvbnMpKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cmFwcGVyID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHdyYXBwZXIub3B0aW9ucyA9IGRlZmF1bHRPcHRpb25zO1xuICAgICAgaWYgKGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXSA9IHt9O1xuICAgICAgfVxuICAgICAgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdW3RvVHlwZU5hbWVdID0gd3JhcHBlcjtcbiAgICAgIHJldHVybiBrby50eXBlZDtcbiAgICB9O1xuICAgIGtvLnR5cGVkLmdldENvbnZlcnRlciA9IGZ1bmN0aW9uKGZyb21UeXBlTmFtZSwgdG9UeXBlTmFtZSkge1xuICAgICAgdmFyIHJlZjtcbiAgICAgIHJldHVybiAocmVmID0gY29udmVydGVyc1tmcm9tVHlwZU5hbWVdKSAhPSBudWxsID8gcmVmW3RvVHlwZU5hbWVdIDogdm9pZCAwO1xuICAgIH07XG4gICAga28udHlwZWQucmVtb3ZlQ29udmVydGVyID0gZnVuY3Rpb24oZnJvbVR5cGVOYW1lLCB0b1R5cGVOYW1lKSB7XG4gICAgICB2YXIgcmVmLCByZWYxO1xuICAgICAgaWYgKCgocmVmID0gY29udmVydGVyc1tmcm9tVHlwZU5hbWVdKSAhPSBudWxsID8gcmVmW3RvVHlwZU5hbWVdIDogdm9pZCAwKSAhPSBudWxsKSB7XG4gICAgICAgIGlmICgocmVmMSA9IGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXSkgIT0gbnVsbCkge1xuICAgICAgICAgIGRlbGV0ZSByZWYxW3RvVHlwZU5hbWVdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ga28udHlwZWQ7XG4gICAgfTtcbiAgfSkoKTtcbiAgKGZ1bmN0aW9uKCkge1xuICAgIHZhciBkZWNpbWFsQWRqdXN0O1xuICAgIGRlY2ltYWxBZGp1c3QgPSBmdW5jdGlvbih0eXBlLCB2YWx1ZSwgZXhwKSB7XG4gICAgICBpZiAoKGV4cCA9PSBudWxsKSB8fCArZXhwID09PSAwKSB7XG4gICAgICAgIHJldHVybiB0eXBlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gK3ZhbHVlO1xuICAgICAgZXhwID0gK2V4cDtcbiAgICAgIGlmIChpc05hTih2YWx1ZSkgfHwgISh0eXBlb2YgZXhwID09PSAnbnVtYmVyJyAmJiBleHAgJSAxID09PSAwKSkge1xuICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgfVxuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KCdlJyk7XG4gICAgICB2YWx1ZSA9IHR5cGUoKyh2YWx1ZVswXSArICdlJyArICh2YWx1ZVsxXSA/ICt2YWx1ZVsxXSAtIGV4cCA6IC1leHApKSk7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJ2UnKTtcbiAgICAgIHJldHVybiArKHZhbHVlWzBdICsgJ2UnICsgKHZhbHVlWzFdID8gK3ZhbHVlWzFdICsgZXhwIDogZXhwKSk7XG4gICAgfTtcblxuICAgIC8qICFwcmFnbWEgY292ZXJhZ2Utc2tpcC1uZXh0ICovXG4gICAgaWYgKE1hdGgucm91bmQxMCA9PSBudWxsKSB7XG4gICAgICBNYXRoLnJvdW5kMTAgPSBmdW5jdGlvbih2YWx1ZSwgZXhwKSB7XG4gICAgICAgIHJldHVybiBkZWNpbWFsQWRqdXN0KE1hdGgucm91bmQsIHZhbHVlLCBleHApO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKiAhcHJhZ21hIGNvdmVyYWdlLXNraXAtbmV4dCAqL1xuICAgIGlmIChNYXRoLmZsb29yMTAgPT0gbnVsbCkge1xuICAgICAgTWF0aC5mbG9vcjEwID0gZnVuY3Rpb24odmFsdWUsIGV4cCkge1xuICAgICAgICByZXR1cm4gZGVjaW1hbEFkanVzdChNYXRoLmZsb29yLCB2YWx1ZSwgZXhwKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyogIXByYWdtYSBjb3ZlcmFnZS1za2lwLW5leHQgKi9cbiAgICBpZiAoTWF0aC5jZWlsMTAgPT0gbnVsbCkge1xuICAgICAgTWF0aC5jZWlsMTAgPSBmdW5jdGlvbih2YWx1ZSwgZXhwKSB7XG4gICAgICAgIHJldHVybiBkZWNpbWFsQWRqdXN0KE1hdGguY2VpbCwgdmFsdWUsIGV4cCk7XG4gICAgICB9O1xuICAgIH1cbiAgfSkoKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdCb29sZWFuJywgJ051bWJlci5JbnRlZ2VyJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLnRydXRoeTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuZmFsc2V5O1xuICAgIH1cbiAgfSwge1xuICAgIHRydXRoeTogMSxcbiAgICBmYWxzZXk6IDBcbiAgfSwgJ3RydXRoeScpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ0Jvb2xlYW4nLCAnTnVtYmVyJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLnRydXRoeTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuZmFsc2V5O1xuICAgIH1cbiAgfSwge1xuICAgIHRydXRoeTogMSxcbiAgICBmYWxzZXk6IDBcbiAgfSwgJ3RydXRoeScpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ0Jvb2xlYW4nLCAnU3RyaW5nJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YWx1ZSA9IHZhbHVlID8gb3B0aW9ucy50cnV0aHkgOiBvcHRpb25zLmZhbHNleTtcbiAgICBpZiAob3B0aW9ucy51cHBlckNhc2UpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9VcHBlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LCB7XG4gICAgdXBwZXJDYXNlOiBmYWxzZSxcbiAgICB0cnV0aHk6ICd0cnVlJyxcbiAgICBmYWxzZXk6ICdmYWxzZSdcbiAgfSwgJ3VwcGVyQ2FzZScpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ0RhdGUnLCAnTW9tZW50JywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKHR5cGVvZiBtb21lbnQgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9tZW50ICE9PSBudWxsID8gbW9tZW50IDogcmVxdWlyZSgnbW9tZW50JykpKHZhbHVlKTtcbiAgfSk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignRGF0ZScsICdTdHJpbmcnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhciBtZXRob2Q7XG4gICAgaWYgKGlzTmFOKHZhbHVlLnZhbHVlT2YoKSkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgbWV0aG9kID0gb3B0aW9ucy5mb3JtYXRzW29wdGlvbnMuZm9ybWF0XTtcbiAgICByZXR1cm4gdmFsdWVbbWV0aG9kXS5hcHBseSh2YWx1ZSwgb3B0aW9ucy5wYXJhbXMpO1xuICB9LCB7XG4gICAgZm9ybWF0czoge1xuICAgICAgZGF0ZTogJ3RvRGF0ZVN0cmluZycsXG4gICAgICBpc286ICd0b0lTT1N0cmluZycsXG4gICAgICBqc29uOiAndG9KU09OJyxcbiAgICAgIGxvY2FsZURhdGU6ICd0b0xvY2FsZURhdGVTdHJpbmcnLFxuICAgICAgbG9jYWxlVGltZTogJ3RvTG9jYWxlVGltZVN0cmluZycsXG4gICAgICBsb2NhbGU6ICd0b0xvY2FsZVN0cmluZycsXG4gICAgICB0aW1lOiAndG9UaW1lU3RyaW5nJyxcbiAgICAgIHV0YzogJ3RvVVRDU3RyaW5nJyxcbiAgICAgIFwiZGVmYXVsdFwiOiAndG9TdHJpbmcnXG4gICAgfSxcbiAgICBmb3JtYXQ6ICdkZWZhdWx0JyxcbiAgICBwYXJhbXM6IFtdXG4gIH0sICdmb3JtYXQnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdEYXRlJywgJ1VuZGVmaW5lZCcsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKCFpc05hTih2YWx1ZS52YWx1ZU9mKCkpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIHZhbGlkIERhdGUgdG8gVW5kZWZpbmVkJyk7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ01vbWVudCcsICdEYXRlJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdmFsdWUudG9EYXRlKCk7XG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ01vbWVudCcsICdTdHJpbmcnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICghdmFsdWUuaXNWYWxpZCgpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZS5sb2NhbGUob3B0aW9ucy5sb2NhbGUpLmZvcm1hdChvcHRpb25zLmZvcm1hdCk7XG4gIH0sIHtcbiAgICBsb2NhbGU6ICdlbicsXG4gICAgZm9ybWF0OiAnTCdcbiAgfSwgJ2Zvcm1hdCcpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ01vbWVudCcsICdVbmRlZmluZWQnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIGlmICh2YWx1ZS5pc1ZhbGlkKCkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gdmFsaWQgTW9tZW50IHRvIFVuZGVmaW5lZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdm9pZCAwO1xuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdOdW1iZXInLCAnQm9vbGVhbicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKChvcHRpb25zLmZhbHNleSAhPSBudWxsKSAmJiB2YWx1ZSA9PT0gb3B0aW9ucy5mYWxzZXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKChvcHRpb25zLnRydXRoeSAhPSBudWxsKSAmJiB2YWx1ZSA9PT0gb3B0aW9ucy50cnV0aHkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5mYWxzZXkgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy50cnV0aHkgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBmcm9tIFwiICsgdmFsdWUgKyBcIiB0byBCb29sZWFuXCIpO1xuICB9LCB7XG4gICAgdHJ1dGh5OiB2b2lkIDAsXG4gICAgZmFsc2V5OiAwXG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ051bWJlcicsICdOdW1iZXIuSW50ZWdlcicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgdmFyIG1vZGU7XG4gICAgaWYgKG9wdGlvbnMubW9kZSA9PSBudWxsKSB7XG4gICAgICBpZiAoIWlzQW4uTnVtYmVyLkludGVnZXIodmFsdWUpKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGZyb20gTnVtYmVyIHRvIE51bWJlci5JbnRlZ2VyLiBOdW1iZXIgaXMgbm90IGFuIGludGVnZXInKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zLm1vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBtb2RlID0gTWF0aFtvcHRpb25zLm1vZGVdO1xuICAgIH0gZWxzZSB7XG4gICAgICBtb2RlID0gb3B0aW9ucy5tb2RlO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZSh2YWx1ZSk7XG4gIH0sIHtcbiAgICBtb2RlOiB2b2lkIDBcbiAgfSwgJ21vZGUnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdOdW1iZXInLCAnU3RyaW5nJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5kZWNpbWFscyAhPSBudWxsKSB7XG4gICAgICB2YWx1ZSA9IE1hdGgucm91bmQxMCh2YWx1ZSwgLW9wdGlvbnMuZGVjaW1hbHMpO1xuICAgICAgdmFsdWUgPSB2YWx1ZS50b0ZpeGVkKG9wdGlvbnMuZGVjaW1hbHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSwge1xuICAgIGRlY2ltYWxzOiB2b2lkIDBcbiAgfSwgJ2RlY2ltYWxzJyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignTnVtYmVyLkludGVnZXInLCAnQm9vbGVhbicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKChvcHRpb25zLmZhbHNleSAhPSBudWxsKSAmJiB2YWx1ZSA9PT0gb3B0aW9ucy5mYWxzZXkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKChvcHRpb25zLnRydXRoeSAhPSBudWxsKSAmJiB2YWx1ZSA9PT0gb3B0aW9ucy50cnV0aHkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy5mYWxzZXkgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAob3B0aW9ucy50cnV0aHkgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBmcm9tIFwiICsgdmFsdWUgKyBcIiB0byBCb29sZWFuXCIpO1xuICB9LCB7XG4gICAgdHJ1dGh5OiB2b2lkIDAsXG4gICAgZmFsc2V5OiAwXG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ051bWJlci5JbnRlZ2VyJywgJ051bWJlcicsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdOdW1iZXIuSW50ZWdlcicsICdTdHJpbmcnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcob3B0aW9ucy5iYXNlKTtcbiAgICBpZiAob3B0aW9ucy51cHBlckNhc2UpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudG9VcHBlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LCB7XG4gICAgYmFzZTogMTAsXG4gICAgdXBwZXJDYXNlOiBmYWxzZVxuICB9LCAnYmFzZScpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1N0cmluZycsICdCb29sZWFuJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZmFsc2V5LCBpLCBqLCBsZW4sIGxlbjEsIHJlZiwgcmVmMSwgdHJ1dGh5O1xuICAgIGlmIChvcHRpb25zLnRyaW0pIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5pZ25vcmVDYXNlKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnN0cmljdCkge1xuICAgICAgaWYgKHZhbHVlID09PSBvcHRpb25zLnRydXRoeVswXSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IG9wdGlvbnMuZmFsc2V5WzBdKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVmID0gb3B0aW9ucy50cnV0aHk7XG4gICAgICBmb3IgKGkgPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdHJ1dGh5ID0gcmVmW2ldO1xuICAgICAgICBpZiAodmFsdWUgPT09IHRydXRoeSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZWYxID0gb3B0aW9ucy5mYWxzZXk7XG4gICAgICBmb3IgKGogPSAwLCBsZW4xID0gcmVmMS5sZW5ndGg7IGogPCBsZW4xOyBqKyspIHtcbiAgICAgICAgZmFsc2V5ID0gcmVmMVtqXTtcbiAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZXkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IGZyb20gXCIgKyB2YWx1ZSArIFwiIHRvIEJvb2xlYW5cIik7XG4gIH0sIHtcbiAgICBpZ25vcmVDYXNlOiB0cnVlLFxuICAgIHN0cmljdDogZmFsc2UsXG4gICAgdHJ1dGh5OiBbJ3RydWUnLCAndCcsICcxJywgJy0xJywgJ3llcycsICd5J10sXG4gICAgZmFsc2V5OiBbJ2ZhbHNlJywgJ2YnLCAnMCcsICdubycsICduJ10sXG4gICAgdHJpbTogZmFsc2VcbiAgfSwgJ3N0cmljdCcpO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1N0cmluZycsICdEYXRlJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgZGF0ZSwgbWF0Y2gsIG51bSwgdGltZSwgdHo7XG4gICAgaWYgKG9wdGlvbnMudHJpbSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLnN0cmljdCkge1xuICAgICAgbWF0Y2ggPSB2YWx1ZS5tYXRjaChvcHRpb25zLmZvcm1hdCk7XG4gICAgICBpZiAobWF0Y2ggPT0gbnVsbCkge1xuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gU3RyaW5nIHRvIERhdGUnKTtcbiAgICAgIH1cbiAgICAgIG51bSA9IGZ1bmN0aW9uKHZhbHVlLCBkZWYpIHtcbiAgICAgICAgaWYgKCh2YWx1ZSAhPSBudWxsKSAmJiB2YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIGRlZjtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHR6ID0gdm9pZCAwO1xuICAgICAgaWYgKChtYXRjaFs3XSAhPSBudWxsKSAmJiBtYXRjaFs3XSAhPT0gJycpIHtcbiAgICAgICAgdHogPSAobnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC50ekhvdXJzXSkgKiA2MCArIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QudHpNaW51dGVzXSkpICogNjAgKiAxMDAwO1xuICAgICAgICBpZiAobWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6U2lnbl0gPT09ICctJykge1xuICAgICAgICAgIHR6ICo9IC0xO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy51dGMgfHwgKHR6ICE9IG51bGwpKSB7XG4gICAgICAgIHRpbWUgPSBEYXRlLlVUQyhudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnllYXJdLCAwKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5tb250aF0sIDEpIC0gMSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5kYXldLCAxKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5ob3Vyc10sIDApLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1pbnV0ZXNdLCAwKSwgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5zZWNvbmRzXSwgMCkpO1xuICAgICAgICBpZiAodHogIT0gbnVsbCkge1xuICAgICAgICAgIHRpbWUgKz0gdHo7XG4gICAgICAgIH1cbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QueWVhcl0sIDApLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1vbnRoXSwgMSkgLSAxLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LmRheV0sIDEpLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LmhvdXJzXSwgMCksIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubWludXRlc10sIDApLCBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnNlY29uZHNdLCAwKSk7XG4gICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSAtIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwICogMTAwMCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChpc05hTihkYXRlLnZhbHVlT2YoKSkpIHtcbiAgICAgIHRocm93IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBTdHJpbmcgdG8gRGF0ZScpO1xuICAgIH1cbiAgICByZXR1cm4gZGF0ZTtcbiAgfSwge1xuICAgIGZvcm1hdDogL14oWzAtOV17NH0pLShbMC05XXsyfSktKFswLTldezJ9KSg/Oig/OlR8XFxzKShbMC05XXsyfSk6KFswLTldezJ9KSg/OjooWzAtOV17Mn0oPzouWzAtOV0rKT8pKT8oPzooXFwrfFxcLSkoWzAtOV17Mn0pOihbMC05XXsyfSkpPyk/JC8sXG4gICAgZm9ybWF0RGljdDoge1xuICAgICAgeWVhcjogMSxcbiAgICAgIG1vbnRoOiAyLFxuICAgICAgZGF5OiAzLFxuICAgICAgaG91cnM6IDQsXG4gICAgICBtaW51dGVzOiA1LFxuICAgICAgc2Vjb25kczogNixcbiAgICAgIHR6U2lnbjogNyxcbiAgICAgIHR6SG91cnM6IDgsXG4gICAgICB0ek1pbnV0ZXM6IDlcbiAgICB9LFxuICAgIHV0YzogZmFsc2UsXG4gICAgc3RyaWN0OiB0cnVlLFxuICAgIHRyaW06IGZhbHNlXG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1N0cmluZycsICdNb21lbnQnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xuICAgIHZhciByZXN1bHQ7XG4gICAgaWYgKG9wdGlvbnMudHJpbSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgfVxuICAgIHJlc3VsdCA9ICh0eXBlb2YgbW9tZW50ICE9PSBcInVuZGVmaW5lZFwiICYmIG1vbWVudCAhPT0gbnVsbCA/IG1vbWVudCA6IHJlcXVpcmUoJ21vbWVudCcpKSh2YWx1ZSwgb3B0aW9ucy5mb3JtYXQsIG9wdGlvbnMubGFuZ3VhZ2UsIG9wdGlvbnMuc3RyaWN0KTtcbiAgICBpZiAoIXJlc3VsdC5pc1ZhbGlkKCkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gU3RyaW5nIHRvIE1vbWVudCcpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LCB7XG4gICAgc3RyaWN0OiBmYWxzZSxcbiAgICBsYW5ndWFnZTogJ2VuJyxcbiAgICBmb3JtYXQ6ICdMJyxcbiAgICB0cmltOiBmYWxzZVxuICB9LCAnZm9ybWF0Jyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignU3RyaW5nJywgJ051bWJlci5JbnRlZ2VyJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICB2YXIgY2hhcnMsIGVycm9yLCBleCwgcmVmO1xuICAgIGlmIChvcHRpb25zLnRyaW0pIHtcbiAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5iYXNlID09PSAxMCAmJiAhb3B0aW9ucy5zdHJpY3QpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBrby50eXBlZC5nZXRDb252ZXJ0ZXIoJ1N0cmluZycsICdOdW1iZXInKSh2YWx1ZSwgMCk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBleCA9IGVycm9yO1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBcIiArIHZhbHVlICsgXCIgdG8gTnVtYmVyLkludGVnZXJcIik7XG4gICAgICB9XG4gICAgfVxuICAgIGNoYXJzID0gJzAxMjM0NTY3ODlhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XG4gICAgaWYgKCFSZWdFeHAoXCJeKFxcXFwtfFxcXFwrKT9bXCIgKyAoY2hhcnMuc2xpY2UoMCwgKHJlZiA9IG9wdGlvbnMuYmFzZSkgIT0gbnVsbCA/IHJlZiA6IDEwKSkgKyBcIl0rJFwiLCAhb3B0aW9ucy5zdHJpY3QgPyAnaScgOiB2b2lkIDApLnRlc3QodmFsdWUpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBcIiArIHZhbHVlICsgXCIgdG8gTnVtYmVyLkludGVnZXJcIik7XG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh2YWx1ZSwgb3B0aW9ucy5iYXNlKTtcbiAgfSwge1xuICAgIGJhc2U6IDEwLFxuICAgIHN0cmljdDogZmFsc2UsXG4gICAgdHJpbTogZmFsc2VcbiAgfSwgJ2Jhc2UnKTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdTdHJpbmcnLCAnTnVtYmVyJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy50cmltKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKTtcbiAgICB9XG4gICAgaWYgKCEvXihcXCt8XFwtKT9bMC05XSsoXFwuPylbMC05XSokLy50ZXN0KHZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gXCIgKyB2YWx1ZSArIFwiIHRvIE51bWJlclwiKTtcbiAgICB9XG4gICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlLCBvcHRpb25zLmJhc2UpO1xuICAgIGlmIChvcHRpb25zLmRlY2ltYWxzICE9IG51bGwpIHtcbiAgICAgIHZhbHVlID0gTWF0aC5yb3VuZDEwKHZhbHVlLCAtb3B0aW9ucy5kZWNpbWFscyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfSwge1xuICAgIGRlY2ltYWxzOiB2b2lkIDAsXG4gICAgdHJpbTogZmFsc2VcbiAgfSwgJ2RlY2ltYWxzJyk7XG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcignU3RyaW5nJywgJ1VuZGVmaW5lZCcsIGZ1bmN0aW9uKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMudHJpbSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKCk7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5sZW5ndGggIT09IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tIFwiICsgdmFsdWUgKyBcIiB0byBVbmRlZmluZWRcIik7XG4gICAgfVxuICAgIHJldHVybiB2b2lkIDA7XG4gIH0sIHtcbiAgICB0cmltOiBmYWxzZVxuICB9KTtcbiAga28udHlwZWQuYWRkQ29udmVydGVyKCdVbmRlZmluZWQnLCAnRGF0ZScsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1VuZGVmaW5lZCcsICdNb21lbnQnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiByZXF1aXJlKCdtb21lbnQnKS5pbnZhbGlkKCk7XG4gIH0pO1xuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoJ1VuZGVmaW5lZCcsICdTdHJpbmcnLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiAnJztcbiAgfSk7XG4gIHJldHVybiBrbztcbn07XG5cclxucmV0dXJuIGFwcGx5S290cjtcclxufSkpO1xyXG4iLCJhcHBseUtvdHIgPSAoa28pIC0+XHJcbiAga28udHlwZWQgPSB7fVxyXG5cclxuICBmblRydWUgPSAoKSAtPiB0cnVlXHJcbiAgZm5GYWxzZSA9ICgpIC0+IGZhbHNlXHJcbiAgZm5JZGVudGl0eSA9ICh4KSAtPiB4XHJcblxyXG4gIHR5cGVOYW1lVG9TdHJpbmcgPSAodmFsdWUpIC0+XHJcbiAgICBpZiBub3QgdmFsdWU/IG9yIHZhbHVlLmxlbmd0aCA9PSAwXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICAgIGVsc2UgaWYgaXNBbi5TdHJpbmcuTGl0ZXJhbCh2YWx1ZSlcclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICBlbHNlXHJcbiAgICAgIHJldHVybiB2YWx1ZS5qb2luKCd8JylcclxuXHJcbiAgdHlwZU5hbWVUb0FycmF5ID0gKHZhbHVlKSAtPlxyXG4gICAgdmFsdWUgPSB0eXBlTmFtZVRvU3RyaW5nKHZhbHVlKVxyXG4gICAgaWYgaXNBbi5TdHJpbmcuTGl0ZXJhbCh2YWx1ZSlcclxuICAgICAgcmV0dXJuIHZhbHVlLnNwbGl0KCd8JylcclxuICAgIGVsc2VcclxuICAgICAgcmV0dXJuIFtdXHJcblxyXG4gIHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5ID0gKHZhbHVlKSAtPlxyXG4gICAgdmFsdWUgPSB0eXBlTmFtZVRvQXJyYXkodmFsdWUpXHJcblxyXG4gICAgcmVzdWx0ID0gW11cclxuICAgIGZvciB0eXBlTmFtZSBpbiB2YWx1ZVxyXG4gICAgICBpZiByZXN1bHQuaW5kZXhPZih0eXBlTmFtZSkgPT0gLTFcclxuICAgICAgICByZXN1bHQucHVzaCh0eXBlTmFtZSlcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gIGlzVmFsaWRUeXBlTmFtZSA9ICh2YWx1ZSkgLT5cclxuICAgIHJldHVybiAvXltBLVpdLy50ZXN0KHZhbHVlKVxyXG5cclxuICBpc1R5cGVkID0gKHZhbHVlKSAtPlxyXG4gICAgcmV0dXJuIGlzQW4uRnVuY3Rpb24odmFsdWUpIGFuZCB2YWx1ZS50eXBlTmFtZT8gYW5kIHZhbHVlLnR5cGVOYW1lcz8gYW5kIHZhbHVlLnR5cGVDaGVjaz8gYW5kIHZhbHVlLnR5cGVDaGVja3M/XHJcblxyXG4gIGtvLnR5cGVkLm9wdGlvbnMgPSB7XHJcbiAgICAjIHZhbGlkYXRpb24gb3B0aW9uc1xyXG4gICAgdmFsaWRhdGlvbjoge1xyXG4gICAgICAjIHR1cm4gdmFsaWRhdGlvbiBvbi9vZmZcclxuICAgICAgZW5hYmxlOiBmYWxzZVxyXG5cclxuICAgICAgIyB2YWxpZGF0ZSBvbiByZWFkXHJcbiAgICAgIHJlYWQ6IHRydWVcclxuXHJcbiAgICAgICMgdmFsaWRhdGUgb24gd3JpdGVcclxuICAgICAgd3JpdGU6IHRydWVcclxuXHJcbiAgICAgICMgdmFsaWRhdGUgdGhlIHVuZGVybHlpbmcgb2JzZXJ2YWJsZVxyXG4gICAgICB0YXJnZXQ6IGZhbHNlXHJcblxyXG4gICAgICAjIHZhbGlkYXRlIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZVxyXG4gICAgICByZXN1bHQ6IHRydWVcclxuXHJcbiAgICAgICMgdGhlIG1lc3NhZ2UgdG8gdXNlIChkZWZhdWx0cyB0byB0aGUgbWVzc2FnZSBmcm9tIHRoZSB0aHJvd24gZXhjZXB0aW9uKVxyXG4gICAgICBtZXNzYWdlOiB1bmRlZmluZWRcclxuICAgIH1cclxuXHJcbiAgICBleFJlYWQ6IHtcclxuICAgICAgIyBDYXRjaCBleGNlcHRpb25zLiBNYXkgYWxzbyBiZSBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gZXhjZXB0aW9uIHNob3VsZCBiZSBjYXVnaHRcclxuICAgICAgY2F0Y2g6IHRydWVcclxuXHJcbiAgICAgICMgZGVmYXVsdCBjYXRjaCBmdW5jdGlvbiB0byB1c2Ugd2hlbiBjYXRjaCBpcyB0cnVlL2ZhbHNlXHJcbiAgICAgIGNhdGNoVHJ1ZTogKGV4KSAtPiBleCBpbnN0YW5jZW9mIFR5cGVFcnJvclxyXG4gICAgICBjYXRjaEZhbHNlOiBmbkZhbHNlXHJcblxyXG4gICAgICAjIERvIG5vdCB0aHJvdyBleGNlcHRpb25zIHdoZW4gcmVhZGluZy4gVXNlIGRlZmF1bHQgdmFsdWUvZnVuYyBpbnN0ZWFkXHJcbiAgICAgIHVzZURlZmF1bHQ6IGZhbHNlXHJcblxyXG4gICAgICAjIERlZmF1bHQgdmFsdWUgdG8gdXNlIHdoZW4gYW4gZXhjZXB0aW9uIGlzIGNhdWdodFxyXG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZFxyXG5cclxuICAgICAgIyBDb21wdXRlIGEgZGVmYXVsdCB2YWx1ZSB3aGVuIGFuIGV4Y2VwdGlvbiBpcyBjYXVnaHQuIE92ZXJyaWRlcyBkZWZhdWx0VmFsdWVcclxuICAgICAgZGVmYXVsdEZ1bmM6IHVuZGVmaW5lZFxyXG4gICAgfVxyXG4gICAgZXhXcml0ZToge1xyXG4gICAgICAjIENhdGNoIGV4Y2VwdGlvbnMuIE1heSBhbHNvIGJlIGEgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBleGNlcHRpb24gc2hvdWxkIGJlIGNhdWdodFxyXG4gICAgICBjYXRjaDogdHJ1ZVxyXG5cclxuICAgICAgIyBkZWZhdWx0IGNhdGNoIGZ1bmN0aW9uIHRvIHVzZSB3aGVuIGNhdGNoIGlzIHRydWUvZmFsc2VcclxuICAgICAgY2F0Y2hUcnVlOiAoZXgpIC0+IGV4IGluc3RhbmNlb2YgVHlwZUVycm9yXHJcbiAgICAgIGNhdGNoRmFsc2U6IGZuRmFsc2VcclxuXHJcbiAgICAgICMgRG8gbm90IHRocm93IGV4Y2VwdGlvbnMgd2hlbiB3cml0aW5nXHJcbiAgICAgIG5vVGhyb3c6IGZhbHNlXHJcblxyXG4gICAgICAjIERvIG5vdCBsZWF2ZSB0YXJnZXQgdW5zZXQuIFNldCB0aGUgdGFyZ2V0IHRvIHRoaXMgdmFsdWUgb24gZXJyb3JcclxuICAgICAgdXNlRGVmYXVsdDogZmFsc2VcclxuXHJcbiAgICAgICMgRGVmYXVsdCB2YWx1ZSB0byB1c2Ugd2hlbiBhbiBleGNlcHRpb24gaXMgY2F1Z2h0XHJcbiAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkXHJcblxyXG4gICAgICAjIENvbXB1dGUgYSBkZWZhdWx0IHZhbHVlIHdoZW4gYW4gZXhjZXB0aW9uIGlzIGNhdWdodC4gT3ZlcnJpZGVzIGRlZmF1bHRWYWx1ZVxyXG4gICAgICBkZWZhdWx0RnVuYzogdW5kZWZpbmVkXHJcbiAgICB9XHJcblxyXG4gICAgIyB1c2UgcHVyZSBjb21wdXRlZCBvYnNlcnZhYmxlc1xyXG4gICAgcHVyZTogdHJ1ZVxyXG5cclxuICAgICMgZG8gbm90IGF0dGVtcHQgdG8gcmVhZCB0aGUgdmFsdWUgaW1tZWRpYXRlbHlcclxuICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZVxyXG4gIH1cclxuXHJcbiAgZXh0ZW5kID0gKHJvb3QsIG9iamVjdHMuLi4pIC0+XHJcbiAgICBmb3Igb2JqZWN0IGluIG9iamVjdHNcclxuICAgICAgcm9vdCA9IGtvLnV0aWxzLmV4dGVuZChyb290LCBvYmplY3QpXHJcbiAgICByZXR1cm4gcm9vdFxyXG5cclxuICBub3JtYWxpemVFeCA9IChuYW1lLCByb290LCBvYmplY3RzLi4uKSAtPlxyXG4gICAgcm9vdFtuYW1lXSA9IG9wdCA9IGV4dGVuZCh7fSwgKG9iamVjdD9bbmFtZV0gZm9yIG93biBrZXksIG9iamVjdCBvZiBvYmplY3RzKS4uLilcclxuXHJcbiAgICAjIGZvcmNlIGNhdGNoIHRvIGJlIGEgZnVuY3Rpb25cclxuICAgIGlmIG9wdC5jYXRjaCA9PSB0cnVlXHJcbiAgICAgIG9wdC5jYXRjaCA9IG9wdC5jYXRjaFRydWVcclxuICAgIGVsc2UgaWYgb3B0LmNhdGNoID09IGZhbHNlXHJcbiAgICAgIG9wdC5jYXRjaCA9IG9wdC5jYXRjaEZhbHNlXHJcblxyXG4gICAgIyBmb3JjZSBkZWZhdWx0RnVuY1xyXG4gICAgaWYgb3B0LnVzZURlZmF1bHQgYW5kIG5vdCBvcHQuZGVmYXVsdEZ1bmM/XHJcbiAgICAgIG9wdC5kZWZhdWx0RnVuYyA9ICgpIC0+IG9wdC5kZWZhdWx0VmFsdWVcclxuXHJcbiAgICByZXR1cm4gb3B0XHJcblxyXG4gIG5vcm1hbGl6ZUV4UmVhZCA9IChyb290LCBvYmplY3RzLi4uKSAtPlxyXG4gICAgbm9ybWFsaXplRXgoJ2V4UmVhZCcsIHJvb3QsIG9iamVjdHMuLi4pXHJcblxyXG4gIG5vcm1hbGl6ZUV4V3JpdGUgPSAocm9vdCwgb2JqZWN0cy4uLikgLT5cclxuICAgIG5vcm1hbGl6ZUV4KCdleFdyaXRlJywgcm9vdCwgb2JqZWN0cy4uLilcclxuXHJcbiAgbm9ybWFsaXplVmFsaWRhdGlvbiA9IChyb290LCBvYmplY3RzLi4uKSAtPlxyXG4gICAgbm9ybSA9ICh2KSAtPlxyXG4gICAgICBpZiB2ID09IHRydWVcclxuICAgICAgICByZXR1cm4geyBlbmFibGU6IHRydWUgfVxyXG4gICAgICBlbHNlIGlmIHYgPT0gZmFsc2VcclxuICAgICAgICByZXR1cm4geyBlbmFibGU6IGZhbHNlIH1cclxuICAgICAgZWxzZVxyXG4gICAgICAgIHJldHVybiB2XHJcblxyXG4gICAgcm9vdFsndmFsaWRhdGlvbiddID0gb3B0ID0gZXh0ZW5kKHt9LCAobm9ybShvYmplY3Q/Wyd2YWxpZGF0aW9uJ10pIGZvciBvd24ga2V5LCBvYmplY3Qgb2Ygb2JqZWN0cykuLi4pXHJcblxyXG4gICAgcmV0dXJuIG9wdFxyXG5cclxuICB3cmFwUmVhZCA9IChvcHRpb25zLCB0YXJnZXQsIHJlYWRFcnJvciwgcmVhZCkgLT5cclxuICAgIHJldHVybiAoKSAtPlxyXG4gICAgICB0cnlcclxuICAgICAgICByZXR1cm4gcmVhZCgpXHJcbiAgICAgIGNhdGNoIGV4XHJcbiAgICAgICAgaWYgb3B0aW9ucy5leFJlYWQuY2F0Y2goZXgpXHJcbiAgICAgICAgICByZWFkRXJyb3IoZXgpXHJcblxyXG4gICAgICAgICAgaWYgb3B0aW9ucy5leFJlYWQudXNlRGVmYXVsdFxyXG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5leFJlYWQuZGVmYXVsdEZ1bmMoKVxyXG5cclxuICAgICAgICB0aHJvdyBleFxyXG4gICAgICBmaW5hbGx5XHJcbiAgICAgICAgaWYgbm90IGV4P1xyXG4gICAgICAgICAgcmVhZEVycm9yKHVuZGVmaW5lZClcclxuXHJcbiAgd3JhcFdyaXRlID0gKG9wdGlvbnMsIHRhcmdldCwgd3JpdGVFcnJvciwgd3JpdGUpIC0+XHJcbiAgICByZXR1cm4gKHZhbHVlKSAtPlxyXG4gICAgICB0cnlcclxuICAgICAgICB3cml0ZSh2YWx1ZSlcclxuICAgICAgY2F0Y2ggZXhcclxuICAgICAgICBpZiBvcHRpb25zLmV4V3JpdGUuY2F0Y2goZXgpXHJcbiAgICAgICAgICB3cml0ZUVycm9yKGV4KVxyXG5cclxuICAgICAgICAgIGlmIG9wdGlvbnMuZXhXcml0ZS51c2VEZWZhdWx0XHJcbiAgICAgICAgICAgIHRhcmdldChvcHRpb25zLmV4V3JpdGUuZGVmYXVsdEZ1bmMoKSlcclxuXHJcbiAgICAgICAgaWYgbm90IG9wdGlvbnMuZXhXcml0ZS5ub1Rocm93XHJcbiAgICAgICAgICB0aHJvdyBleFxyXG4gICAgICBmaW5hbGx5XHJcbiAgICAgICAgaWYgbm90IGV4P1xyXG4gICAgICAgICAgd3JpdGVFcnJvcih1bmRlZmluZWQpXHJcblxyXG4gIHZhbGlkYXRlID0gKHRhcmdldCwgcmVzdWx0LCBvcHRpb25zKSAtPlxyXG4gICAgaWYgbm90IG9wdGlvbnMudmFsaWRhdGlvbi5lbmFibGVcclxuICAgICAgcmV0dXJuXHJcblxyXG4gICAgdmFsaWRhdGlvbiA9IG9wdGlvbnMudmFsaWRhdGlvblxyXG5cclxuICAgIGlmIChub3QgdmFsaWRhdGlvbi50YXJnZXQgYW5kIG5vdCB2YWxpZGF0aW9uLnJlc3VsdCkgb3IgKG5vdCB2YWxpZGF0aW9uLnJlYWQgYW5kIG5vdCB2YWxpZGF0aW9uLndyaXRlKVxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBpZiBrby52YWxpZGF0aW9uP1xyXG4gICAgICAjIyNcclxuICAgICAgTm90ZSB0aGF0IHVzaW5nIGtvIHZhbGlkYXRpb24gd2lsbCBmb3JjZSBhbiBpbW1lZGlhdGUgZXZhbHVhdGlvbiBvZiB0aGUgdGFyZ2V0dGVkIG9ic2VydmFibGVzXHJcbiAgICAgICMjI1xyXG4gICAgICBpZiBvcHRpb25zLnZhbGlkYXRpb24ucmVhZCBhbmQgb3B0aW9ucy52YWxpZGF0aW9uLndyaXRlXHJcbiAgICAgICAgbWVzc2FnZSA9ICgpIC0+IHJlc3VsdC53cml0ZUVycm9yKCk/Lm1lc3NhZ2UgPyByZXN1bHQucmVhZEVycm9yKCk/Lm1lc3NhZ2VcclxuICAgICAgZWxzZSBpZiBvcHRpb25zLnZhbGlkYXRpb24ucmVhZFxyXG4gICAgICAgIG1lc3NhZ2UgPSAoKSAtPiByZXN1bHQucmVhZEVycm9yKCk/Lm1lc3NhZ2VcclxuICAgICAgZWxzZSAjaWYgb3B0aW9ucy52YWxpZGF0aW9uLndyaXRlXHJcbiAgICAgICAgbWVzc2FnZSA9ICgpIC0+IHJlc3VsdC53cml0ZUVycm9yKCk/Lm1lc3NhZ2VcclxuXHJcbiAgICAgIGFwcGx5VmFsaWRhdGlvbiA9IChiYXNlKSAtPlxyXG4gICAgICAgIGJhc2UuZXh0ZW5kKHsgdmFsaWRhdGFibGU6IHsgZW5hYmxlOiB0cnVlIH0gfSlcclxuXHJcbiAgICAgICAgcnVsZSA9IHtcclxuICAgICAgICAgIG1lc3NhZ2U6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgdmFsaWRhdG9yOiAoKSAtPlxyXG4gICAgICAgICAgICBtID0gbWVzc2FnZSgpXHJcbiAgICAgICAgICAgIGlmIG5vdCBtP1xyXG4gICAgICAgICAgICAgIHJ1bGUubWVzc2FnZSA9IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICBydWxlLm1lc3NhZ2UgPSB2YWxpZGF0aW9uLm1lc3NhZ2UgPyBtXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBrby52YWxpZGF0aW9uLmFkZEFub255bW91c1J1bGUoYmFzZSwgcnVsZSlcclxuXHJcbiAgICAgICAgcmV0dXJuXHJcblxyXG4gICAgICBpZiB2YWxpZGF0aW9uLnRhcmdldFxyXG4gICAgICAgIGFwcGx5VmFsaWRhdGlvbih0YXJnZXQpXHJcblxyXG4gICAgICBpZiB2YWxpZGF0aW9uLnJlc3VsdFxyXG4gICAgICAgIGFwcGx5VmFsaWRhdGlvbihyZXN1bHQpXHJcblxyXG4gICAgcmV0dXJuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAga28uZXh0ZW5kZXJzLnR5cGUgPSAodGFyZ2V0LCBvcHRpb25zKSAtPlxyXG4gICAgIyBSZXF1aXJlc1xyXG4gICAgIyB0eXBlTmFtZSA6IFN0cmluZ1xyXG4gICAgIyB0eXBlTmFtZXMgOiBBcnJheSBvZiBTdHJpbmdcclxuICAgICMgdHlwZUNoZWNrIDogZnVuY3Rpb24gKHZhbHVlKSB7IC4uLiB9XHJcbiAgICAjIHR5cGVDaGVja3MgOiB7IHR5cGVOYW1lOiBmdW5jdGlvbiBpc1R5cGUodmFsdWUpIHsgLi4uIH0sIC4uLiB9XHJcblxyXG4gICAgaWYgaXNBbi5TdHJpbmcuTGl0ZXJhbChvcHRpb25zKSBvciBpc0FuLkFycmF5KG9wdGlvbnMpXHJcbiAgICAgICMgLmV4dGVuZCh7IHR5cGU6ICdUeXBlTmFtZXxUeXBlTmFtZXxUeXBlTmFtZScgfSlcclxuICAgICAgIyAuZXh0ZW5kKHsgdHlwZTogWydUeXBlTmFtZScsJ1R5cGVOYW1lJywuLi5dIH0pXHJcbiAgICAgIG9wdGlvbnMgPSB7IHR5cGU6IG9wdGlvbnMgfVxyXG4gICAgZWxzZSBpZiBpc0FuLkZ1bmN0aW9uKG9wdGlvbnMpXHJcbiAgICAgICMgLmV4dGVuZCh7IHR5cGU6IGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdHJ1ZXxmYWxzZTsgfSB9KVxyXG4gICAgICBvcHRpb25zID0ge1xyXG4gICAgICAgIHR5cGU6IG9wdGlvbnMudHlwZU5hbWVcclxuICAgICAgICBjaGVjazogb3B0aW9uc1xyXG4gICAgICB9XHJcblxyXG4gICAgbm9ybWFsID0gZXh0ZW5kKHt9LCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgbm9ybWFsaXplRXhSZWFkKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucywgb3B0aW9ucylcclxuICAgIG5vcm1hbGl6ZUV4V3JpdGUobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMudHlwZS5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgbm9ybWFsaXplVmFsaWRhdGlvbihub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy50eXBlLm9wdGlvbnMsIG9wdGlvbnMpXHJcbiAgICBvcHRpb25zID0gbm9ybWFsXHJcblxyXG4gICAgIyBHYXRoZXIgdHlwZSBuYW1lc1xyXG4gICAgdHlwZU5hbWVzID0gdHlwZU5hbWVUb0FycmF5KG9wdGlvbnMudHlwZSlcclxuICAgIHR5cGVOYW1lcy5wdXNoKChuYW1lIGZvciBvd24gbmFtZSBvZiBvcHRpb25zIHdoZW4gaXNWYWxpZFR5cGVOYW1lKG5hbWUpKS4uLilcclxuICAgIHR5cGVOYW1lcyA9IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KHR5cGVOYW1lcylcclxuICAgIHR5cGVOYW1lID0gdHlwZU5hbWVUb1N0cmluZyh0eXBlTmFtZXMpXHJcblxyXG4gICAgIyBzaW1wbGUgY2hlY2tzXHJcbiAgICB0eXBlQ2hlY2tzU2ltcGxlID0ge31cclxuICAgIGRvIC0+XHJcbiAgICAgIGZvciBuYW1lIGluIHR5cGVOYW1lc1xyXG4gICAgICAgIHR5cGVDaGVja3NTaW1wbGVbbmFtZV0gPSBvcHRpb25zW25hbWVdID8gaXNBbihuYW1lLCB7IHJldHVybkNoZWNrZXI6IHRydWUgfSlcclxuXHJcbiAgICAjIHNpbXBsZSBjaGVja1xyXG4gICAgdHlwZUNoZWNrU2ltcGxlID0gb3B0aW9ucy5jaGVjayA/ICgoKSAtPiB0cnVlKVxyXG5cclxuICAgICMgY2hlY2tzXHJcbiAgICB0eXBlQ2hlY2tzID0ge31cclxuICAgIGRvIC0+XHJcbiAgICAgIGZvciBuYW1lLCBjaGVjayBvZiB0eXBlQ2hlY2tzU2ltcGxlXHJcbiAgICAgICAgZG8gKGNoZWNrKSAtPlxyXG4gICAgICAgICAgdHlwZUNoZWNrc1tuYW1lXSA9ICh2YWx1ZSkgLT5cclxuICAgICAgICAgICAgY2hlY2sodmFsdWUpIGFuZCB0eXBlQ2hlY2tTaW1wbGUodmFsdWUpXHJcblxyXG4gICAgIyBjaGVja1xyXG4gICAgdHlwZUNoZWNrID0gZG8gLT5cclxuICAgICAgcmV0dXJuICh2YWx1ZSkgLT5cclxuICAgICAgICB0eXBlQ2hlY2tTaW1wbGUodmFsdWUpIGFuZCAoKHR5cGVOYW1lcy5sZW5ndGggPT0gMCkgb3IgKHR5cGVOYW1lcy5zb21lKChuYW1lKSAtPiB0eXBlQ2hlY2tzU2ltcGxlW25hbWVdKHZhbHVlKSkpKVxyXG5cclxuICAgIHJlYWRFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG4gICAgd3JpdGVFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG5cclxuICAgIHJlc3VsdCA9IGtvLmNvbXB1dGVkKHtcclxuICAgICAgcHVyZTogb3B0aW9ucy5wdXJlXHJcbiAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZVxyXG5cclxuICAgICAgcmVhZDogd3JhcFJlYWQoXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgcmVhZEVycm9yLFxyXG4gICAgICAgICgpIC0+XHJcbiAgICAgICAgICBpbnRlcm5hbFZhbHVlID0gdGFyZ2V0KClcclxuXHJcbiAgICAgICAgICBpZiBub3QgdHlwZUNoZWNrKGludGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmV4cGVjdGVkIGludGVybmFsIHR5cGUuIEV4cGVjdGVkICN7dHlwZU5hbWV9LCBnb3QgI3tpc0FuKGludGVybmFsVmFsdWUpfVwiKVxyXG5cclxuICAgICAgICAgIHJldHVybiBpbnRlcm5hbFZhbHVlXHJcbiAgICAgIClcclxuICAgICAgd3JpdGU6IHdyYXBXcml0ZShcclxuICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgIHRhcmdldCxcclxuICAgICAgICB3cml0ZUVycm9yLFxyXG4gICAgICAgIChleHRlcm5hbFZhbHVlKSAtPlxyXG4gICAgICAgICAgaWYgdHlwZUNoZWNrKGV4dGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgIHRhcmdldChleHRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5leHBlY3RlZCBleHRlcm5hbCB0eXBlLiBFeHBlY3RlZCAje3R5cGVOYW1lfSwgcmVjZWl2ZWQgI3tpc0FuKGV4dGVybmFsVmFsdWUpfVwiKVxyXG5cclxuICAgICAgICAgIHJldHVyblxyXG4gICAgICApXHJcbiAgICB9KVxyXG5cclxuICAgIHJlc3VsdC50eXBlTmFtZSA9IHR5cGVOYW1lXHJcbiAgICByZXN1bHQudHlwZU5hbWVzID0gdHlwZU5hbWVzXHJcbiAgICByZXN1bHQudHlwZUNoZWNrID0gdHlwZUNoZWNrXHJcbiAgICByZXN1bHQudHlwZUNoZWNrcyA9IHR5cGVDaGVja3NcclxuXHJcbiAgICByZXN1bHQucmVhZEVycm9yID0gcmVhZEVycm9yXHJcbiAgICByZXN1bHQud3JpdGVFcnJvciA9IHdyaXRlRXJyb3JcclxuXHJcbiAgICB2YWxpZGF0ZSh0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucylcclxuXHJcbiAgICBpZiBub3Qgb3B0aW9ucy5kZWZlckV2YWx1YXRpb25cclxuICAgICAgdHJ5XHJcbiAgICAgICAgcmVzdWx0LnBlZWsoKVxyXG4gICAgICBjYXRjaCBleFxyXG4gICAgICAgIHJlc3VsdC5kaXNwb3NlKClcclxuICAgICAgICB0aHJvdyBleFxyXG5cclxuICAgIHJldHVybiByZXN1bHRcclxuXHJcbiAga28uZXh0ZW5kZXJzLnR5cGUub3B0aW9ucyA9IHtcclxuICB9XHJcblxyXG5cclxuICBrby5leHRlbmRlcnMuY29udmVydCA9ICh0YXJnZXQsIG9wdGlvbnMpIC0+XHJcbiAgICBpZiBvcHRpb25zID09IGZhbHNlXHJcbiAgICAgIHJldHVybiB0YXJnZXRcclxuXHJcbiAgICAjIG5vcm1hbGl6ZSBvcHRpb25zXHJcbiAgICBkbyAtPlxyXG4gICAgICBpZiBpc0FuLlN0cmluZyhvcHRpb25zKSBvciBpc0FuLkFycmF5KG9wdGlvbnMpXHJcbiAgICAgICAgb3B0aW9ucyA9IHsgdHlwZTogb3B0aW9ucyB9XHJcbiAgICAgIGVsc2UgaWYgb3B0aW9ucyA9PSB0cnVlXHJcbiAgICAgICAgb3B0aW9ucyA9IHt9XHJcblxyXG4gICAgICAjIG1lcmdlIG9wdGlvbnNcclxuICAgICAgb3B0aW9ucyA9IGV4dGVuZCh7fSwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucylcclxuXHJcbiAgICAgIG5vcm1hbCA9IHtcclxuICAgICAgICBjaGVja1NlbGY6IG9wdGlvbnMuY2hlY2sgPyBmblRydWVcclxuICAgICAgICByZWFkOiBvcHRpb25zLnJlYWRcclxuICAgICAgICB3cml0ZTogb3B0aW9ucy53cml0ZVxyXG4gICAgICAgIGNoZWNrczoge31cclxuICAgICAgICBjaGVja2VyczogW11cclxuICAgICAgICBpc1R5cGVkOiBpc1R5cGVkKHRhcmdldClcclxuICAgICAgICBpZ25vcmVEZWZhdWx0Q29udmVydGVyczogb3B0aW9ucy5pZ25vcmVEZWZhdWx0Q29udmVydGVyc1xyXG4gICAgICAgIHB1cmU6IG9wdGlvbnMucHVyZVxyXG4gICAgICAgIGRlZmVyRXZhbHVhdGlvbjogb3B0aW9ucy5kZWZlckV2YWx1YXRpb25cclxuICAgICAgICB0eXBlczogdHlwZU5hbWVUb0Rpc3RpbmN0QXJyYXkob3B0aW9ucy50eXBlKVxyXG4gICAgICB9XHJcblxyXG4gICAgICBub3JtYWxpemVFeFJlYWQobm9ybWFsLCBrby50eXBlZC5vcHRpb25zLCBrby5leHRlbmRlcnMuY29udmVydC5vcHRpb25zLCBvcHRpb25zKVxyXG4gICAgICBub3JtYWxpemVFeFdyaXRlKG5vcm1hbCwga28udHlwZWQub3B0aW9ucywga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucywgb3B0aW9ucylcclxuICAgICAgbm9ybWFsaXplVmFsaWRhdGlvbihub3JtYWwsIGtvLnR5cGVkLm9wdGlvbnMsIGtvLmV4dGVuZGVycy5jb252ZXJ0Lm9wdGlvbnMsIG9wdGlvbnMpXHJcblxyXG4gICAgICAjIEV4cGFuZCBlYWNoIEV4dGVybmFsIFR5cGVcclxuICAgICAgZm9yIG93biBleHRUeXBlTmFtZSwgZXh0VHlwZU9wdGlvbnMgb2Ygb3B0aW9uc1xyXG4gICAgICAgIGlmIG5vdCBpc1ZhbGlkVHlwZU5hbWUoZXh0VHlwZU5hbWUpXHJcbiAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICBleHRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgbm9ybWFsW2V4dFR5cGVOYW1lXSA9IHtcclxuICAgICAgICAgIGNoZWNrU2VsZjogZXh0VHlwZU9wdGlvbnMuY2hlY2tcclxuICAgICAgICAgIHJlYWQ6IGV4dFR5cGVPcHRpb25zLnJlYWRcclxuICAgICAgICAgIHdyaXRlOiBleHRUeXBlT3B0aW9ucy53cml0ZVxyXG4gICAgICAgICAgdHlwZXM6IHR5cGVOYW1lVG9EaXN0aW5jdEFycmF5KGV4dFR5cGVPcHRpb25zLnR5cGUpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAjIEV4cGFuZCBhbGwgaW50ZXJuYWwgdHlwZXNcclxuICAgICAgICBmb3Igb3duIGludFR5cGVOYW1lIG9mIGV4dFR5cGVPcHRpb25zXHJcbiAgICAgICAgICBpZiBub3QgaXNWYWxpZFR5cGVOYW1lKGludFR5cGVOYW1lKVxyXG4gICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgIGludFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV0/W2ludFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgbm9ybWFsW2V4dFR5cGVOYW1lXVtpbnRUeXBlTmFtZV0gPSB7XHJcbiAgICAgICAgICAgIHJlYWQ6IGludFR5cGVPcHRpb25zLnJlYWRcclxuICAgICAgICAgICAgd3JpdGU6IGludFR5cGVPcHRpb25zLndyaXRlXHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICBub3JtYWwudHlwZSA9IHR5cGVOYW1lVG9TdHJpbmcobm9ybWFsLnR5cGVzKVxyXG5cclxuICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIG5vcm1hbC50eXBlc1xyXG4gICAgICAgIGNoZWNrZXIgPSBub3JtYWxbZXh0VHlwZU5hbWVdPy5jaGVja1NlbGYgPyBpc0FuKGV4dFR5cGVOYW1lLCB7IHJldHVybkNoZWNrZXI6IHRydWUgfSkgPyBmblRydWVcclxuICAgICAgICBub3JtYWwuY2hlY2tzW2V4dFR5cGVOYW1lXSA9IGRvIChjaGVja2VyKSAtPlxyXG4gICAgICAgICAgKHZhbHVlKSAtPiBub3JtYWwuY2hlY2tTZWxmKHZhbHVlKSBhbmQgY2hlY2tlcih2YWx1ZSlcclxuICAgICAgICBub3JtYWwuY2hlY2tlcnMucHVzaChub3JtYWwuY2hlY2tzW2V4dFR5cGVOYW1lXSlcclxuXHJcbiAgICAgIG5vcm1hbC5jaGVjayA9ICh2YWx1ZSkgLT5cclxuICAgICAgICBub3JtYWwuY2hlY2tTZWxmKHZhbHVlKSBhbmQgKChub3JtYWwuY2hlY2tlcnMubGVuZ3RoID09IDApIG9yIG5vcm1hbC5jaGVja2Vycy5zb21lKChjaGVja2VyKSAtPiBjaGVja2VyKHZhbHVlKSkpXHJcblxyXG4gICAgICBvcHRpb25zID0gbm9ybWFsXHJcblxyXG5cclxuICAgIHJlYWRFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG4gICAgd3JpdGVFcnJvciA9IGtvLm9ic2VydmFibGUoKVxyXG5cclxuICAgIHJlc3VsdCA9IGtvLmNvbXB1dGVkKHtcclxuICAgICAgcHVyZTogb3B0aW9ucy5wdXJlXHJcbiAgICAgIGRlZmVyRXZhbHVhdGlvbjogdHJ1ZVxyXG5cclxuICAgICAgcmVhZDogd3JhcFJlYWQoXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgcmVhZEVycm9yLFxyXG4gICAgICAgICgpIC0+XHJcbiAgICAgICAgICBpbnRlcm5hbFZhbHVlID0gdGFyZ2V0KClcclxuICAgICAgICAgIGV4dGVybmFsVmFsdWUgPSB1bmRlZmluZWRcclxuXHJcbiAgICAgICAgICAjIFRyeSBleGFjdCBpbnRlcm5hbCB0eXBlIG1hdGNoXHJcbiAgICAgICAgICB0cnlSZWFkID0gKHJlYWQsIHJlYWRPcHRpb25zKSAtPlxyXG4gICAgICAgICAgICBpZiByZWFkP1xyXG4gICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxWYWx1ZSA9IHJlYWQoaW50ZXJuYWxWYWx1ZSwgcmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgY2F0Y2ggZXhcclxuICAgICAgICAgICAgICAgIGlmIGV4IG5vdCBpbnN0YW5jZW9mIFR5cGVFcnJvclxyXG4gICAgICAgICAgICAgICAgICB0aHJvdyBleFxyXG5cclxuICAgICAgICAgICAgICBpZiBub3QgZXg/XHJcbiAgICAgICAgICAgICAgICBpZiBvcHRpb25zLmNoZWNrKGV4dGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgICAgICAgICBleHRUeXBlTmFtZXMgPSBvcHRpb25zLnR5cGVzXHJcbiAgICAgICAgICBpZiBleHRUeXBlTmFtZXMubGVuZ3RoID09IDBcclxuICAgICAgICAgICAgZXh0VHlwZU5hbWVzID0gW2lzQW4oaW50ZXJuYWxWYWx1ZSldXHJcblxyXG4gICAgICAgICAgIyBMb29rIGZvciBzcGVjaWZpYyBjb252ZXJzaW9uXHJcbiAgICAgICAgICBmb3IgZXh0VHlwZU5hbWUgaW4gZXh0VHlwZU5hbWVzXHJcbiAgICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV0gPyB7fVxyXG5cclxuICAgICAgICAgICAgIyBpbnRlcm5hbCB0eXBlc1xyXG4gICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBleHRUeXBlT3B0aW9ucy50eXBlcyA/IFtdXHJcbiAgICAgICAgICAgIGlmIGludFR5cGVOYW1lcy5sZW5ndGggPT0gMFxyXG4gICAgICAgICAgICAgIGlmIG9wdGlvbnMuaXNUeXBlZFxyXG4gICAgICAgICAgICAgICAgIyBnbyBieSB0YXJnZXQgb3JkZXJcclxuICAgICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IHRhcmdldC50eXBlTmFtZXNcclxuICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAjIGdvIGJ5IGluZmVycmVkIG9yZGVyXHJcbiAgICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBbaXNBbihpbnRlcm5hbFZhbHVlKV1cclxuXHJcbiAgICAgICAgICAgIGZvciBpbnRUeXBlTmFtZSBpbiBpbnRUeXBlTmFtZXNcclxuICAgICAgICAgICAgICAjIGNoZWNrIGludGVybmFsIHR5cGVcclxuICAgICAgICAgICAgICBpZiBvcHRpb25zLmlzVHlwZWQgYW5kIG5vdCB0YXJnZXQudHlwZUNoZWNrc1tpbnRUeXBlTmFtZV0/KGludGVybmFsVmFsdWUpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAjIGdldCB0aGUgb3B0aW9uc1xyXG4gICAgICAgICAgICAgIGludFR5cGVPcHRpb25zID0gZXh0VHlwZU9wdGlvbnNbaW50VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgICAgICAgIyB0cnkgY3VzdG9tIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICBpZiBpbnRUeXBlT3B0aW9ucy5yZWFkP1xyXG4gICAgICAgICAgICAgICAgaWYgdHJ5UmVhZChpbnRUeXBlT3B0aW9ucy5yZWFkLCBpbnRUeXBlT3B0aW9ucy5yZWFkT3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWVcclxuICAgICAgICAgICAgICAjIHRyeSBubyBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgICAgZWxzZSBpZiBpbnRUeXBlTmFtZSA9PSBleHRUeXBlTmFtZVxyXG4gICAgICAgICAgICAgICAgaWYgbm90IGV4dFR5cGVPcHRpb25zLnJlYWQ/IGFuZCBub3Qgb3B0aW9ucy5yZWFkPyBhbmQgdHJ5UmVhZChmbklkZW50aXR5KVxyXG4gICAgICAgICAgICAgICAgICByZXR1cm4gZXh0ZXJuYWxWYWx1ZVxyXG4gICAgICAgICAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnNcclxuICAgICAgICAgICAgICAgICMgdHJ5IGRlZmF1bHQgY29udmVyc2lvblxyXG4gICAgICAgICAgICAgICAgaWYgdHJ5UmVhZChrby50eXBlZC5nZXRDb252ZXJ0ZXIoaW50VHlwZU5hbWUsIGV4dFR5cGVOYW1lKSwgaW50VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlXHJcblxyXG4gICAgICAgICAgIyBMb29rIGZvciBvbmUtc2lkZWQgY29udmVyc2lvblxyXG4gICAgICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIGV4dFR5cGVOYW1lc1xyXG4gICAgICAgICAgICBleHRUeXBlT3B0aW9ucyA9IG9wdGlvbnNbZXh0VHlwZU5hbWVdID8ge31cclxuXHJcbiAgICAgICAgICAgICMgdHJ5IGN1c3RvbSBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgIGlmIHRyeVJlYWQoZXh0VHlwZU9wdGlvbnMucmVhZCwgZXh0VHlwZU9wdGlvbnMucmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgcmV0dXJuIGV4dGVybmFsVmFsdWVcclxuXHJcbiAgICAgICAgICAjIExvb2sgZm9yIGdlbmVyaWMgY29udmVyc2lvblxyXG4gICAgICAgICAgaWYgdHJ5UmVhZChvcHRpb25zLnJlYWQsIG9wdGlvbnMucmVhZE9wdGlvbnMpXHJcbiAgICAgICAgICAgIHJldHVybiBleHRlcm5hbFZhbHVlXHJcblxyXG4gICAgICAgICAgaWYgb3B0aW9ucy50eXBlP1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBpbnRlcm5hbCB0eXBlICN7aXNBbihpbnRlcm5hbFZhbHVlKX0gdG8gZXh0ZXJuYWwgdHlwZSAje29wdGlvbnMudHlwZX1cIilcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gaW50ZXJuYWwgdHlwZSAje2lzQW4oaW50ZXJuYWxWYWx1ZSl9XCIpXHJcbiAgICAgIClcclxuXHJcbiAgICAgIHdyaXRlOiB3cmFwV3JpdGUoXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICB0YXJnZXQsXHJcbiAgICAgICAgd3JpdGVFcnJvcixcclxuICAgICAgICAoZXh0ZXJuYWxWYWx1ZSkgLT5cclxuICAgICAgICAgIHRyeVdyaXRlID0gKHdyaXRlLCB3cml0ZU9wdGlvbnMpIC0+XHJcbiAgICAgICAgICAgIGlmIHdyaXRlP1xyXG4gICAgICAgICAgICAgIHRyeVxyXG4gICAgICAgICAgICAgICAgaW50ZXJuYWxWYWx1ZSA9IHdyaXRlKGV4dGVybmFsVmFsdWUsIHdyaXRlT3B0aW9ucylcclxuICAgICAgICAgICAgICBjYXRjaCBleFxyXG4gICAgICAgICAgICAgICAgaWYgZXggbm90IGluc3RhbmNlb2YgVHlwZUVycm9yXHJcbiAgICAgICAgICAgICAgICAgIHRocm93IGV4XHJcblxyXG4gICAgICAgICAgICAgIGlmIG5vdCBleD9cclxuICAgICAgICAgICAgICAgIHRhcmdldChpbnRlcm5hbFZhbHVlKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWVcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG5cclxuICAgICAgICAgIGlmIG5vdCBvcHRpb25zLmNoZWNrU2VsZj8gb3Igb3B0aW9ucy5jaGVja1NlbGYoZXh0ZXJuYWxWYWx1ZSlcclxuICAgICAgICAgICAgZXh0VHlwZU5hbWVzID0gb3B0aW9ucy50eXBlc1xyXG4gICAgICAgICAgICBpZiBleHRUeXBlTmFtZXMubGVuZ3RoID09IDBcclxuICAgICAgICAgICAgICBleHRUeXBlTmFtZXMgPSBbaXNBbihleHRlcm5hbFZhbHVlKV1cclxuXHJcbiAgICAgICAgICAgICMgTG9vayBmb3Igc3BlY2lmaWMgY29udmVyc2lvblxyXG4gICAgICAgICAgICBmb3IgZXh0VHlwZU5hbWUgaW4gZXh0VHlwZU5hbWVzXHJcbiAgICAgICAgICAgICAgZXh0VHlwZU9wdGlvbnMgPSBvcHRpb25zW2V4dFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgICAgIGlmIChleHRUeXBlT3B0aW9ucy5jaGVja1NlbGY/IGFuZCBub3QgZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmKGV4dGVybmFsVmFsdWUpKSBvciAobm90IGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZj8gYW5kIG5vdCBpc0FuKGV4dGVybmFsVmFsdWUsIGV4dFR5cGVOYW1lKSlcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcblxyXG4gICAgICAgICAgICAgICMgaW50ZXJuYWwgdHlwZXNcclxuICAgICAgICAgICAgICBpbnRUeXBlTmFtZXMgPSBleHRUeXBlT3B0aW9ucy50eXBlcyA/IFtdXHJcbiAgICAgICAgICAgICAgaWYgaW50VHlwZU5hbWVzLmxlbmd0aCA9PSAwXHJcbiAgICAgICAgICAgICAgICBpZiBvcHRpb25zLmlzVHlwZWRcclxuICAgICAgICAgICAgICAgICAgIyBnbyBieSB0YXJnZXQgb3JkZXJcclxuICAgICAgICAgICAgICAgICAgaW50VHlwZU5hbWVzID0gdGFyZ2V0LnR5cGVOYW1lc1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAjIGdvIGJ5IGluZmVycmVkIG9yZGVyXHJcbiAgICAgICAgICAgICAgICAgIGludFR5cGVOYW1lcyA9IFtpc0FuKGV4dGVybmFsVmFsdWUpXVxyXG5cclxuICAgICAgICAgICAgICBmb3IgaW50VHlwZU5hbWUgaW4gaW50VHlwZU5hbWVzXHJcbiAgICAgICAgICAgICAgICBpbnRUeXBlT3B0aW9ucyA9IGV4dFR5cGVPcHRpb25zW2ludFR5cGVOYW1lXSA/IHt9XHJcblxyXG4gICAgICAgICAgICAgICAgIyB0cnkgY3VzdG9tIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgIGlmIGludFR5cGVPcHRpb25zLndyaXRlP1xyXG4gICAgICAgICAgICAgICAgICBpZiB0cnlXcml0ZShpbnRUeXBlT3B0aW9ucy53cml0ZSwgaW50VHlwZU9wdGlvbnMud3JpdGVPcHRpb25zKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgICAgICAgICAgIyB0cnkgbm8gY29udmVyc2lvblxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiBleHRUeXBlTmFtZSA9PSBpbnRUeXBlTmFtZVxyXG4gICAgICAgICAgICAgICAgICBpZiBub3QgZXh0VHlwZU9wdGlvbnMud3JpdGU/IGFuZCBub3Qgb3B0aW9ucy53cml0ZT8gYW5kIChub3Qgb3B0aW9ucy5pc1R5cGVkIG9yIHRhcmdldC50eXBlQ2hlY2tzW2V4dFR5cGVOYW1lXShleHRlcm5hbFZhbHVlKSkgYW5kIHRyeVdyaXRlKGZuSWRlbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgICAgICAgICAjIHRyeSBkZWZhdWx0IGNvbnZlcnNpb25cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMuaWdub3JlRGVmYXVsdENvbnZlcnRlcnNcclxuICAgICAgICAgICAgICAgICAgaWYgdHJ5V3JpdGUoa28udHlwZWQuZ2V0Q29udmVydGVyKGV4dFR5cGVOYW1lLCBpbnRUeXBlTmFtZSksIGludFR5cGVPcHRpb25zLndyaXRlT3B0aW9ucylcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICMgTG9vayBmb3Igb25lLXNpZGVkIGNvbnZlcnNpb25cclxuICAgICAgICAgICAgZm9yIGV4dFR5cGVOYW1lIGluIGV4dFR5cGVOYW1lc1xyXG4gICAgICAgICAgICAgIGV4dFR5cGVPcHRpb25zID0gb3B0aW9uc1tleHRUeXBlTmFtZV0gPyB7fVxyXG5cclxuICAgICAgICAgICAgICBpZiAoZXh0VHlwZU9wdGlvbnMuY2hlY2tTZWxmPyBhbmQgbm90IGV4dFR5cGVPcHRpb25zLmNoZWNrU2VsZihleHRlcm5hbFZhbHVlKSkgb3IgKG5vdCBleHRUeXBlT3B0aW9ucy5jaGVja1NlbGY/IGFuZCBub3QgaXNBbihleHRlcm5hbFZhbHVlLCBleHRUeXBlTmFtZSkpXHJcbiAgICAgICAgICAgICAgICBjb250aW51ZVxyXG5cclxuICAgICAgICAgICAgICAjIHRyeSBjdXN0b20gY29udmVyc2lvblxyXG4gICAgICAgICAgICAgIGlmIHRyeVdyaXRlKGV4dFR5cGVPcHRpb25zLndyaXRlLCBleHRUeXBlT3B0aW9ucy53cml0ZU9wdGlvbnMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuXHJcbiAgICAgICAgICAgICMgTG9vayBmb3IgZ2VuZXJpYyBjb252ZXJzaW9uXHJcbiAgICAgICAgICAgIGlmIHRyeVdyaXRlKG9wdGlvbnMud3JpdGUsIG9wdGlvbnMud3JpdGVPcHRpb25zKVxyXG4gICAgICAgICAgICAgIHJldHVyblxyXG5cclxuICAgICAgICAgIGlmIG9wdGlvbnMuaXNUeXBlZFxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBleHRlcm5hbCB0eXBlICN7aXNBbihleHRlcm5hbFZhbHVlKX0gdG8gaW50ZXJuYWwgdHlwZSAje3RhcmdldC50eXBlTmFtZX1cIilcclxuICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gZXh0ZXJuYWwgdHlwZSAje2lzQW4oZXh0ZXJuYWxWYWx1ZSl9XCIpXHJcbiAgICAgIClcclxuICAgIH0pXHJcblxyXG4gICAgcmVzdWx0LnR5cGVOYW1lID0gb3B0aW9ucy50eXBlXHJcbiAgICByZXN1bHQudHlwZU5hbWVzID0gb3B0aW9ucy50eXBlc1xyXG4gICAgcmVzdWx0LnR5cGVDaGVjayA9IG9wdGlvbnMuY2hlY2tcclxuICAgIHJlc3VsdC50eXBlQ2hlY2tzID0gb3B0aW9ucy5jaGVja3NcclxuXHJcbiAgICByZXN1bHQucmVhZEVycm9yID0gcmVhZEVycm9yXHJcbiAgICByZXN1bHQud3JpdGVFcnJvciA9IHdyaXRlRXJyb3JcclxuXHJcbiAgICB2YWxpZGF0ZSh0YXJnZXQsIHJlc3VsdCwgb3B0aW9ucylcclxuXHJcbiAgICBpZiBub3Qgb3B0aW9ucy5kZWZlckV2YWx1YXRpb25cclxuICAgICAgdHJ5XHJcbiAgICAgICAgcmVzdWx0LnBlZWsoKVxyXG4gICAgICBjYXRjaCBleFxyXG4gICAgICAgIHJlc3VsdC5kaXNwb3NlKClcclxuICAgICAgICB0aHJvdyBleFxyXG5cclxuICAgIHJldHVybiByZXN1bHRcclxuXHJcbiAga28uZXh0ZW5kZXJzLmNvbnZlcnQub3B0aW9ucyA9IHtcclxuICB9XHJcblxyXG5cclxuICBkbyAtPlxyXG4gICAga28udHlwZWQuX2NvbnZlcnRlcnMgPSBjb252ZXJ0ZXJzID0ge31cclxuXHJcbiAgICBrby50eXBlZC5hZGRDb252ZXJ0ZXIgPSAoZnJvbVR5cGVOYW1lLCB0b1R5cGVOYW1lLCBjb252ZXJ0ZXIsIGRlZmF1bHRPcHRpb25zLCBkZWZhdWx0T3B0aW9uKSAtPlxyXG4gICAgICBjb25zb2xlPy5hc3NlcnQ/KGlzVmFsaWRUeXBlTmFtZShmcm9tVHlwZU5hbWUpLCBcIkludmFsaWQgdHlwZU5hbWUgI3tmcm9tVHlwZU5hbWV9XCIpXHJcbiAgICAgIGNvbnNvbGU/LmFzc2VydD8oaXNWYWxpZFR5cGVOYW1lKHRvVHlwZU5hbWUpLCBcIkludmFsaWQgdHlwZU5hbWUgI3tmcm9tVHlwZU5hbWV9XCIpXHJcblxyXG4gICAgICBpZiBkZWZhdWx0T3B0aW9ucz9cclxuICAgICAgICBpZiBkZWZhdWx0T3B0aW9uP1xyXG4gICAgICAgICAgd3JhcHBlciA9ICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgICAgICAgaWYgYXJndW1lbnRzLmxlbmd0aCA9PSAyIGFuZCBub3QgaXNBbi5PYmplY3Qob3B0aW9ucylcclxuICAgICAgICAgICAgICBvID0ge31cclxuICAgICAgICAgICAgICBvW2RlZmF1bHRPcHRpb25dID0gb3B0aW9uc1xyXG4gICAgICAgICAgICAgIG9wdGlvbnMgPSBvXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlLCBrby51dGlscy5leHRlbmQoa28udXRpbHMuZXh0ZW5kKHt9LCB3cmFwcGVyLm9wdGlvbnMpLCBvcHRpb25zKSlcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICB3cmFwcGVyID0gKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlLCBrby51dGlscy5leHRlbmQoa28udXRpbHMuZXh0ZW5kKHt9LCB3cmFwcGVyLm9wdGlvbnMpLCBvcHRpb25zKSlcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHdyYXBwZXIgPSAodmFsdWUpIC0+XHJcbiAgICAgICAgICByZXR1cm4gY29udmVydGVyKHZhbHVlKVxyXG5cclxuICAgICAgd3JhcHBlci5vcHRpb25zID0gZGVmYXVsdE9wdGlvbnNcclxuXHJcbiAgICAgIGNvbnZlcnRlcnNbZnJvbVR5cGVOYW1lXSA/PSB7fVxyXG4gICAgICBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV1bdG9UeXBlTmFtZV0gPSB3cmFwcGVyXHJcblxyXG4gICAgICByZXR1cm4ga28udHlwZWRcclxuXHJcbiAgICBrby50eXBlZC5nZXRDb252ZXJ0ZXIgPSAoZnJvbVR5cGVOYW1lLCB0b1R5cGVOYW1lKSAtPlxyXG4gICAgICBjb252ZXJ0ZXJzW2Zyb21UeXBlTmFtZV0/W3RvVHlwZU5hbWVdXHJcblxyXG4gICAga28udHlwZWQucmVtb3ZlQ29udmVydGVyID0gKGZyb21UeXBlTmFtZSwgdG9UeXBlTmFtZSkgLT5cclxuICAgICAgaWYgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdP1t0b1R5cGVOYW1lXT9cclxuICAgICAgICBkZWxldGUgY29udmVydGVyc1tmcm9tVHlwZU5hbWVdP1t0b1R5cGVOYW1lXVxyXG5cclxuICAgICAgcmV0dXJuIGtvLnR5cGVkXHJcblxyXG4gICAgcmV0dXJuXHJcblxyXG5cclxuICBkbyAtPlxyXG4gICAgIyMgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTWF0aC9yb3VuZFxyXG4gICAgZGVjaW1hbEFkanVzdCA9ICh0eXBlLCB2YWx1ZSwgZXhwKSAtPlxyXG4gICAgICAjIGlmIGV4cCBpcyB1bmRlZmluZWQgb3IgemVyb1xyXG4gICAgICBpZiBub3QgZXhwPyBvciArZXhwID09IDBcclxuICAgICAgICByZXR1cm4gdHlwZSh2YWx1ZSlcclxuXHJcbiAgICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICAgIGV4cCA9ICtleHBcclxuXHJcbiAgICAgICMgSWYgdGhlIHZhbHVlIGl0IG5vdCBhIG51bWJlciBvZiB0aGUgZXhwIGlzIG5vdCBhbiBpbnRlZ2VyXHJcbiAgICAgIGlmIChpc05hTih2YWx1ZSkgb3Igbm90ICh0eXBlb2YgZXhwID09ICdudW1iZXInIGFuZCBleHAgJSAxID09IDApKVxyXG4gICAgICAgIHJldHVybiBOYU5cclxuXHJcbiAgICAgICMgU2hpZnRcclxuICAgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpLnNwbGl0KCdlJylcclxuICAgICAgdmFsdWUgPSB0eXBlKCsodmFsdWVbMF0gKyAnZScgKyAoaWYgdmFsdWVbMV0gdGhlbiAoK3ZhbHVlWzFdIC0gZXhwKSBlbHNlIC1leHApKSlcclxuXHJcbiAgICAgICMgU2hpZnQgYmFja1xyXG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCkuc3BsaXQoJ2UnKVxyXG4gICAgICByZXR1cm4gKCsodmFsdWVbMF0gKyAnZScgKyAoaWYgdmFsdWVbMV0gdGhlbiAoK3ZhbHVlWzFdICsgZXhwKSBlbHNlIGV4cCkpKVxyXG5cclxuICAgICMjIyAhcHJhZ21hIGNvdmVyYWdlLXNraXAtbmV4dCAjIyNcclxuICAgIGlmIG5vdCBNYXRoLnJvdW5kMTA/XHJcbiAgICAgIE1hdGgucm91bmQxMCA9ICh2YWx1ZSwgZXhwKSAtPlxyXG4gICAgICAgIHJldHVybiBkZWNpbWFsQWRqdXN0KE1hdGgucm91bmQsIHZhbHVlLCBleHApXHJcblxyXG4gICAgIyMjICFwcmFnbWEgY292ZXJhZ2Utc2tpcC1uZXh0ICMjI1xyXG4gICAgaWYgbm90IE1hdGguZmxvb3IxMD9cclxuICAgICAgTWF0aC5mbG9vcjEwID0gKHZhbHVlLCBleHApIC0+XHJcbiAgICAgICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoTWF0aC5mbG9vciwgdmFsdWUsIGV4cClcclxuXHJcbiAgICAjIyMgIXByYWdtYSBjb3ZlcmFnZS1za2lwLW5leHQgIyMjXHJcbiAgICBpZiBub3QgTWF0aC5jZWlsMTA/XHJcbiAgICAgIE1hdGguY2VpbDEwID0gKHZhbHVlLCBleHApIC0+XHJcbiAgICAgICAgcmV0dXJuIGRlY2ltYWxBZGp1c3QoTWF0aC5jZWlsLCB2YWx1ZSwgZXhwKVxyXG5cclxuICAgIHJldHVyblxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnQm9vbGVhbidcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgcmV0dXJuIGlmIHZhbHVlIHRoZW4gb3B0aW9ucy50cnV0aHkgZWxzZSBvcHRpb25zLmZhbHNleVxyXG4gICAge1xyXG4gICAgICB0cnV0aHk6IDFcclxuICAgICAgZmFsc2V5OiAwXHJcbiAgICB9XHJcbiAgICAndHJ1dGh5J1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0Jvb2xlYW4nXHJcbiAgICAnTnVtYmVyJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICByZXR1cm4gaWYgdmFsdWUgdGhlbiBvcHRpb25zLnRydXRoeSBlbHNlIG9wdGlvbnMuZmFsc2V5XHJcbiAgICB7XHJcbiAgICAgIHRydXRoeTogMVxyXG4gICAgICBmYWxzZXk6IDBcclxuICAgIH1cclxuICAgICd0cnV0aHknXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnQm9vbGVhbidcclxuICAgICdTdHJpbmcnXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIHZhbHVlID0gaWYgdmFsdWUgdGhlbiBvcHRpb25zLnRydXRoeSBlbHNlIG9wdGlvbnMuZmFsc2V5XHJcblxyXG4gICAgICBpZiBvcHRpb25zLnVwcGVyQ2FzZVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9VcHBlckNhc2UoKVxyXG5cclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB7XHJcbiAgICAgIHVwcGVyQ2FzZTogZmFsc2VcclxuICAgICAgdHJ1dGh5OiAndHJ1ZSdcclxuICAgICAgZmFsc2V5OiAnZmFsc2UnXHJcbiAgICB9XHJcbiAgICAndXBwZXJDYXNlJ1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0RhdGUnXHJcbiAgICAnTW9tZW50J1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICAobW9tZW50ID8gcmVxdWlyZSgnbW9tZW50JykpKHZhbHVlKVxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ0RhdGUnXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBpc05hTih2YWx1ZS52YWx1ZU9mKCkpXHJcbiAgICAgICAgcmV0dXJuICcnXHJcblxyXG4gICAgICBtZXRob2QgPSBvcHRpb25zLmZvcm1hdHNbb3B0aW9ucy5mb3JtYXRdXHJcbiAgICAgIHJldHVybiB2YWx1ZVttZXRob2RdLmFwcGx5KHZhbHVlLCBvcHRpb25zLnBhcmFtcylcclxuXHJcbiAgICB7XHJcbiAgICAgIGZvcm1hdHM6IHtcclxuICAgICAgICBkYXRlOiAndG9EYXRlU3RyaW5nJ1xyXG4gICAgICAgIGlzbzogJ3RvSVNPU3RyaW5nJ1xyXG4gICAgICAgIGpzb246ICd0b0pTT04nXHJcbiAgICAgICAgbG9jYWxlRGF0ZTogJ3RvTG9jYWxlRGF0ZVN0cmluZydcclxuICAgICAgICBsb2NhbGVUaW1lOiAndG9Mb2NhbGVUaW1lU3RyaW5nJ1xyXG4gICAgICAgIGxvY2FsZTogJ3RvTG9jYWxlU3RyaW5nJ1xyXG4gICAgICAgIHRpbWU6ICd0b1RpbWVTdHJpbmcnXHJcbiAgICAgICAgdXRjOiAndG9VVENTdHJpbmcnXHJcbiAgICAgICAgZGVmYXVsdDogJ3RvU3RyaW5nJ1xyXG4gICAgICB9XHJcbiAgICAgIGZvcm1hdDogJ2RlZmF1bHQnXHJcbiAgICAgIHBhcmFtczogW11cclxuICAgIH1cclxuICAgICdmb3JtYXQnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnRGF0ZScsXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgbm90IGlzTmFOKHZhbHVlLnZhbHVlT2YoKSlcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIHZhbGlkIERhdGUgdG8gVW5kZWZpbmVkJylcclxuXHJcbiAgICAgIHJldHVybiB1bmRlZmluZWRcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdNb21lbnQnXHJcbiAgICAnRGF0ZSdcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgdmFsdWUudG9EYXRlKClcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdNb21lbnQnXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBub3QgdmFsdWUuaXNWYWxpZCgpXHJcbiAgICAgICAgcmV0dXJuICcnXHJcblxyXG4gICAgICByZXR1cm4gdmFsdWUubG9jYWxlKG9wdGlvbnMubG9jYWxlKS5mb3JtYXQob3B0aW9ucy5mb3JtYXQpXHJcbiAgICB7XHJcbiAgICAgIGxvY2FsZTogJ2VuJ1xyXG4gICAgICBmb3JtYXQ6ICdMJ1xyXG4gICAgfVxyXG4gICAgJ2Zvcm1hdCdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdNb21lbnQnLFxyXG4gICAgJ1VuZGVmaW5lZCcsXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIHZhbHVlLmlzVmFsaWQoKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gdmFsaWQgTW9tZW50IHRvIFVuZGVmaW5lZCcpXHJcblxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnTnVtYmVyJ1xyXG4gICAgJ0Jvb2xlYW4nXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMuZmFsc2V5PyBhbmQgdmFsdWUgPT0gb3B0aW9ucy5mYWxzZXlcclxuICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgZWxzZSBpZiBvcHRpb25zLnRydXRoeT8gYW5kIHZhbHVlID09IG9wdGlvbnMudHJ1dGh5XHJcbiAgICAgICAgcmV0dXJuIHRydWVcclxuICAgICAgZWxzZSBpZiBub3Qgb3B0aW9ucy5mYWxzZXk/XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMudHJ1dGh5P1xyXG4gICAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBCb29sZWFuXCIpXHJcbiAgICB7XHJcbiAgICAgIHRydXRoeTogdW5kZWZpbmVkXHJcbiAgICAgIGZhbHNleTogMFxyXG4gICAgfVxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ051bWJlcidcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgbm90IG9wdGlvbnMubW9kZT9cclxuICAgICAgICBpZiBub3QgaXNBbi5OdW1iZXIuSW50ZWdlcih2YWx1ZSlcclxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCBjb252ZXJ0IGZyb20gTnVtYmVyIHRvIE51bWJlci5JbnRlZ2VyLiBOdW1iZXIgaXMgbm90IGFuIGludGVnZXInKVxyXG4gICAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAgICBlbHNlIGlmIHR5cGVvZiBvcHRpb25zLm1vZGUgPT0gJ3N0cmluZydcclxuICAgICAgICBtb2RlID0gTWF0aFtvcHRpb25zLm1vZGVdXHJcbiAgICAgIGVsc2VcclxuICAgICAgICBtb2RlID0gb3B0aW9ucy5tb2RlXHJcblxyXG4gICAgICByZXR1cm4gbW9kZSh2YWx1ZSlcclxuICAgIHtcclxuICAgICAgbW9kZTogdW5kZWZpbmVkXHJcbiAgICB9XHJcbiAgICAnbW9kZSdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXInXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLmRlY2ltYWxzP1xyXG4gICAgICAgIHZhbHVlID0gTWF0aC5yb3VuZDEwKHZhbHVlLCAtb3B0aW9ucy5kZWNpbWFscylcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvRml4ZWQob3B0aW9ucy5kZWNpbWFscylcclxuICAgICAgZWxzZVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKVxyXG5cclxuICAgICAgcmV0dXJuIHZhbHVlXHJcbiAgICB7XHJcbiAgICAgIGRlY2ltYWxzOiB1bmRlZmluZWRcclxuICAgIH1cclxuICAgICdkZWNpbWFscydcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICdCb29sZWFuJ1xyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLmZhbHNleT8gYW5kIHZhbHVlID09IG9wdGlvbnMuZmFsc2V5XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgIGVsc2UgaWYgb3B0aW9ucy50cnV0aHk/IGFuZCB2YWx1ZSA9PSBvcHRpb25zLnRydXRoeVxyXG4gICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgIGVsc2UgaWYgbm90IG9wdGlvbnMuZmFsc2V5P1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICBlbHNlIGlmIG5vdCBvcHRpb25zLnRydXRoeT9cclxuICAgICAgICByZXR1cm4gdHJ1ZVxyXG5cclxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb252ZXJ0IGZyb20gI3t2YWx1ZX0gdG8gQm9vbGVhblwiKVxyXG4gICAge1xyXG4gICAgICB0cnV0aHk6IHVuZGVmaW5lZFxyXG4gICAgICBmYWxzZXk6IDBcclxuICAgIH1cclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICdOdW1iZXInLFxyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdOdW1iZXIuSW50ZWdlcidcclxuICAgICdTdHJpbmcnLFxyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKG9wdGlvbnMuYmFzZSlcclxuICAgICAgaWYgb3B0aW9ucy51cHBlckNhc2VcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvVXBwZXJDYXNlKClcclxuXHJcbiAgICAgIHJldHVybiB2YWx1ZVxyXG4gICAge1xyXG4gICAgICBiYXNlOiAxMFxyXG4gICAgICB1cHBlckNhc2U6IGZhbHNlXHJcbiAgICB9XHJcbiAgICAnYmFzZSdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdTdHJpbmcnLFxyXG4gICAgJ0Jvb2xlYW4nLFxyXG4gICAgKHZhbHVlLCBvcHRpb25zKSAtPlxyXG4gICAgICBpZiBvcHRpb25zLnRyaW1cclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRyaW0oKVxyXG5cclxuICAgICAgaWYgb3B0aW9ucy5pZ25vcmVDYXNlXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpXHJcblxyXG4gICAgICBpZiBvcHRpb25zLnN0cmljdFxyXG4gICAgICAgIGlmIHZhbHVlID09IG9wdGlvbnMudHJ1dGh5WzBdXHJcbiAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIGVsc2UgaWYgdmFsdWUgPT0gb3B0aW9ucy5mYWxzZXlbMF1cclxuICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgZm9yIHRydXRoeSBpbiBvcHRpb25zLnRydXRoeVxyXG4gICAgICAgICAgaWYgdmFsdWUgPT0gdHJ1dGh5XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlXHJcblxyXG4gICAgICAgIGZvciBmYWxzZXkgaW4gb3B0aW9ucy5mYWxzZXlcclxuICAgICAgICAgIGlmIHZhbHVlID09IGZhbHNleVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuXHJcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCBmcm9tICN7dmFsdWV9IHRvIEJvb2xlYW5cIilcclxuICAgIHtcclxuICAgICAgaWdub3JlQ2FzZTogdHJ1ZVxyXG4gICAgICBzdHJpY3Q6IGZhbHNlXHJcbiAgICAgIHRydXRoeTogW1xyXG4gICAgICAgICd0cnVlJ1xyXG4gICAgICAgICd0J1xyXG4gICAgICAgICcxJ1xyXG4gICAgICAgICctMSdcclxuICAgICAgICAneWVzJ1xyXG4gICAgICAgICd5J1xyXG4gICAgICBdXHJcbiAgICAgIGZhbHNleTogW1xyXG4gICAgICAgICdmYWxzZSdcclxuICAgICAgICAnZidcclxuICAgICAgICAnMCdcclxuICAgICAgICAnbm8nXHJcbiAgICAgICAgJ24nXHJcbiAgICAgIF1cclxuICAgICAgdHJpbTogZmFsc2VcclxuICAgIH1cclxuICAgICdzdHJpY3QnXHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnU3RyaW5nJ1xyXG4gICAgJ0RhdGUnXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICBpZiBvcHRpb25zLnN0cmljdFxyXG4gICAgICAgIG1hdGNoID0gdmFsdWUubWF0Y2gob3B0aW9ucy5mb3JtYXQpXHJcbiAgICAgICAgaWYgbm90IG1hdGNoP1xyXG4gICAgICAgICAgdGhyb3cgVHlwZUVycm9yKCdVbmFibGUgdG8gY29udmVydCBmcm9tIFN0cmluZyB0byBEYXRlJylcclxuXHJcbiAgICAgICAgbnVtID0gKHZhbHVlLCBkZWYpIC0+XHJcbiAgICAgICAgICBpZiAodmFsdWU/IGFuZCB2YWx1ZSAhPSAnJykgdGhlbiBwYXJzZUZsb2F0KHZhbHVlKSBlbHNlIGRlZlxyXG5cclxuICAgICAgICB0eiA9IHVuZGVmaW5lZFxyXG4gICAgICAgIGlmIG1hdGNoWzddPyBhbmQgbWF0Y2hbN10gIT0gJydcclxuICAgICAgICAgIHR6ID0gKG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QudHpIb3Vyc10pICogNjAgKyBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6TWludXRlc10pKSAqIDYwICogMTAwMFxyXG4gICAgICAgICAgaWYgbWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnR6U2lnbl0gPT0gJy0nXHJcbiAgICAgICAgICAgIHR6ICo9IC0xXHJcblxyXG4gICAgICAgIGlmIG9wdGlvbnMudXRjIG9yIHR6P1xyXG4gICAgICAgICAgdGltZSA9IERhdGUuVVRDKFxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LnllYXJdLCAwKVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0Lm1vbnRoXSwgMSkgLSAxXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QuZGF5XSwgMSlcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5ob3Vyc10sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubWludXRlc10sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3Quc2Vjb25kc10sIDApXHJcbiAgICAgICAgICApXHJcblxyXG4gICAgICAgICAgaWYgdHo/XHJcbiAgICAgICAgICAgIHRpbWUgKz0gdHpcclxuXHJcbiAgICAgICAgICBkYXRlID0gbmV3IERhdGUodGltZSlcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QueWVhcl0sIDApXHJcbiAgICAgICAgICAgIG51bShtYXRjaFtvcHRpb25zLmZvcm1hdERpY3QubW9udGhdLCAxKSAtIDFcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5kYXldLCAxKVxyXG4gICAgICAgICAgICBudW0obWF0Y2hbb3B0aW9ucy5mb3JtYXREaWN0LmhvdXJzXSwgMClcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5taW51dGVzXSwgMClcclxuICAgICAgICAgICAgbnVtKG1hdGNoW29wdGlvbnMuZm9ybWF0RGljdC5zZWNvbmRzXSwgMClcclxuICAgICAgICAgIClcclxuXHJcbiAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSBkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgKiA2MCAqIDEwMDApXHJcbiAgICAgIGVsc2VcclxuICAgICAgICBkYXRlID0gbmV3IERhdGUodmFsdWUpXHJcblxyXG4gICAgICBpZiBpc05hTihkYXRlLnZhbHVlT2YoKSlcclxuICAgICAgICB0aHJvdyBUeXBlRXJyb3IoJ1VuYWJsZSB0byBjb252ZXJ0IGZyb20gU3RyaW5nIHRvIERhdGUnKVxyXG5cclxuICAgICAgcmV0dXJuIGRhdGVcclxuICAgIHtcclxuICAgICAgIyBodHRwczovL3d3dy5kZWJ1Z2dleC5jb20vci9GbkRmOTBocW5HdWwxWll1LzBcclxuICAgICAgZm9ybWF0OiAvXihbMC05XXs0fSktKFswLTldezJ9KS0oWzAtOV17Mn0pKD86KD86VHxcXHMpKFswLTldezJ9KTooWzAtOV17Mn0pKD86OihbMC05XXsyfSg/Oi5bMC05XSspPykpPyg/OihcXCt8XFwtKShbMC05XXsyfSk6KFswLTldezJ9KSk/KT8kL1xyXG4gICAgICBmb3JtYXREaWN0OiB7XHJcbiAgICAgICAgeWVhcjogMVxyXG4gICAgICAgIG1vbnRoOiAyXHJcbiAgICAgICAgZGF5OiAzXHJcbiAgICAgICAgaG91cnM6IDRcclxuICAgICAgICBtaW51dGVzOiA1XHJcbiAgICAgICAgc2Vjb25kczogNlxyXG4gICAgICAgIHR6U2lnbjogN1xyXG4gICAgICAgIHR6SG91cnM6IDhcclxuICAgICAgICB0ek1pbnV0ZXM6IDlcclxuICAgICAgfVxyXG4gICAgICB1dGM6IGZhbHNlXHJcbiAgICAgIHN0cmljdDogdHJ1ZVxyXG4gICAgICB0cmltOiBmYWxzZVxyXG4gICAgfVxyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1N0cmluZydcclxuICAgICdNb21lbnQnXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICByZXN1bHQgPSAobW9tZW50ID8gcmVxdWlyZSgnbW9tZW50JykpKHZhbHVlLCBvcHRpb25zLmZvcm1hdCwgb3B0aW9ucy5sYW5ndWFnZSwgb3B0aW9ucy5zdHJpY3QpXHJcbiAgICAgIGlmIG5vdCByZXN1bHQuaXNWYWxpZCgpXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSBTdHJpbmcgdG8gTW9tZW50JylcclxuXHJcbiAgICAgIHJldHVybiByZXN1bHRcclxuICAgIHtcclxuICAgICAgc3RyaWN0OiBmYWxzZVxyXG4gICAgICBsYW5ndWFnZTogJ2VuJ1xyXG4gICAgICBmb3JtYXQ6ICdMJ1xyXG4gICAgICB0cmltOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgJ2Zvcm1hdCdcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdTdHJpbmcnLFxyXG4gICAgJ051bWJlci5JbnRlZ2VyJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgb3B0aW9ucy50cmltXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKClcclxuXHJcbiAgICAgIGlmIG9wdGlvbnMuYmFzZSA9PSAxMCBhbmQgbm90IG9wdGlvbnMuc3RyaWN0XHJcbiAgICAgICAgdHJ5XHJcbiAgICAgICAgICByZXR1cm4ga28udHlwZWQuZ2V0Q29udmVydGVyKCdTdHJpbmcnLCAnTnVtYmVyJykodmFsdWUsIDApXHJcbiAgICAgICAgY2F0Y2ggZXhcclxuICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJVbmFibGUgdG8gY29udmVydCBmcm9tICN7dmFsdWV9IHRvIE51bWJlci5JbnRlZ2VyXCIpXHJcblxyXG4gICAgICBjaGFycyA9ICcwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXonXHJcbiAgICAgIGlmIG5vdCBSZWdFeHAoXCJeKFxcXFwtfFxcXFwrKT9bI3tjaGFycy5zbGljZSgwLCBvcHRpb25zLmJhc2UgPyAxMCl9XSskXCIsIGlmIG5vdCBvcHRpb25zLnN0cmljdCB0aGVuICdpJykudGVzdCh2YWx1ZSlcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBOdW1iZXIuSW50ZWdlclwiKVxyXG5cclxuICAgICAgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCBvcHRpb25zLmJhc2UpXHJcbiAgICB7XHJcbiAgICAgIGJhc2U6IDEwXHJcbiAgICAgIHN0cmljdDogZmFsc2VcclxuICAgICAgdHJpbTogZmFsc2VcclxuICAgIH1cclxuICAgICdiYXNlJ1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1N0cmluZydcclxuICAgICdOdW1iZXInXHJcbiAgICAodmFsdWUsIG9wdGlvbnMpIC0+XHJcbiAgICAgIGlmIG9wdGlvbnMudHJpbVxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXHJcblxyXG4gICAgICBpZiBub3QgL14oXFwrfFxcLSk/WzAtOV0rKFxcLj8pWzAtOV0qJC8udGVzdCh2YWx1ZSlcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5hYmxlIHRvIGNvbnZlcnQgZnJvbSAje3ZhbHVlfSB0byBOdW1iZXJcIilcclxuXHJcbiAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSwgb3B0aW9ucy5iYXNlKVxyXG5cclxuICAgICAgaWYgb3B0aW9ucy5kZWNpbWFscz9cclxuICAgICAgICB2YWx1ZSA9IE1hdGgucm91bmQxMCh2YWx1ZSwgLW9wdGlvbnMuZGVjaW1hbHMpXHJcblxyXG4gICAgICByZXR1cm4gdmFsdWVcclxuICAgIHtcclxuICAgICAgZGVjaW1hbHM6IHVuZGVmaW5lZFxyXG4gICAgICB0cmltOiBmYWxzZVxyXG4gICAgfVxyXG4gICAgJ2RlY2ltYWxzJ1xyXG4gIClcclxuXHJcbiAga28udHlwZWQuYWRkQ29udmVydGVyKFxyXG4gICAgJ1N0cmluZycsXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICh2YWx1ZSwgb3B0aW9ucykgLT5cclxuICAgICAgaWYgb3B0aW9ucy50cmltXHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS50cmltKClcclxuXHJcbiAgICAgIGlmIHZhbHVlLmxlbmd0aCAhPSAwXHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuYWJsZSB0byBjb252ZXJ0IGZyb20gI3t2YWx1ZX0gdG8gVW5kZWZpbmVkXCIpXHJcblxyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXHJcbiAgICB7XHJcbiAgICAgIHRyaW06IGZhbHNlXHJcbiAgICB9XHJcbiAgKVxyXG5cclxuICBrby50eXBlZC5hZGRDb252ZXJ0ZXIoXHJcbiAgICAnVW5kZWZpbmVkJyxcclxuICAgICdEYXRlJyxcclxuICAgICh2YWx1ZSkgLT5cclxuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTilcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdVbmRlZmluZWQnLFxyXG4gICAgJ01vbWVudCcsXHJcbiAgICAodmFsdWUpIC0+XHJcbiAgICAgIHJldHVybiByZXF1aXJlKCdtb21lbnQnKS5pbnZhbGlkKClcclxuICApXHJcblxyXG4gIGtvLnR5cGVkLmFkZENvbnZlcnRlcihcclxuICAgICdVbmRlZmluZWQnLFxyXG4gICAgJ1N0cmluZycsXHJcbiAgICAodmFsdWUpIC0+XHJcbiAgICAgIHJldHVybiAnJ1xyXG4gIClcclxuXHJcbiAgcmV0dXJuIGtvXHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
